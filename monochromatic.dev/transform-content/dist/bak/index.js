(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,global.transformContent=factory())})(this,(function(){'use strict';const path$2={};const __viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:path$2},Symbol.toStringTag,{value:'Module'}));function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x}function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var a=function a(){if(this instanceof a){var args=[null];args.push.apply(args,arguments);var Ctor=Function.bind.apply(f,args);return new Ctor}return f.apply(this,arguments)};a.prototype=f.prototype}else a={};Object.defineProperty(a,'__esModule',{value:true});Object.keys(n).forEach((function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:true,get:function(){return n[k]}})}));return a}function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var shell$1={};var common$1={};const require$$0=getAugmentedNamespace(__viteBrowserExternal);var old$1={};var pathModule=require$$0;var isWindows=process.platform==='win32';var fs$2=require$$0;var DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var callback;if(DEBUG){var backtrace=new Error;callback=debugCallback}else callback=missingCallback;return callback;function debugCallback(err){if(err){backtrace.message=err.message;err=backtrace;missingCallback(err)}}function missingCallback(err){if(err){if(process.throwDeprecation)throw err;else if(!process.noDeprecation){var msg='fs: missing callback '+(err.stack||err.message);if(process.traceDeprecation)console.trace(msg);else console.error(msg)}}}}function maybeCallback(cb){return typeof cb==='function'?cb:rethrow()}pathModule.normalize;if(isWindows){var nextPartRe=/(.*?)(?:[\/\\]+|$)/g}else{var nextPartRe=/(.*?)(?:[\/]+|$)/g}if(isWindows){var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/}else{var splitRootRe=/^[\/]*/}old$1.realpathSync=function realpathSync(p,cache){p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return cache[p]}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous='';if(isWindows&&!knownHard[base]){fs$2.lstatSync(base);knownHard[base]=true}}while(pos<p.length){nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){continue}var resolvedLink;if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){resolvedLink=cache[base]}else{var stat=fs$2.lstatSync(base);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;continue}var linkTarget=null;if(!isWindows){var id=stat.dev.toString(32)+':'+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){linkTarget=seenLinks[id]}}if(linkTarget===null){fs$2.statSync(base);linkTarget=fs$2.readlinkSync(base)}resolvedLink=pathModule.resolve(previous,linkTarget);if(cache)cache[base]=resolvedLink;if(!isWindows)seenLinks[id]=linkTarget}p=pathModule.resolve(resolvedLink,p.slice(pos));start()}if(cache)cache[original]=p;return p};old$1.realpath=function realpath(p,cache,cb){if(typeof cb!=='function'){cb=maybeCallback(cache);cache=null}p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return process.nextTick(cb.bind(null,null,cache[p]))}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous='';if(isWindows&&!knownHard[base]){fs$2.lstat(base,(function(err){if(err)return cb(err);knownHard[base]=true;LOOP()}))}else{process.nextTick(LOOP)}}function LOOP(){if(pos>=p.length){if(cache)cache[original]=p;return cb(null,p)}nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){return process.nextTick(LOOP)}if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){return gotResolvedLink(cache[base])}return fs$2.lstat(base,gotStat)}function gotStat(err,stat){if(err)return cb(err);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;return process.nextTick(LOOP)}if(!isWindows){var id=stat.dev.toString(32)+':'+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){return gotTarget(null,seenLinks[id],base)}}fs$2.stat(base,(function(err){if(err)return cb(err);fs$2.readlink(base,(function(err,target){if(!isWindows)seenLinks[id]=target;gotTarget(err,target)}))}))}function gotTarget(err,target,base){if(err)return cb(err);var resolvedLink=pathModule.resolve(previous,target);if(cache)cache[base]=resolvedLink;gotResolvedLink(resolvedLink)}function gotResolvedLink(resolvedLink){p=pathModule.resolve(resolvedLink,p.slice(pos));start()}};var fs_realpath=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var fs$1=require$$0;var origRealpath=fs$1.realpath;var origRealpathSync=fs$1.realpathSync;var version=process.version;var ok=/^v[0-5]\./.test(version);var old=old$1;function newError(er){return er&&er.syscall==='realpath'&&(er.code==='ELOOP'||er.code==='ENOMEM'||er.code==='ENAMETOOLONG')}function realpath(p,cache,cb){if(ok){return origRealpath(p,cache,cb)}if(typeof cache==='function'){cb=cache;cache=null}origRealpath(p,cache,(function(er,result){if(newError(er)){old.realpath(p,cache,cb)}else{cb(er,result)}}))}function realpathSync(p,cache){if(ok){return origRealpathSync(p,cache)}try{return origRealpathSync(p,cache)}catch(er){if(newError(er)){return old.realpathSync(p,cache)}else{throw er}}}function monkeypatch(){fs$1.realpath=realpath;fs$1.realpathSync=realpathSync}function unmonkeypatch(){fs$1.realpath=origRealpath;fs$1.realpathSync=origRealpathSync}var concatMap$1=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray$3(x))res.push.apply(res,x);else res.push(x)}return res};var isArray$3=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]'};var balancedMatch=balanced$1;function balanced$1(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}balanced$1.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){if(a===b){return[ai,bi]}begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1)}else if(begs.length==1){result=[begs.pop(),bi]}else{beg=begs.pop();if(beg<left){left=beg;right=bi}bi=str.indexOf(b,i+1)}i=ai<bi&&ai>=0?ai:bi}if(begs.length){result=[left,right]}}return result}var concatMap=concatMap$1;var balanced=balancedMatch;var braceExpansion=expandTop;var escSlash='\0SLASH'+Math.random()+'\0';var escOpen='\0OPEN'+Math.random()+'\0';var escClose='\0CLOSE'+Math.random()+'\0';var escComma='\0COMMA'+Math.random()+'\0';var escPeriod='\0PERIOD'+Math.random()+'\0';function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split('\\\\').join(escSlash).split('\\{').join(escOpen).split('\\}').join(escClose).split('\\,').join(escComma).split('\\.').join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join('\\').split(escOpen).join('{').split(escClose).join('}').split(escComma).join(',').split(escPeriod).join('.')}function parseCommaParts(str){if(!str)return[''];var parts=[];var m=balanced('{','}',str);if(!m)return str.split(',');var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(',');p[p.length-1]+='{'+body+'}';var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];if(str.substr(0,2)==='{}'){str='\\{\\}'+str.substr(2)}return expand$1(escapeBraces(str),true).map(unescapeBraces)}function embrace(str){return'{'+str+'}'}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand$1(str,isTop){var expansions=[];var m=balanced('{','}',str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(',')>=0;if(!isSequence&&!isOptions){if(m.post.match(/,.*\}/)){str=m.pre+'{'+m.body+escClose+m.post;return expand$1(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand$1(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand$1(m.post,false):[''];return post.map((function(p){return m.pre+n[0]+p}))}}}var pre=m.pre;var post=m.post.length?expand$1(m.post,false):[''];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==='\\')c=''}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join('0');if(i<0)c='-'+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,(function(el){return expand$1(el,false)}))}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}var minimatch_1=minimatch$1;minimatch$1.Minimatch=Minimatch$1;var path$1=function(){try{return require$$0}catch(e){}}()||{sep:'/'};minimatch$1.sep=path$1.sep;var GLOBSTAR=minimatch$1.GLOBSTAR=Minimatch$1.GLOBSTAR={};var expand=braceExpansion;var plTypes={'!':{open:'(?:(?!(?:',close:'))[^/]*?)'},'?':{open:'(?:',close:')?'},'+':{open:'(?:',close:')+'},'*':{open:'(?:',close:')*'},'@':{open:'(?:',close:')'}};var qmark='[^/]';var star=qmark+'*?';var twoStarDot='(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?';var twoStarNoDot='(?:(?!(?:\\/|^)\\.).)*?';var reSpecials=charSet('().*{}+?[]^$\\!');function charSet(s){return s.split('').reduce((function(set,c){set[c]=true;return set}),{})}var slashSplit=/\/+/;minimatch$1.filter=filter$1;function filter$1(pattern,options){options=options||{};return function(p,i,list){return minimatch$1(p,pattern,options)}}function ext(a,b){b=b||{};var t={};Object.keys(a).forEach((function(k){t[k]=a[k]}));Object.keys(b).forEach((function(k){t[k]=b[k]}));return t}minimatch$1.defaults=function(def){if(!def||typeof def!=='object'||!Object.keys(def).length){return minimatch$1}var orig=minimatch$1;var m=function minimatch(p,pattern,options){return orig(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};m.Minimatch.defaults=function defaults(options){return orig.defaults(ext(def,options)).Minimatch};m.filter=function filter(pattern,options){return orig.filter(pattern,ext(def,options))};m.defaults=function defaults(options){return orig.defaults(ext(def,options))};m.makeRe=function makeRe(pattern,options){return orig.makeRe(pattern,ext(def,options))};m.braceExpand=function braceExpand(pattern,options){return orig.braceExpand(pattern,ext(def,options))};m.match=function(list,pattern,options){return orig.match(list,pattern,ext(def,options))};return m};Minimatch$1.defaults=function(def){return minimatch$1.defaults(def).Minimatch};function minimatch$1(p,pattern,options){assertValidPattern(pattern);if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==='#'){return false}return new Minimatch$1(pattern,options).match(p)}function Minimatch$1(pattern,options){if(!(this instanceof Minimatch$1)){return new Minimatch$1(pattern,options)}assertValidPattern(pattern);if(!options)options={};pattern=pattern.trim();if(!options.allowWindowsEscape&&path$1.sep!=='/'){pattern=pattern.split(path$1.sep).join('/')}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.partial=!!options.partial;this.make()}Minimatch$1.prototype.debug=function(){};Minimatch$1.prototype.make=make;function make(){var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==='#'){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=function debug(){console.error.apply(console,arguments)};this.debug(this.pattern,set);set=this.globParts=set.map((function(s){return s.split(slashSplit)}));this.debug(this.pattern,set);set=set.map((function(s,si,set){return s.map(this.parse,this)}),this);this.debug(this.pattern,set);set=set.filter((function(s){return s.indexOf(false)===-1}));this.debug(this.pattern,set);this.set=set}Minimatch$1.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==='!';i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch$1.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch$1.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch$1){options=this.options}else{options={}}}pattern=typeof pattern==='undefined'?this.pattern:pattern;assertValidPattern(pattern);if(options.nobrace||!/\{(?:(?!\{).)*\}/.test(pattern)){return[pattern]}return expand(pattern)}var MAX_PATTERN_LENGTH=1024*64;var assertValidPattern=function(pattern){if(typeof pattern!=='string'){throw new TypeError('invalid pattern')}if(pattern.length>MAX_PATTERN_LENGTH){throw new TypeError('pattern is too long')}};Minimatch$1.prototype.parse=parse$7;var SUBPARSE={};function parse$7(pattern,isSub){assertValidPattern(pattern);var options=this.options;if(pattern==='**'){if(!options.noglobstar)return GLOBSTAR;else pattern='*'}if(pattern==='')return'';var re='';var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==='.'?'':options.dot?'(?!(?:^|\\/)\\.{1,2}(?:$|\\/))':'(?!\\.)';var self=this;function clearStateChar(){if(stateChar){switch(stateChar){case'*':re+=star;hasMagic=true;break;case'?':re+=qmark;hasMagic=true;break;default:re+='\\'+stateChar;break}self.debug('clearStateChar %j %j',stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug('%s\t%s %s %j',pattern,i,re,c);if(escaping&&reSpecials[c]){re+='\\'+c;escaping=false;continue}switch(c){case'/':{return false}case'\\':clearStateChar();escaping=true;continue;case'?':case'*':case'+':case'@':case'!':this.debug('%s\t%s %s %j <-- stateChar',pattern,i,re,c);if(inClass){this.debug('  in class');if(c==='!'&&i===classStart+1)c='^';re+=c;continue}self.debug('call clearStateChar %j',stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case'(':if(inClass){re+='(';continue}if(!stateChar){re+='\\(';continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==='!'?'(?:(?!(?:':'(?:';this.debug('plType %j %j',stateChar,re);stateChar=false;continue;case')':if(inClass||!patternListStack.length){re+='\\)';continue}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==='!'){negativeLists.push(pl)}pl.reEnd=re.length;continue;case'|':if(inClass||!patternListStack.length||escaping){re+='\\|';escaping=false;continue}clearStateChar();re+='|';continue;case'[':clearStateChar();if(inClass){re+='\\'+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case']':if(i===classStart+1||!inClass){re+='\\'+c;escaping=false;continue}var cs=pattern.substring(classStart+1,i);try{RegExp('['+cs+']')}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+'\\['+sp[0]+'\\]';hasMagic=hasMagic||sp[1];inClass=false;continue}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==='^'&&inClass)){re+='\\'}re+=c}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+'\\['+sp[0];hasMagic=hasMagic||sp[1]}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug('setting tail',re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(_,$1,$2){if(!$2){$2='\\'}return $1+$1+$2+'|'}));this.debug('tail=%j\n   %s',tail,tail,pl,re);var t=pl.type==='*'?star:pl.type==='?'?qmark:'\\'+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+'\\('+tail}clearStateChar();if(escaping){re+='\\\\'}var addPatternStart=false;switch(re.charAt(0)){case'[':case'.':case'(':addPatternStart=true}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split('(').length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,'')}nlAfter=cleanAfter;var dollar='';if(nlAfter===''&&isSub!==SUBPARSE){dollar='$'}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe}if(re!==''&&hasMagic){re='(?=.)'+re}if(addPatternStart){re=patternStart+re}if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?'i':'';try{var regExp=new RegExp('^'+re+'$',flags)}catch(er){return new RegExp('$.')}regExp._glob=pattern;regExp._src=re;return regExp}minimatch$1.makeRe=function(pattern,options){return new Minimatch$1(pattern,options||{}).makeRe()};Minimatch$1.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?'i':'';var re=set.map((function(pattern){return pattern.map((function(p){return p===GLOBSTAR?twoStar:typeof p==='string'?regExpEscape(p):p._src})).join('\\/')})).join('|');re='^(?:'+re+')$';if(this.negate)re='^(?!'+re+').*$';try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=false}return this.regexp}minimatch$1.match=function(list,pattern,options){options=options||{};var mm=new Minimatch$1(pattern,options);list=list.filter((function(f){return mm.match(f)}));if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch$1.prototype.match=function match(f,partial){if(typeof partial==='undefined')partial=this.partial;this.debug('match',f,this.pattern);if(this.comment)return false;if(this.empty)return f==='';if(f==='/'&&partial)return true;var options=this.options;if(path$1.sep!=='/'){f=f.split(path$1.sep).join('/')}f=f.split(slashSplit);this.debug(this.pattern,'split',f);var set=this.set;this.debug(this.pattern,'set',set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate};Minimatch$1.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug('matchOne',{'this':this,file,pattern});this.debug('matchOne',file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug('matchOne loop');var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug('GLOBSTAR',[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug('** at the end');for(;fi<fl;fi++){if(file[fi]==='.'||file[fi]==='..'||!options.dot&&file[fi].charAt(0)==='.')return false}return true}while(fr<fl){var swallowee=file[fr];this.debug('\nglobstar while',file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug('globstar found match!',fr,fl,swallowee);return true}else{if(swallowee==='.'||swallowee==='..'||!options.dot&&swallowee.charAt(0)==='.'){this.debug('dot detected!',file,fr,pattern,pr);break}this.debug('globstar swallow a segment, and continue');fr++}}if(partial){this.debug('\n>>> no match, partial?',file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==='string'){hit=f===p;this.debug('string match',p,f,hit)}else{hit=f.match(p);this.debug('pattern match',p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){return fi===fl-1&&file[fi]===''}throw new Error('wtf?')};function globUnescape(s){return s.replace(/\\(.)/g,'$1')}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&')}var inherits_browserExports={};var inherits_browser={get exports(){return inherits_browserExports},set exports(v){inherits_browserExports=v}};if(typeof Object.create==='function'){inherits_browser.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{inherits_browser.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}var pathIsAbsoluteExports={};var pathIsAbsolute={get exports(){return pathIsAbsoluteExports},set exports(v){pathIsAbsoluteExports=v}};function posix(path){return path.charAt(0)==='/'}function win32(path){var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var result=splitDeviceRe.exec(path);var device=result[1]||'';var isUnc=Boolean(device&&device.charAt(1)!==':');return Boolean(result[2]||isUnc)}pathIsAbsolute.exports=process.platform==='win32'?win32:posix;pathIsAbsoluteExports.posix=posix;pathIsAbsoluteExports.win32=win32;var common={};common.setopts=setopts;common.ownProp=ownProp;common.makeAbs=makeAbs;common.finish=finish;common.mark=mark$1;common.isIgnored=isIgnored;common.childrenIgnored=childrenIgnored;function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field)}var fs=require$$0;var path=require$$0;var minimatch=minimatch_1;var isAbsolute=pathIsAbsoluteExports;var Minimatch=minimatch.Minimatch;function alphasort(a,b){return a.localeCompare(b,'en')}function setupIgnores(self,options){self.ignore=options.ignore||[];if(!Array.isArray(self.ignore))self.ignore=[self.ignore];if(self.ignore.length){self.ignore=self.ignore.map(ignoreMap)}}function ignoreMap(pattern){var gmatcher=null;if(pattern.slice(-3)==='/**'){var gpattern=pattern.replace(/(\/\*\*)+$/,'');gmatcher=new Minimatch(gpattern,{dot:true})}return{matcher:new Minimatch(pattern,{dot:true}),gmatcher}}function setopts(self,pattern,options){if(!options)options={};if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar")}pattern="**/"+pattern}self.silent=!!options.silent;self.pattern=pattern;self.strict=options.strict!==false;self.realpath=!!options.realpath;self.realpathCache=options.realpathCache||Object.create(null);self.follow=!!options.follow;self.dot=!!options.dot;self.mark=!!options.mark;self.nodir=!!options.nodir;if(self.nodir)self.mark=true;self.sync=!!options.sync;self.nounique=!!options.nounique;self.nonull=!!options.nonull;self.nosort=!!options.nosort;self.nocase=!!options.nocase;self.stat=!!options.stat;self.noprocess=!!options.noprocess;self.absolute=!!options.absolute;self.fs=options.fs||fs;self.maxLength=options.maxLength||Infinity;self.cache=options.cache||Object.create(null);self.statCache=options.statCache||Object.create(null);self.symlinks=options.symlinks||Object.create(null);setupIgnores(self,options);self.changedCwd=false;var cwd=process.cwd();if(!ownProp(options,"cwd"))self.cwd=cwd;else{self.cwd=path.resolve(options.cwd);self.changedCwd=self.cwd!==cwd}self.root=options.root||path.resolve(self.cwd,"/");self.root=path.resolve(self.root);if(process.platform==="win32")self.root=self.root.replace(/\\/g,"/");self.cwdAbs=isAbsolute(self.cwd)?self.cwd:makeAbs(self,self.cwd);if(process.platform==="win32")self.cwdAbs=self.cwdAbs.replace(/\\/g,"/");self.nomount=!!options.nomount;options.nonegate=true;options.nocomment=true;options.allowWindowsEscape=false;self.minimatch=new Minimatch(pattern,options);self.options=self.minimatch.options}function finish(self){var nou=self.nounique;var all=nou?[]:Object.create(null);for(var i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(!matches||Object.keys(matches).length===0){if(self.nonull){var literal=self.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach((function(m){all[m]=true}))}}if(!nou)all=Object.keys(all);if(!self.nosort)all=all.sort(alphasort);if(self.mark){for(var i=0;i<all.length;i++){all[i]=self._mark(all[i])}if(self.nodir){all=all.filter((function(e){var notDir=!/\/$/.test(e);var c=self.cache[e]||self.cache[makeAbs(self,e)];if(notDir&&c)notDir=c!=='DIR'&&!Array.isArray(c);return notDir}))}}if(self.ignore.length)all=all.filter((function(m){return!isIgnored(self,m)}));self.found=all}function mark$1(self,p){var abs=makeAbs(self,p);var c=self.cache[abs];var m=p;if(c){var isDir=c==='DIR'||Array.isArray(c);var slash=p.slice(-1)==='/';if(isDir&&!slash)m+='/';else if(!isDir&&slash)m=m.slice(0,-1);if(m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs];self.cache[mabs]=self.cache[abs]}}return m}function makeAbs(self,f){var abs=f;if(f.charAt(0)==='/'){abs=path.join(self.root,f)}else if(isAbsolute(f)||f===''){abs=f}else if(self.changedCwd){abs=path.resolve(self.cwd,f)}else{abs=path.resolve(f)}if(process.platform==='win32')abs=abs.replace(/\\/g,'/');return abs}function isIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some((function(item){return item.matcher.match(path)||!!(item.gmatcher&&item.gmatcher.match(path))}))}function childrenIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some((function(item){return!!(item.gmatcher&&item.gmatcher.match(path))}))}var sync;var hasRequiredSync;function requireSync(){if(hasRequiredSync)return sync;hasRequiredSync=1;sync=globSync;globSync.GlobSync=GlobSync;var rp=fs_realpath;var minimatch=minimatch_1;minimatch.Minimatch;requireGlob().Glob;var path=require$$0;var assert=require$$0;var isAbsolute=pathIsAbsoluteExports;var common$1=common;var setopts=common$1.setopts;var ownProp=common$1.ownProp;var childrenIgnored=common$1.childrenIgnored;var isIgnored=common$1.isIgnored;function globSync(pattern,options){if(typeof options==='function'||arguments.length===3)throw new TypeError('callback provided to sync glob\n'+'See: https://github.com/isaacs/node-glob/issues/167');return new GlobSync(pattern,options).found}function GlobSync(pattern,options){if(!pattern)throw new Error('must provide pattern');if(typeof options==='function'||arguments.length===3)throw new TypeError('callback provided to sync glob\n'+'See: https://github.com/isaacs/node-glob/issues/167');if(!(this instanceof GlobSync))return new GlobSync(pattern,options);setopts(this,pattern,options);if(this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false)}this._finish()}GlobSync.prototype._finish=function(){assert.ok(this instanceof GlobSync);if(this.realpath){var self=this;this.matches.forEach((function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset){try{p=self._makeAbs(p);var real=rp.realpathSync(p,self.realpathCache);set[real]=true}catch(er){if(er.syscall==='stat')set[self._makeAbs(p)]=true;else throw er}}}))}common$1.finish(this)};GlobSync.prototype._process=function(pattern,index,inGlobStar){assert.ok(this instanceof GlobSync);var n=0;while(typeof pattern[n]==='string'){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join('/'),index);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join('/');break}var remain=pattern.slice(n);var read;if(prefix===null)read='.';else if(isAbsolute(prefix)||isAbsolute(pattern.map((function(p){return typeof p==='string'?p:'[*]'})).join('/'))){if(!prefix||!isAbsolute(prefix))prefix='/'+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return;var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar)};GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)==='.';var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=='.'||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return;if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix.slice(-1)!=='/')e=prefix+'/'+e;else e=prefix+e}if(e.charAt(0)==='/'&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix)newPattern=[prefix,e];else newPattern=[e];this._process(newPattern.concat(remain),index,inGlobStar)}};GlobSync.prototype._emitMatch=function(index,e){if(isIgnored(this,e))return;var abs=this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute){e=abs}if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==='DIR'||Array.isArray(c))return}this.matches[index][e]=true;if(this.stat)this._stat(e)};GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,false);var entries;var lstat;try{lstat=this.fs.lstatSync(abs)}catch(er){if(er.code==='ENOENT'){return null}}var isSym=lstat&&lstat.isSymbolicLink();this.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory())this.cache[abs]='FILE';else entries=this._readdir(abs,false);return entries};GlobSync.prototype._readdir=function(abs,inGlobStar){if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==='FILE')return null;if(Array.isArray(c))return c}try{return this._readdirEntries(abs,this.fs.readdirSync(abs))}catch(er){this._readdirError(abs,er);return null}};GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==='/')e=abs+e;else e=abs+'/'+e;this.cache[e]=true}}this.cache[abs]=entries;return entries};GlobSync.prototype._readdirError=function(f,er){switch(er.code){case'ENOTSUP':case'ENOTDIR':var abs=this._makeAbs(f);this.cache[abs]='FILE';if(abs===this.cwdAbs){var error=new Error(er.code+' invalid cwd '+this.cwd);error.path=this.cwd;error.code=er.code;throw error}break;case'ENOENT':case'ELOOP':case'ENAMETOOLONG':case'UNKNOWN':this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)throw er;if(!this.silent)console.error('glob error',er);break}};GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false);var len=entries.length;var isSym=this.symlinks[abs];if(isSym&&inGlobStar)return;for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==='.'&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true);var below=gspref.concat(entries[i],remain);this._process(below,index,true)}};GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return;if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==='/'){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+='/'}}if(process.platform==='win32')prefix=prefix.replace(/\\/g,'/');this._emitMatch(index,prefix)};GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f);var needDir=f.slice(-1)==='/';if(f.length>this.maxLength)return false;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c='DIR';if(!needDir||c==='DIR')return c;if(needDir&&c==='FILE')return false}var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=this.fs.lstatSync(abs)}catch(er){if(er&&(er.code==='ENOENT'||er.code==='ENOTDIR')){this.statCache[abs]=false;return false}}if(lstat&&lstat.isSymbolicLink()){try{stat=this.fs.statSync(abs)}catch(er){stat=lstat}}else{stat=lstat}}this.statCache[abs]=stat;var c=true;if(stat)c=stat.isDirectory()?'DIR':'FILE';this.cache[abs]=this.cache[abs]||c;if(needDir&&c==='FILE')return false;return c};GlobSync.prototype._mark=function(p){return common$1.mark(this,p)};GlobSync.prototype._makeAbs=function(f){return common$1.makeAbs(this,f)};return sync}var wrappy_1=wrappy$2;function wrappy$2(fn,cb){if(fn&&cb)return wrappy$2(fn)(cb);if(typeof fn!=='function')throw new TypeError('need wrapper function');Object.keys(fn).forEach((function(k){wrapper[k]=fn[k]}));return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==='function'&&ret!==cb){Object.keys(cb).forEach((function(k){ret[k]=cb[k]}))}return ret}}var onceExports={};var once$2={get exports(){return onceExports},set exports(v){onceExports=v}};var wrappy$1=wrappy_1;once$2.exports=wrappy$1(once$1);onceExports.strict=wrappy$1(onceStrict);once$1.proto=once$1((function(){Object.defineProperty(Function.prototype,'once',{value:function(){return once$1(this)},configurable:true});Object.defineProperty(Function.prototype,'onceStrict',{value:function(){return onceStrict(this)},configurable:true})}));function once$1(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments)};f.called=false;return f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=fn.apply(this,arguments)};var name=fn.name||'Function wrapped with `once`';f.onceError=name+" shouldn't be called more than once";f.called=false;return f}var wrappy=wrappy_1;var reqs=Object.create(null);var once=onceExports;var inflight_1=wrappy(inflight);function inflight(key,cb){if(reqs[key]){reqs[key].push(cb);return null}else{reqs[key]=[cb];return makeres(key)}}function makeres(key){return once((function RES(){var cbs=reqs[key];var len=cbs.length;var args=slice(arguments);try{for(var i=0;i<len;i++){cbs[i].apply(null,args)}}finally{if(cbs.length>len){cbs.splice(0,len);process.nextTick((function(){RES.apply(null,args)}))}else{delete reqs[key]}}}))}function slice(args){var length=args.length;var array=[];for(var i=0;i<length;i++)array[i]=args[i];return array}var glob_1;var hasRequiredGlob;function requireGlob(){if(hasRequiredGlob)return glob_1;hasRequiredGlob=1;glob_1=glob;var rp=fs_realpath;var minimatch=minimatch_1;minimatch.Minimatch;var inherits=inherits_browserExports;var EE=require$$0.EventEmitter;var path=require$$0;var assert=require$$0;var isAbsolute=pathIsAbsoluteExports;var globSync=requireSync();var common$1=common;var setopts=common$1.setopts;var ownProp=common$1.ownProp;var inflight=inflight_1;var childrenIgnored=common$1.childrenIgnored;var isIgnored=common$1.isIgnored;var once=onceExports;function glob(pattern,options,cb){if(typeof options==='function')cb=options,options={};if(!options)options={};if(options.sync){if(cb)throw new TypeError('callback provided to sync glob');return globSync(pattern,options)}return new Glob(pattern,options,cb)}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob;function extend(origin,add){if(add===null||typeof add!=='object'){return origin}var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin}glob.hasMagic=function(pattern,options_){var options=extend({},options_);options.noprocess=true;var g=new Glob(pattern,options);var set=g.minimatch.set;if(!pattern)return false;if(set.length>1)return true;for(var j=0;j<set[0].length;j++){if(typeof set[0][j]!=='string')return true}return false};glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(typeof options==='function'){cb=options;options=null}if(options&&options.sync){if(cb)throw new TypeError('callback provided to sync glob');return new GlobSync(pattern,options)}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof cb==='function'){cb=once(cb);this.on('error',cb);this.on('end',(function(matches){cb(null,matches)}))}var self=this;this._processing=0;this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();var sync=true;for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false,done)}sync=false;function done(){--self._processing;if(self._processing<=0){if(sync){process.nextTick((function(){self._finish()}))}else{self._finish()}}}}Glob.prototype._finish=function(){assert(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();common$1.finish(this);this.emit('end',this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var n=this.matches.length;if(n===0)return this._finish();var self=this;for(var i=0;i<this.matches.length;i++)this._realpathSet(i,next);function next(){if(--n===0)self._finish()}};Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset);var self=this;var n=found.length;if(n===0)return cb();var set=this.matches[index]=Object.create(null);found.forEach((function(p,i){p=self._makeAbs(p);rp.realpath(p,self.realpathCache,(function(er,real){if(!er)set[real]=true;else if(er.syscall==='stat')set[p]=true;else self.emit('error',er);if(--n===0){self.matches[index]=set;cb()}}))}))};Glob.prototype._mark=function(p){return common$1.mark(this,p)};Glob.prototype._makeAbs=function(f){return common$1.makeAbs(this,f)};Glob.prototype.abort=function(){this.aborted=true;this.emit('abort')};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit('pause')}};Glob.prototype.resume=function(){if(this.paused){this.emit('resume');this.paused=false;if(this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var pq=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<pq.length;i++){var p=pq[i];this._processing--;this._process(p[0],p[1],p[2],p[3])}}}};Glob.prototype._process=function(pattern,index,inGlobStar,cb){assert(this instanceof Glob);assert(typeof cb==='function');if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([pattern,index,inGlobStar,cb]);return}var n=0;while(typeof pattern[n]==='string'){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join('/'),index,cb);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join('/');break}var remain=pattern.slice(n);var read;if(prefix===null)read='.';else if(isAbsolute(prefix)||isAbsolute(pattern.map((function(p){return typeof p==='string'?p:'[*]'})).join('/'))){if(!prefix||!isAbsolute(prefix))prefix='/'+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb)};Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,(function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb)}))};Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)==='.';var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=='.'||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return cb();if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=='/')e=prefix+'/'+e;else e=prefix+e}if(e.charAt(0)==='/'&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return cb()}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=='/')e=prefix+'/'+e;else e=prefix+e}this._process([e].concat(remain),index,inGlobStar,cb)}cb()};Glob.prototype._emitMatch=function(index,e){if(this.aborted)return;if(isIgnored(this,e))return;if(this.paused){this._emitQueue.push([index,e]);return}var abs=isAbsolute(e)?e:this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute)e=abs;if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==='DIR'||Array.isArray(c))return}this.matches[index][e]=true;var st=this.statCache[abs];if(st)this.emit('stat',e,st);this.emit('match',e)};Glob.prototype._readdirInGlobStar=function(abs,cb){if(this.aborted)return;if(this.follow)return this._readdir(abs,false,cb);var lstatkey='lstat\0'+abs;var self=this;var lstatcb=inflight(lstatkey,lstatcb_);if(lstatcb)self.fs.lstat(abs,lstatcb);function lstatcb_(er,lstat){if(er&&er.code==='ENOENT')return cb();var isSym=lstat&&lstat.isSymbolicLink();self.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory()){self.cache[abs]='FILE';cb()}else self._readdir(abs,false,cb)}};Glob.prototype._readdir=function(abs,inGlobStar,cb){if(this.aborted)return;cb=inflight('readdir\0'+abs+'\0'+inGlobStar,cb);if(!cb)return;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==='FILE')return cb();if(Array.isArray(c))return cb(null,c)}var self=this;self.fs.readdir(abs,readdirCb(this,abs,cb))};function readdirCb(self,abs,cb){return function(er,entries){if(er)self._readdirError(abs,er,cb);else self._readdirEntries(abs,entries,cb)}}Glob.prototype._readdirEntries=function(abs,entries,cb){if(this.aborted)return;if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==='/')e=abs+e;else e=abs+'/'+e;this.cache[e]=true}}this.cache[abs]=entries;return cb(null,entries)};Glob.prototype._readdirError=function(f,er,cb){if(this.aborted)return;switch(er.code){case'ENOTSUP':case'ENOTDIR':var abs=this._makeAbs(f);this.cache[abs]='FILE';if(abs===this.cwdAbs){var error=new Error(er.code+' invalid cwd '+this.cwd);error.path=this.cwd;error.code=er.code;this.emit('error',error);this.abort()}break;case'ENOENT':case'ELOOP':case'ENAMETOOLONG':case'UNKNOWN':this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict){this.emit('error',er);this.abort()}if(!this.silent)console.error('glob error',er);break}return cb()};Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,(function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb)}))};Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false,cb);var isSym=this.symlinks[abs];var len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==='.'&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,true,cb)}cb()};Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,(function(er,exists){self._processSimple2(prefix,index,er,exists,cb)}))};Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==='/'){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+='/'}}if(process.platform==='win32')prefix=prefix.replace(/\\/g,'/');this._emitMatch(index,prefix);cb()};Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f);var needDir=f.slice(-1)==='/';if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c='DIR';if(!needDir||c==='DIR')return cb(null,c);if(needDir&&c==='FILE')return cb()}var stat=this.statCache[abs];if(stat!==undefined){if(stat===false)return cb(null,stat);else{var type=stat.isDirectory()?'DIR':'FILE';if(needDir&&type==='FILE')return cb();else return cb(null,type,stat)}}var self=this;var statcb=inflight('stat\0'+abs,lstatcb_);if(statcb)self.fs.lstat(abs,statcb);function lstatcb_(er,lstat){if(lstat&&lstat.isSymbolicLink()){return self.fs.stat(abs,(function(er,stat){if(er)self._stat2(f,abs,null,lstat,cb);else self._stat2(f,abs,er,stat,cb)}))}else{self._stat2(f,abs,er,lstat,cb)}}};Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er&&(er.code==='ENOENT'||er.code==='ENOTDIR')){this.statCache[abs]=false;return cb()}var needDir=f.slice(-1)==='/';this.statCache[abs]=stat;if(abs.slice(-1)==='/'&&stat&&!stat.isDirectory())return cb(null,false,stat);var c=true;if(stat)c=stat.isDirectory()?'DIR':'FILE';this.cache[abs]=this.cache[abs]||c;if(needDir&&c==='FILE')return cb();return cb(null,c,stat)};return glob_1}var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$1;hasRequiredCommon=1;var os=require$$0;var fs=require$$0;var glob=requireGlob();var shell=requireShell();var shellMethods=Object.create(shell);common$1.extend=Object.assign;var isElectron=Boolean(process.versions.electron);var DEFAULT_CONFIG={fatal:false,globOptions:{},maxdepth:255,noglob:false,silent:false,verbose:false,execPath:null,bufLength:64*1024};var config={reset:function(){Object.assign(this,DEFAULT_CONFIG);if(!isElectron){this.execPath=process.execPath}},resetForTesting:function(){this.reset();this.silent=true}};config.reset();common$1.config=config;var state={error:null,errorCode:0,currentCmd:'shell.js'};common$1.state=state;delete process.env.OLDPWD;function isObject(a){return typeof a==='object'&&a!==null}common$1.isObject=isObject;function log(){if(!config.silent){console.error.apply(console,arguments)}}common$1.log=log;function convertErrorOutput(msg){if(typeof msg!=='string'){throw new TypeError('input must be a string')}return msg.replace(/\\/g,'/')}common$1.convertErrorOutput=convertErrorOutput;function error(msg,_code,options){if(typeof msg!=='string')throw new Error('msg must be a string');var DEFAULT_OPTIONS={continue:false,code:1,prefix:state.currentCmd+': ',silent:false};if(typeof _code==='number'&&isObject(options)){options.code=_code}else if(isObject(_code)){options=_code}else if(typeof _code==='number'){options={code:_code}}else if(typeof _code!=='number'){options={}}options=Object.assign({},DEFAULT_OPTIONS,options);if(!state.errorCode)state.errorCode=options.code;var logEntry=convertErrorOutput(options.prefix+msg);state.error=state.error?state.error+'\n':'';state.error+=logEntry;if(config.fatal)throw new Error(logEntry);if(msg.length>0&&!options.silent)log(logEntry);if(!options.continue){throw{msg:'earlyExit',retValue:new ShellString('',state.error,state.errorCode)}}}common$1.error=error;function ShellString(stdout,stderr,code){var that;if(stdout instanceof Array){that=stdout;that.stdout=stdout.join('\n');if(stdout.length>0)that.stdout+='\n'}else{that=new String(stdout);that.stdout=stdout}that.stderr=stderr;that.code=code;pipeMethods.forEach((function(cmd){that[cmd]=shellMethods[cmd].bind(that)}));return that}common$1.ShellString=ShellString;function parseOptions(opt,map,errorOptions){if(typeof opt!=='string'&&!isObject(opt)){throw new Error('options must be strings or key-value pairs')}else if(!isObject(map)){throw new Error('parseOptions() internal error: map must be an object')}else if(errorOptions&&!isObject(errorOptions)){throw new Error('parseOptions() internal error: errorOptions must be object')}if(opt==='--'){return{}}var options={};Object.keys(map).forEach((function(letter){var optName=map[letter];if(optName[0]!=='!'){options[optName]=false}}));if(opt==='')return options;if(typeof opt==='string'){if(opt[0]!=='-'){throw new Error("Options string must start with a '-'")}var chars=opt.slice(1).split('');chars.forEach((function(c){if(c in map){var optionName=map[c];if(optionName[0]==='!'){options[optionName.slice(1)]=false}else{options[optionName]=true}}else{error('option not recognized: '+c,errorOptions||{})}}))}else{Object.keys(opt).forEach((function(key){var c=key[1];if(c in map){var optionName=map[c];options[optionName]=opt[key]}else{error('option not recognized: '+c,errorOptions||{})}}))}return options}common$1.parseOptions=parseOptions;function expand(list){if(!Array.isArray(list)){throw new TypeError('must be an array')}var expanded=[];list.forEach((function(listEl){if(typeof listEl!=='string'){expanded.push(listEl)}else{var ret;try{ret=glob.sync(listEl,config.globOptions);ret=ret.length>0?ret:[listEl]}catch(e){ret=[listEl]}expanded=expanded.concat(ret)}}));return expanded}common$1.expand=expand;var buffer=typeof Buffer.alloc==='function'?function(len){return Buffer.alloc(len||config.bufLength)}:function(len){return new Buffer(len||config.bufLength)};common$1.buffer=buffer;function unlinkSync(file){try{fs.unlinkSync(file)}catch(e){if(e.code==='EPERM'){fs.chmodSync(file,'0666');fs.unlinkSync(file)}else{throw e}}}common$1.unlinkSync=unlinkSync;function statFollowLinks(){return fs.statSync.apply(fs,arguments)}common$1.statFollowLinks=statFollowLinks;function statNoFollowLinks(){return fs.lstatSync.apply(fs,arguments)}common$1.statNoFollowLinks=statNoFollowLinks;function randomFileName(){function randomHash(count){if(count===1){return parseInt(16*Math.random(),10).toString(16)}var hash='';for(var i=0;i<count;i++){hash+=randomHash(1)}return hash}return'shelljs_'+randomHash(20)}common$1.randomFileName=randomFileName;function wrap(cmd,fn,options){options=options||{};return function(){var retValue=null;state.currentCmd=cmd;state.error=null;state.errorCode=0;try{var args=[].slice.call(arguments,0);if(config.verbose){console.error.apply(console,[cmd].concat(args))}state.pipedValue=this&&typeof this.stdout==='string'?this.stdout:'';if(options.unix===false){retValue=fn.apply(this,args)}else{if(isObject(args[0])&&args[0].constructor.name==='Object'){}else if(args.length===0||typeof args[0]!=='string'||args[0].length<=1||args[0][0]!=='-'){args.unshift('')}args=args.reduce((function(accum,cur){if(Array.isArray(cur)){return accum.concat(cur)}accum.push(cur);return accum}),[]);args=args.map((function(arg){if(isObject(arg)&&arg.constructor.name==='String'){return arg.toString()}return arg}));var homeDir=os.homedir();args=args.map((function(arg){if(typeof arg==='string'&&arg.slice(0,2)==='~/'||arg==='~'){return arg.replace(/^~/,homeDir)}return arg}));if(!config.noglob&&options.allowGlobbing===true){args=args.slice(0,options.globStart).concat(expand(args.slice(options.globStart)))}try{if(isObject(options.cmdOptions)){args[0]=parseOptions(args[0],options.cmdOptions)}retValue=fn.apply(this,args)}catch(e){if(e.msg==='earlyExit'){retValue=e.retValue}else{throw e}}}}catch(e){if(!state.error){e.name='ShellJSInternalError';throw e}if(config.fatal)throw e}if(options.wrapOutput&&(typeof retValue==='string'||Array.isArray(retValue))){retValue=new ShellString(retValue,state.error,state.errorCode)}state.currentCmd='shell.js';return retValue}}common$1.wrap=wrap;function _readFromPipe(){return state.pipedValue}common$1.readFromPipe=_readFromPipe;var DEFAULT_WRAP_OPTIONS={allowGlobbing:true,canReceivePipe:false,cmdOptions:null,globStart:1,pipeOnly:false,wrapOutput:true,unix:true};var pipeMethods=[];function _register(name,implementation,wrapOptions){wrapOptions=wrapOptions||{};Object.keys(wrapOptions).forEach((function(option){if(!DEFAULT_WRAP_OPTIONS.hasOwnProperty(option)){throw new Error("Unknown option '"+option+"'")}if(typeof wrapOptions[option]!==typeof DEFAULT_WRAP_OPTIONS[option]){throw new TypeError("Unsupported type '"+typeof wrapOptions[option]+"' for option '"+option+"'")}}));wrapOptions=Object.assign({},DEFAULT_WRAP_OPTIONS,wrapOptions);if(shell.hasOwnProperty(name)){throw new Error('Command `'+name+'` already exists')}if(wrapOptions.pipeOnly){wrapOptions.canReceivePipe=true;shellMethods[name]=wrap(name,implementation,wrapOptions)}else{shell[name]=wrap(name,implementation,wrapOptions)}if(wrapOptions.canReceivePipe){pipeMethods.push(name)}}common$1.register=_register;return common$1}var commands=['cat','cd','chmod','cp','dirs','echo','exec','find','grep','head','ln','ls','mkdir','mv','pwd','rm','sed','set','sort','tail','tempdir','test','to','toEnd','touch','uniq','which'];var error_1;var hasRequiredError;function requireError(){if(hasRequiredError)return error_1;hasRequiredError=1;var common=requireCommon();function error(){return common.state.error}error_1=error;return error_1}var hasRequiredShell;function requireShell(){if(hasRequiredShell)return shell$1;hasRequiredShell=1;var common=requireCommon();commands.forEach((function(command){commonjsRequire('./src/'+command)}));shell$1.exit=process.exit;shell$1.error=requireError();shell$1.ShellString=common.ShellString;shell$1.env=process.env;shell$1.config=common.config;return shell$1}var shellExports=requireShell();const shell=getDefaultExportFromCjs(shellExports);const closestPath=(directory=path$2.resolve(),selectors="package.json",layers=1)=>{if(path$2.existsSync(path$2.join(directory,selectors))){if(layers===1)return directory;return closestPath(path$2.join(directory,".."),selectors,layers-1)}return closestPath(path$2.join(directory,".."),selectors,layers)};const CHANGED=Symbol('changed');const CLASS_LIST=Symbol('classList');const CUSTOM_ELEMENTS=Symbol('CustomElements');const CONTENT=Symbol('content');const DATASET=Symbol('dataset');const DOCTYPE=Symbol('doctype');const DOM_PARSER=Symbol('DOMParser');const END=Symbol('end');const EVENT_TARGET=Symbol('EventTarget');const GLOBALS=Symbol('globals');const IMAGE=Symbol('image');const MIME=Symbol('mime');const MUTATION_OBSERVER=Symbol('MutationObserver');const NEXT=Symbol('next');const OWNER_ELEMENT=Symbol('ownerElement');const PREV=Symbol('prev');const PRIVATE=Symbol('private');const SHEET=Symbol('sheet');const START=Symbol('start');const STYLE=Symbol('style');const UPGRADE=Symbol('upgrade');const VALUE=Symbol('value');const htmlDecodeTree=new Uint16Array("<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT\"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;".split("").map((c=>c.charCodeAt(0))));const xmlDecodeTree=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((c=>c.charCodeAt(0))));var _a;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);const fromCodePoint$1=(_a=String.fromCodePoint)!==null&&_a!==void 0?_a:function(codePoint){let output="";if(codePoint>0xffff){codePoint-=0x10000;output+=String.fromCharCode(codePoint>>>10&0x3ff|0xd800);codePoint=0xdc00|codePoint&0x3ff}output+=String.fromCharCode(codePoint);return output};function replaceCodePoint(codePoint){var _a;if(codePoint>=0xd800&&codePoint<=0xdfff||codePoint>0x10ffff){return 0xfffd}return(_a=decodeMap.get(codePoint))!==null&&_a!==void 0?_a:codePoint}var CharCodes$1;(function(CharCodes){CharCodes[CharCodes["NUM"]=35]="NUM";CharCodes[CharCodes["SEMI"]=59]="SEMI";CharCodes[CharCodes["ZERO"]=48]="ZERO";CharCodes[CharCodes["NINE"]=57]="NINE";CharCodes[CharCodes["LOWER_A"]=97]="LOWER_A";CharCodes[CharCodes["LOWER_F"]=102]="LOWER_F";CharCodes[CharCodes["LOWER_X"]=120]="LOWER_X";CharCodes[CharCodes["To_LOWER_BIT"]=32]="To_LOWER_BIT"})(CharCodes$1||(CharCodes$1={}));var BinTrieFlags;(function(BinTrieFlags){BinTrieFlags[BinTrieFlags["VALUE_LENGTH"]=49152]="VALUE_LENGTH";BinTrieFlags[BinTrieFlags["BRANCH_LENGTH"]=16256]="BRANCH_LENGTH";BinTrieFlags[BinTrieFlags["JUMP_TABLE"]=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function determineBranch(decodeTree,current,nodeIdx,char){const branchCount=(current&BinTrieFlags.BRANCH_LENGTH)>>7;const jumpOffset=current&BinTrieFlags.JUMP_TABLE;if(branchCount===0){return jumpOffset!==0&&char===jumpOffset?nodeIdx:-1}if(jumpOffset){const value=char-jumpOffset;return value<0||value>=branchCount?-1:decodeTree[nodeIdx+value]-1}let lo=nodeIdx;let hi=lo+branchCount-1;while(lo<=hi){const mid=lo+hi>>>1;const midVal=decodeTree[mid];if(midVal<char){lo=mid+1}else if(midVal>char){hi=mid-1}else{return decodeTree[mid+branchCount]}}return-1}var CharCodes;(function(CharCodes){CharCodes[CharCodes["Tab"]=9]="Tab";CharCodes[CharCodes["NewLine"]=10]="NewLine";CharCodes[CharCodes["FormFeed"]=12]="FormFeed";CharCodes[CharCodes["CarriageReturn"]=13]="CarriageReturn";CharCodes[CharCodes["Space"]=32]="Space";CharCodes[CharCodes["ExclamationMark"]=33]="ExclamationMark";CharCodes[CharCodes["Num"]=35]="Num";CharCodes[CharCodes["Amp"]=38]="Amp";CharCodes[CharCodes["SingleQuote"]=39]="SingleQuote";CharCodes[CharCodes["DoubleQuote"]=34]="DoubleQuote";CharCodes[CharCodes["Dash"]=45]="Dash";CharCodes[CharCodes["Slash"]=47]="Slash";CharCodes[CharCodes["Zero"]=48]="Zero";CharCodes[CharCodes["Nine"]=57]="Nine";CharCodes[CharCodes["Semi"]=59]="Semi";CharCodes[CharCodes["Lt"]=60]="Lt";CharCodes[CharCodes["Eq"]=61]="Eq";CharCodes[CharCodes["Gt"]=62]="Gt";CharCodes[CharCodes["Questionmark"]=63]="Questionmark";CharCodes[CharCodes["UpperA"]=65]="UpperA";CharCodes[CharCodes["LowerA"]=97]="LowerA";CharCodes[CharCodes["UpperF"]=70]="UpperF";CharCodes[CharCodes["LowerF"]=102]="LowerF";CharCodes[CharCodes["UpperZ"]=90]="UpperZ";CharCodes[CharCodes["LowerZ"]=122]="LowerZ";CharCodes[CharCodes["LowerX"]=120]="LowerX";CharCodes[CharCodes["OpeningSquareBracket"]=91]="OpeningSquareBracket"})(CharCodes||(CharCodes={}));var State;(function(State){State[State["Text"]=1]="Text";State[State["BeforeTagName"]=2]="BeforeTagName";State[State["InTagName"]=3]="InTagName";State[State["InSelfClosingTag"]=4]="InSelfClosingTag";State[State["BeforeClosingTagName"]=5]="BeforeClosingTagName";State[State["InClosingTagName"]=6]="InClosingTagName";State[State["AfterClosingTagName"]=7]="AfterClosingTagName";State[State["BeforeAttributeName"]=8]="BeforeAttributeName";State[State["InAttributeName"]=9]="InAttributeName";State[State["AfterAttributeName"]=10]="AfterAttributeName";State[State["BeforeAttributeValue"]=11]="BeforeAttributeValue";State[State["InAttributeValueDq"]=12]="InAttributeValueDq";State[State["InAttributeValueSq"]=13]="InAttributeValueSq";State[State["InAttributeValueNq"]=14]="InAttributeValueNq";State[State["BeforeDeclaration"]=15]="BeforeDeclaration";State[State["InDeclaration"]=16]="InDeclaration";State[State["InProcessingInstruction"]=17]="InProcessingInstruction";State[State["BeforeComment"]=18]="BeforeComment";State[State["CDATASequence"]=19]="CDATASequence";State[State["InSpecialComment"]=20]="InSpecialComment";State[State["InCommentLike"]=21]="InCommentLike";State[State["BeforeSpecialS"]=22]="BeforeSpecialS";State[State["SpecialStartSequence"]=23]="SpecialStartSequence";State[State["InSpecialTag"]=24]="InSpecialTag";State[State["BeforeEntity"]=25]="BeforeEntity";State[State["BeforeNumericEntity"]=26]="BeforeNumericEntity";State[State["InNamedEntity"]=27]="InNamedEntity";State[State["InNumericEntity"]=28]="InNumericEntity";State[State["InHexEntity"]=29]="InHexEntity"})(State||(State={}));function isWhitespace$1(c){return c===CharCodes.Space||c===CharCodes.NewLine||c===CharCodes.Tab||c===CharCodes.FormFeed||c===CharCodes.CarriageReturn}function isEndOfTagSection(c){return c===CharCodes.Slash||c===CharCodes.Gt||isWhitespace$1(c)}function isNumber(c){return c>=CharCodes.Zero&&c<=CharCodes.Nine}function isASCIIAlpha(c){return c>=CharCodes.LowerA&&c<=CharCodes.LowerZ||c>=CharCodes.UpperA&&c<=CharCodes.UpperZ}function isHexDigit(c){return c>=CharCodes.UpperA&&c<=CharCodes.UpperF||c>=CharCodes.LowerA&&c<=CharCodes.LowerF}var QuoteType;(function(QuoteType){QuoteType[QuoteType["NoValue"]=0]="NoValue";QuoteType[QuoteType["Unquoted"]=1]="Unquoted";QuoteType[QuoteType["Single"]=2]="Single";QuoteType[QuoteType["Double"]=3]="Double"})(QuoteType||(QuoteType={}));const Sequences={Cdata:new Uint8Array([0x43,0x44,0x41,0x54,0x41,0x5b]),CdataEnd:new Uint8Array([0x5d,0x5d,0x3e]),CommentEnd:new Uint8Array([0x2d,0x2d,0x3e]),ScriptEnd:new Uint8Array([0x3c,0x2f,0x73,0x63,0x72,0x69,0x70,0x74]),StyleEnd:new Uint8Array([0x3c,0x2f,0x73,0x74,0x79,0x6c,0x65]),TitleEnd:new Uint8Array([0x3c,0x2f,0x74,0x69,0x74,0x6c,0x65])};let Tokenizer$1=class Tokenizer{constructor({xmlMode=false,decodeEntities=true},cbs){this.cbs=cbs;this.state=State.Text;this.buffer="";this.sectionStart=0;this.index=0;this.baseState=State.Text;this.isSpecial=false;this.running=true;this.offset=0;this.sequenceIndex=0;this.trieIndex=0;this.trieCurrent=0;this.entityResult=0;this.entityExcess=0;this.xmlMode=xmlMode;this.decodeEntities=decodeEntities;this.entityTrie=xmlMode?xmlDecodeTree:htmlDecodeTree}reset(){this.state=State.Text;this.buffer="";this.sectionStart=0;this.index=0;this.baseState=State.Text;this.currentSequence=undefined;this.running=true;this.offset=0}write(chunk){this.offset+=this.buffer.length;this.buffer=chunk;this.parse()}end(){if(this.running)this.finish()}pause(){this.running=false}resume(){this.running=true;if(this.index<this.buffer.length+this.offset){this.parse()}}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(c){if(c===CharCodes.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes.Lt)){if(this.index>this.sectionStart){this.cbs.ontext(this.sectionStart,this.index)}this.state=State.BeforeTagName;this.sectionStart=this.index}else if(this.decodeEntities&&c===CharCodes.Amp){this.state=State.BeforeEntity}}stateSpecialStartSequence(c){const isEnd=this.sequenceIndex===this.currentSequence.length;const isMatch=isEnd?isEndOfTagSection(c):(c|0x20)===this.currentSequence[this.sequenceIndex];if(!isMatch){this.isSpecial=false}else if(!isEnd){this.sequenceIndex++;return}this.sequenceIndex=0;this.state=State.InTagName;this.stateInTagName(c)}stateInSpecialTag(c){if(this.sequenceIndex===this.currentSequence.length){if(c===CharCodes.Gt||isWhitespace$1(c)){const endOfText=this.index-this.currentSequence.length;if(this.sectionStart<endOfText){const actualIndex=this.index;this.index=endOfText;this.cbs.ontext(this.sectionStart,endOfText);this.index=actualIndex}this.isSpecial=false;this.sectionStart=endOfText+2;this.stateInClosingTagName(c);return}this.sequenceIndex=0}if((c|0x20)===this.currentSequence[this.sequenceIndex]){this.sequenceIndex+=1}else if(this.sequenceIndex===0){if(this.currentSequence===Sequences.TitleEnd){if(this.decodeEntities&&c===CharCodes.Amp){this.state=State.BeforeEntity}}else if(this.fastForwardTo(CharCodes.Lt)){this.sequenceIndex=1}}else{this.sequenceIndex=Number(c===CharCodes.Lt)}}stateCDATASequence(c){if(c===Sequences.Cdata[this.sequenceIndex]){if(++this.sequenceIndex===Sequences.Cdata.length){this.state=State.InCommentLike;this.currentSequence=Sequences.CdataEnd;this.sequenceIndex=0;this.sectionStart=this.index+1}}else{this.sequenceIndex=0;this.state=State.InDeclaration;this.stateInDeclaration(c)}}fastForwardTo(c){while(++this.index<this.buffer.length+this.offset){if(this.buffer.charCodeAt(this.index-this.offset)===c){return true}}this.index=this.buffer.length+this.offset-1;return false}stateInCommentLike(c){if(c===this.currentSequence[this.sequenceIndex]){if(++this.sequenceIndex===this.currentSequence.length){if(this.currentSequence===Sequences.CdataEnd){this.cbs.oncdata(this.sectionStart,this.index,2)}else{this.cbs.oncomment(this.sectionStart,this.index,2)}this.sequenceIndex=0;this.sectionStart=this.index+1;this.state=State.Text}}else if(this.sequenceIndex===0){if(this.fastForwardTo(this.currentSequence[0])){this.sequenceIndex=1}}else if(c!==this.currentSequence[this.sequenceIndex-1]){this.sequenceIndex=0}}isTagStartChar(c){return this.xmlMode?!isEndOfTagSection(c):isASCIIAlpha(c)}startSpecial(sequence,offset){this.isSpecial=true;this.currentSequence=sequence;this.sequenceIndex=offset;this.state=State.SpecialStartSequence}stateBeforeTagName(c){if(c===CharCodes.ExclamationMark){this.state=State.BeforeDeclaration;this.sectionStart=this.index+1}else if(c===CharCodes.Questionmark){this.state=State.InProcessingInstruction;this.sectionStart=this.index+1}else if(this.isTagStartChar(c)){const lower=c|0x20;this.sectionStart=this.index;if(!this.xmlMode&&lower===Sequences.TitleEnd[2]){this.startSpecial(Sequences.TitleEnd,3)}else{this.state=!this.xmlMode&&lower===Sequences.ScriptEnd[2]?State.BeforeSpecialS:State.InTagName}}else if(c===CharCodes.Slash){this.state=State.BeforeClosingTagName}else{this.state=State.Text;this.stateText(c)}}stateInTagName(c){if(isEndOfTagSection(c)){this.cbs.onopentagname(this.sectionStart,this.index);this.sectionStart=-1;this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}}stateBeforeClosingTagName(c){if(isWhitespace$1(c));else if(c===CharCodes.Gt){this.state=State.Text}else{this.state=this.isTagStartChar(c)?State.InClosingTagName:State.InSpecialComment;this.sectionStart=this.index}}stateInClosingTagName(c){if(c===CharCodes.Gt||isWhitespace$1(c)){this.cbs.onclosetag(this.sectionStart,this.index);this.sectionStart=-1;this.state=State.AfterClosingTagName;this.stateAfterClosingTagName(c)}}stateAfterClosingTagName(c){if(c===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt)){this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeAttributeName(c){if(c===CharCodes.Gt){this.cbs.onopentagend(this.index);if(this.isSpecial){this.state=State.InSpecialTag;this.sequenceIndex=0}else{this.state=State.Text}this.baseState=this.state;this.sectionStart=this.index+1}else if(c===CharCodes.Slash){this.state=State.InSelfClosingTag}else if(!isWhitespace$1(c)){this.state=State.InAttributeName;this.sectionStart=this.index}}stateInSelfClosingTag(c){if(c===CharCodes.Gt){this.cbs.onselfclosingtag(this.index);this.state=State.Text;this.baseState=State.Text;this.sectionStart=this.index+1;this.isSpecial=false}else if(!isWhitespace$1(c)){this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}}stateInAttributeName(c){if(c===CharCodes.Eq||isEndOfTagSection(c)){this.cbs.onattribname(this.sectionStart,this.index);this.sectionStart=-1;this.state=State.AfterAttributeName;this.stateAfterAttributeName(c)}}stateAfterAttributeName(c){if(c===CharCodes.Eq){this.state=State.BeforeAttributeValue}else if(c===CharCodes.Slash||c===CharCodes.Gt){this.cbs.onattribend(QuoteType.NoValue,this.index);this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}else if(!isWhitespace$1(c)){this.cbs.onattribend(QuoteType.NoValue,this.index);this.state=State.InAttributeName;this.sectionStart=this.index}}stateBeforeAttributeValue(c){if(c===CharCodes.DoubleQuote){this.state=State.InAttributeValueDq;this.sectionStart=this.index+1}else if(c===CharCodes.SingleQuote){this.state=State.InAttributeValueSq;this.sectionStart=this.index+1}else if(!isWhitespace$1(c)){this.sectionStart=this.index;this.state=State.InAttributeValueNq;this.stateInAttributeValueNoQuotes(c)}}handleInAttributeValue(c,quote){if(c===quote||!this.decodeEntities&&this.fastForwardTo(quote)){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=-1;this.cbs.onattribend(quote===CharCodes.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index);this.state=State.BeforeAttributeName}else if(this.decodeEntities&&c===CharCodes.Amp){this.baseState=this.state;this.state=State.BeforeEntity}}stateInAttributeValueDoubleQuotes(c){this.handleInAttributeValue(c,CharCodes.DoubleQuote)}stateInAttributeValueSingleQuotes(c){this.handleInAttributeValue(c,CharCodes.SingleQuote)}stateInAttributeValueNoQuotes(c){if(isWhitespace$1(c)||c===CharCodes.Gt){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=-1;this.cbs.onattribend(QuoteType.Unquoted,this.index);this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}else if(this.decodeEntities&&c===CharCodes.Amp){this.baseState=this.state;this.state=State.BeforeEntity}}stateBeforeDeclaration(c){if(c===CharCodes.OpeningSquareBracket){this.state=State.CDATASequence;this.sequenceIndex=0}else{this.state=c===CharCodes.Dash?State.BeforeComment:State.InDeclaration}}stateInDeclaration(c){if(c===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt)){this.cbs.ondeclaration(this.sectionStart,this.index);this.state=State.Text;this.sectionStart=this.index+1}}stateInProcessingInstruction(c){if(c===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt)){this.cbs.onprocessinginstruction(this.sectionStart,this.index);this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeComment(c){if(c===CharCodes.Dash){this.state=State.InCommentLike;this.currentSequence=Sequences.CommentEnd;this.sequenceIndex=2;this.sectionStart=this.index+1}else{this.state=State.InDeclaration}}stateInSpecialComment(c){if(c===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt)){this.cbs.oncomment(this.sectionStart,this.index,0);this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeSpecialS(c){const lower=c|0x20;if(lower===Sequences.ScriptEnd[3]){this.startSpecial(Sequences.ScriptEnd,4)}else if(lower===Sequences.StyleEnd[3]){this.startSpecial(Sequences.StyleEnd,4)}else{this.state=State.InTagName;this.stateInTagName(c)}}stateBeforeEntity(c){this.entityExcess=1;this.entityResult=0;if(c===CharCodes.Num){this.state=State.BeforeNumericEntity}else if(c===CharCodes.Amp);else{this.trieIndex=0;this.trieCurrent=this.entityTrie[0];this.state=State.InNamedEntity;this.stateInNamedEntity(c)}}stateInNamedEntity(c){this.entityExcess+=1;this.trieIndex=determineBranch(this.entityTrie,this.trieCurrent,this.trieIndex+1,c);if(this.trieIndex<0){this.emitNamedEntity();this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const masked=this.trieCurrent&BinTrieFlags.VALUE_LENGTH;if(masked){const valueLength=(masked>>14)-1;if(!this.allowLegacyEntity()&&c!==CharCodes.Semi){this.trieIndex+=valueLength}else{const entityStart=this.index-this.entityExcess+1;if(entityStart>this.sectionStart){this.emitPartial(this.sectionStart,entityStart)}this.entityResult=this.trieIndex;this.trieIndex+=valueLength;this.entityExcess=0;this.sectionStart=this.index+1;if(valueLength===0){this.emitNamedEntity()}}}}emitNamedEntity(){this.state=this.baseState;if(this.entityResult===0){return}const valueLength=(this.entityTrie[this.entityResult]&BinTrieFlags.VALUE_LENGTH)>>14;switch(valueLength){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);this.emitCodePoint(this.entityTrie[this.entityResult+2])}}}stateBeforeNumericEntity(c){if((c|0x20)===CharCodes.LowerX){this.entityExcess++;this.state=State.InHexEntity}else{this.state=State.InNumericEntity;this.stateInNumericEntity(c)}}emitNumericEntity(strict){const entityStart=this.index-this.entityExcess-1;const numberStart=entityStart+2+Number(this.state===State.InHexEntity);if(numberStart!==this.index){if(entityStart>this.sectionStart){this.emitPartial(this.sectionStart,entityStart)}this.sectionStart=this.index+Number(strict);this.emitCodePoint(replaceCodePoint(this.entityResult))}this.state=this.baseState}stateInNumericEntity(c){if(c===CharCodes.Semi){this.emitNumericEntity(true)}else if(isNumber(c)){this.entityResult=this.entityResult*10+(c-CharCodes.Zero);this.entityExcess++}else{if(this.allowLegacyEntity()){this.emitNumericEntity(false)}else{this.state=this.baseState}this.index--}}stateInHexEntity(c){if(c===CharCodes.Semi){this.emitNumericEntity(true)}else if(isNumber(c)){this.entityResult=this.entityResult*16+(c-CharCodes.Zero);this.entityExcess++}else if(isHexDigit(c)){this.entityResult=this.entityResult*16+((c|0x20)-CharCodes.LowerA+10);this.entityExcess++}else{if(this.allowLegacyEntity()){this.emitNumericEntity(false)}else{this.state=this.baseState}this.index--}}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===State.Text||this.baseState===State.InSpecialTag)}cleanup(){if(this.running&&this.sectionStart!==this.index){if(this.state===State.Text||this.state===State.InSpecialTag&&this.sequenceIndex===0){this.cbs.ontext(this.sectionStart,this.index);this.sectionStart=this.index}else if(this.state===State.InAttributeValueDq||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueNq){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=this.index}}}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){while(this.shouldContinue()){const c=this.buffer.charCodeAt(this.index-this.offset);if(this.state===State.Text){this.stateText(c)}else if(this.state===State.SpecialStartSequence){this.stateSpecialStartSequence(c)}else if(this.state===State.InSpecialTag){this.stateInSpecialTag(c)}else if(this.state===State.CDATASequence){this.stateCDATASequence(c)}else if(this.state===State.InAttributeValueDq){this.stateInAttributeValueDoubleQuotes(c)}else if(this.state===State.InAttributeName){this.stateInAttributeName(c)}else if(this.state===State.InCommentLike){this.stateInCommentLike(c)}else if(this.state===State.InSpecialComment){this.stateInSpecialComment(c)}else if(this.state===State.BeforeAttributeName){this.stateBeforeAttributeName(c)}else if(this.state===State.InTagName){this.stateInTagName(c)}else if(this.state===State.InClosingTagName){this.stateInClosingTagName(c)}else if(this.state===State.BeforeTagName){this.stateBeforeTagName(c)}else if(this.state===State.AfterAttributeName){this.stateAfterAttributeName(c)}else if(this.state===State.InAttributeValueSq){this.stateInAttributeValueSingleQuotes(c)}else if(this.state===State.BeforeAttributeValue){this.stateBeforeAttributeValue(c)}else if(this.state===State.BeforeClosingTagName){this.stateBeforeClosingTagName(c)}else if(this.state===State.AfterClosingTagName){this.stateAfterClosingTagName(c)}else if(this.state===State.BeforeSpecialS){this.stateBeforeSpecialS(c)}else if(this.state===State.InAttributeValueNq){this.stateInAttributeValueNoQuotes(c)}else if(this.state===State.InSelfClosingTag){this.stateInSelfClosingTag(c)}else if(this.state===State.InDeclaration){this.stateInDeclaration(c)}else if(this.state===State.BeforeDeclaration){this.stateBeforeDeclaration(c)}else if(this.state===State.BeforeComment){this.stateBeforeComment(c)}else if(this.state===State.InProcessingInstruction){this.stateInProcessingInstruction(c)}else if(this.state===State.InNamedEntity){this.stateInNamedEntity(c)}else if(this.state===State.BeforeEntity){this.stateBeforeEntity(c)}else if(this.state===State.InHexEntity){this.stateInHexEntity(c)}else if(this.state===State.InNumericEntity){this.stateInNumericEntity(c)}else{this.stateBeforeNumericEntity(c)}this.index++}this.cleanup()}finish(){if(this.state===State.InNamedEntity){this.emitNamedEntity()}if(this.sectionStart<this.index){this.handleTrailingData()}this.cbs.onend()}handleTrailingData(){const endIndex=this.buffer.length+this.offset;if(this.state===State.InCommentLike){if(this.currentSequence===Sequences.CdataEnd){this.cbs.oncdata(this.sectionStart,endIndex,0)}else{this.cbs.oncomment(this.sectionStart,endIndex,0)}}else if(this.state===State.InNumericEntity&&this.allowLegacyEntity()){this.emitNumericEntity(false)}else if(this.state===State.InHexEntity&&this.allowLegacyEntity()){this.emitNumericEntity(false)}else if(this.state===State.InTagName||this.state===State.BeforeAttributeName||this.state===State.BeforeAttributeValue||this.state===State.AfterAttributeName||this.state===State.InAttributeName||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueDq||this.state===State.InAttributeValueNq||this.state===State.InClosingTagName);else{this.cbs.ontext(this.sectionStart,endIndex)}}emitPartial(start,endIndex){if(this.baseState!==State.Text&&this.baseState!==State.InSpecialTag){this.cbs.onattribdata(start,endIndex)}else{this.cbs.ontext(start,endIndex)}}emitCodePoint(cp){if(this.baseState!==State.Text&&this.baseState!==State.InSpecialTag){this.cbs.onattribentity(cp)}else{this.cbs.ontextentity(cp)}}};const formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]);const pTag=new Set(["p"]);const tableSectionTags=new Set(["thead","tbody"]);const ddtTags=new Set(["dd","dt"]);const rtpTags=new Set(["rt","rp"]);const openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]);const voidElements$1=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);const foreignContextElements=new Set(["math","svg"]);const htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]);const reNameEnd=/\s|\//;let Parser$2=class Parser{constructor(cbs,options={}){var _a,_b,_c,_d,_e;this.options=options;this.startIndex=0;this.endIndex=0;this.openTagStart=0;this.tagname="";this.attribname="";this.attribvalue="";this.attribs=null;this.stack=[];this.foreignContext=[];this.buffers=[];this.bufferOffset=0;this.writeIndex=0;this.ended=false;this.cbs=cbs!==null&&cbs!==void 0?cbs:{};this.lowerCaseTagNames=(_a=options.lowerCaseTags)!==null&&_a!==void 0?_a:!options.xmlMode;this.lowerCaseAttributeNames=(_b=options.lowerCaseAttributeNames)!==null&&_b!==void 0?_b:!options.xmlMode;this.tokenizer=new((_c=options.Tokenizer)!==null&&_c!==void 0?_c:Tokenizer$1)(this.options,this);(_e=(_d=this.cbs).onparserinit)===null||_e===void 0?void 0:_e.call(_d,this)}ontext(start,endIndex){var _a,_b;const data=this.getSlice(start,endIndex);this.endIndex=endIndex-1;(_b=(_a=this.cbs).ontext)===null||_b===void 0?void 0:_b.call(_a,data);this.startIndex=endIndex}ontextentity(cp){var _a,_b;const idx=this.tokenizer.getSectionStart();this.endIndex=idx-1;(_b=(_a=this.cbs).ontext)===null||_b===void 0?void 0:_b.call(_a,fromCodePoint$1(cp));this.startIndex=idx}isVoidElement(name){return!this.options.xmlMode&&voidElements$1.has(name)}onopentagname(start,endIndex){this.endIndex=endIndex;let name=this.getSlice(start,endIndex);if(this.lowerCaseTagNames){name=name.toLowerCase()}this.emitOpenTag(name)}emitOpenTag(name){var _a,_b,_c,_d;this.openTagStart=this.startIndex;this.tagname=name;const impliesClose=!this.options.xmlMode&&openImpliesClose.get(name);if(impliesClose){while(this.stack.length>0&&impliesClose.has(this.stack[this.stack.length-1])){const el=this.stack.pop();(_b=(_a=this.cbs).onclosetag)===null||_b===void 0?void 0:_b.call(_a,el,true)}}if(!this.isVoidElement(name)){this.stack.push(name);if(foreignContextElements.has(name)){this.foreignContext.push(true)}else if(htmlIntegrationElements.has(name)){this.foreignContext.push(false)}}(_d=(_c=this.cbs).onopentagname)===null||_d===void 0?void 0:_d.call(_c,name);if(this.cbs.onopentag)this.attribs={}}endOpenTag(isImplied){var _a,_b;this.startIndex=this.openTagStart;if(this.attribs){(_b=(_a=this.cbs).onopentag)===null||_b===void 0?void 0:_b.call(_a,this.tagname,this.attribs,isImplied);this.attribs=null}if(this.cbs.onclosetag&&this.isVoidElement(this.tagname)){this.cbs.onclosetag(this.tagname,true)}this.tagname=""}onopentagend(endIndex){this.endIndex=endIndex;this.endOpenTag(false);this.startIndex=endIndex+1}onclosetag(start,endIndex){var _a,_b,_c,_d,_e,_f;this.endIndex=endIndex;let name=this.getSlice(start,endIndex);if(this.lowerCaseTagNames){name=name.toLowerCase()}if(foreignContextElements.has(name)||htmlIntegrationElements.has(name)){this.foreignContext.pop()}if(!this.isVoidElement(name)){const pos=this.stack.lastIndexOf(name);if(pos!==-1){if(this.cbs.onclosetag){let count=this.stack.length-pos;while(count--){this.cbs.onclosetag(this.stack.pop(),count!==0)}}else this.stack.length=pos}else if(!this.options.xmlMode&&name==="p"){this.emitOpenTag("p");this.closeCurrentTag(true)}}else if(!this.options.xmlMode&&name==="br"){(_b=(_a=this.cbs).onopentagname)===null||_b===void 0?void 0:_b.call(_a,"br");(_d=(_c=this.cbs).onopentag)===null||_d===void 0?void 0:_d.call(_c,"br",{},true);(_f=(_e=this.cbs).onclosetag)===null||_f===void 0?void 0:_f.call(_e,"br",false)}this.startIndex=endIndex+1}onselfclosingtag(endIndex){this.endIndex=endIndex;if(this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]){this.closeCurrentTag(false);this.startIndex=endIndex+1}else{this.onopentagend(endIndex)}}closeCurrentTag(isOpenImplied){var _a,_b;const name=this.tagname;this.endOpenTag(isOpenImplied);if(this.stack[this.stack.length-1]===name){(_b=(_a=this.cbs).onclosetag)===null||_b===void 0?void 0:_b.call(_a,name,!isOpenImplied);this.stack.pop()}}onattribname(start,endIndex){this.startIndex=start;const name=this.getSlice(start,endIndex);this.attribname=this.lowerCaseAttributeNames?name.toLowerCase():name}onattribdata(start,endIndex){this.attribvalue+=this.getSlice(start,endIndex)}onattribentity(cp){this.attribvalue+=fromCodePoint$1(cp)}onattribend(quote,endIndex){var _a,_b;this.endIndex=endIndex;(_b=(_a=this.cbs).onattribute)===null||_b===void 0?void 0:_b.call(_a,this.attribname,this.attribvalue,quote===QuoteType.Double?'"':quote===QuoteType.Single?"'":quote===QuoteType.NoValue?undefined:null);if(this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)){this.attribs[this.attribname]=this.attribvalue}this.attribvalue=""}getInstructionName(value){const idx=value.search(reNameEnd);let name=idx<0?value:value.substr(0,idx);if(this.lowerCaseTagNames){name=name.toLowerCase()}return name}ondeclaration(start,endIndex){this.endIndex=endIndex;const value=this.getSlice(start,endIndex);if(this.cbs.onprocessinginstruction){const name=this.getInstructionName(value);this.cbs.onprocessinginstruction(`!${name}`,`!${value}`)}this.startIndex=endIndex+1}onprocessinginstruction(start,endIndex){this.endIndex=endIndex;const value=this.getSlice(start,endIndex);if(this.cbs.onprocessinginstruction){const name=this.getInstructionName(value);this.cbs.onprocessinginstruction(`?${name}`,`?${value}`)}this.startIndex=endIndex+1}oncomment(start,endIndex,offset){var _a,_b,_c,_d;this.endIndex=endIndex;(_b=(_a=this.cbs).oncomment)===null||_b===void 0?void 0:_b.call(_a,this.getSlice(start,endIndex-offset));(_d=(_c=this.cbs).oncommentend)===null||_d===void 0?void 0:_d.call(_c);this.startIndex=endIndex+1}oncdata(start,endIndex,offset){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;this.endIndex=endIndex;const value=this.getSlice(start,endIndex-offset);if(this.options.xmlMode||this.options.recognizeCDATA){(_b=(_a=this.cbs).oncdatastart)===null||_b===void 0?void 0:_b.call(_a);(_d=(_c=this.cbs).ontext)===null||_d===void 0?void 0:_d.call(_c,value);(_f=(_e=this.cbs).oncdataend)===null||_f===void 0?void 0:_f.call(_e)}else{(_h=(_g=this.cbs).oncomment)===null||_h===void 0?void 0:_h.call(_g,`[CDATA[${value}]]`);(_k=(_j=this.cbs).oncommentend)===null||_k===void 0?void 0:_k.call(_j)}this.startIndex=endIndex+1}onend(){var _a,_b;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],true));}(_b=(_a=this.cbs).onend)===null||_b===void 0?void 0:_b.call(_a)}reset(){var _a,_b,_c,_d;(_b=(_a=this.cbs).onreset)===null||_b===void 0?void 0:_b.call(_a);this.tokenizer.reset();this.tagname="";this.attribname="";this.attribs=null;this.stack.length=0;this.startIndex=0;this.endIndex=0;(_d=(_c=this.cbs).onparserinit)===null||_d===void 0?void 0:_d.call(_c,this);this.buffers.length=0;this.bufferOffset=0;this.writeIndex=0;this.ended=false}parseComplete(data){this.reset();this.end(data)}getSlice(start,end){while(start-this.bufferOffset>=this.buffers[0].length){this.shiftBuffer()}let str=this.buffers[0].slice(start-this.bufferOffset,end-this.bufferOffset);while(end-this.bufferOffset>this.buffers[0].length){this.shiftBuffer();str+=this.buffers[0].slice(0,end-this.bufferOffset)}return str}shiftBuffer(){this.bufferOffset+=this.buffers[0].length;this.writeIndex--;this.buffers.shift()}write(chunk){var _a,_b;if(this.ended){(_b=(_a=this.cbs).onerror)===null||_b===void 0?void 0:_b.call(_a,new Error(".write() after done!"));return}this.buffers.push(chunk);if(this.tokenizer.running){this.tokenizer.write(chunk);this.writeIndex++}}end(chunk){var _a,_b;if(this.ended){(_b=(_a=this.cbs).onerror)===null||_b===void 0?void 0:_b.call(_a,Error(".end() after done!"));return}if(chunk)this.write(chunk);this.ended=true;this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){this.tokenizer.resume();while(this.tokenizer.running&&this.writeIndex<this.buffers.length){this.tokenizer.write(this.buffers[this.writeIndex++])}if(this.ended)this.tokenizer.end()}parseChunk(chunk){this.write(chunk)}done(chunk){this.end(chunk)}};var ElementType;(function(ElementType){ElementType["Root"]="root";ElementType["Text"]="text";ElementType["Directive"]="directive";ElementType["Comment"]="comment";ElementType["Script"]="script";ElementType["Style"]="style";ElementType["Tag"]="tag";ElementType["CDATA"]="cdata";ElementType["Doctype"]="doctype"})(ElementType||(ElementType={}));function isTag$2(elem){return elem.type===ElementType.Tag||elem.type===ElementType.Script||elem.type===ElementType.Style}const Root$1=ElementType.Root;const Text$3=ElementType.Text;const Directive=ElementType.Directive;const Comment$3=ElementType.Comment;const Script=ElementType.Script;const Style=ElementType.Style;const Tag$1=ElementType.Tag;const CDATA$1=ElementType.CDATA;const Doctype=ElementType.Doctype;const index=Object.freeze(Object.defineProperty({__proto__:null,CDATA:CDATA$1,Comment:Comment$3,Directive,Doctype,get ElementType(){return ElementType},Root:Root$1,Script,Style,Tag:Tag$1,Text:Text$3,isTag:isTag$2},Symbol.toStringTag,{value:'Module'}));let Node$2=class Node{constructor(){this.parent=null;this.prev=null;this.next=null;this.startIndex=null;this.endIndex=null}get parentNode(){return this.parent}set parentNode(parent){this.parent=parent}get previousSibling(){return this.prev}set previousSibling(prev){this.prev=prev}get nextSibling(){return this.next}set nextSibling(next){this.next=next}cloneNode(recursive=false){return cloneNode(this,recursive)}};class DataNode extends Node$2{constructor(data){super();this.data=data}get nodeValue(){return this.data}set nodeValue(data){this.data=data}}let Text$2=class Text extends DataNode{constructor(){super(...arguments);this.type=ElementType.Text}get nodeType(){return 3}};let Comment$2=class Comment extends DataNode{constructor(){super(...arguments);this.type=ElementType.Comment}get nodeType(){return 8}};class ProcessingInstruction extends DataNode{constructor(name,data){super(data);this.name=name;this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node$2{constructor(children){super();this.children=children}get firstChild(){var _a;return(_a=this.children[0])!==null&&_a!==void 0?_a:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(children){this.children=children}}class CDATA extends NodeWithChildren{constructor(){super(...arguments);this.type=ElementType.CDATA}get nodeType(){return 4}}let Document$2=class Document extends NodeWithChildren{constructor(){super(...arguments);this.type=ElementType.Root}get nodeType(){return 9}};let Element$2=class Element extends NodeWithChildren{constructor(name,attribs,children=[],type=(name==="script"?ElementType.Script:name==="style"?ElementType.Style:ElementType.Tag)){super(children);this.name=name;this.attribs=attribs;this.type=type}get nodeType(){return 1}get tagName(){return this.name}set tagName(name){this.name=name}get attributes(){return Object.keys(this.attribs).map((name=>{var _a,_b;return{name,value:this.attribs[name],namespace:(_a=this["x-attribsNamespace"])===null||_a===void 0?void 0:_a[name],prefix:(_b=this["x-attribsPrefix"])===null||_b===void 0?void 0:_b[name]}}))}};function isTag$1(node){return isTag$2(node)}function isCDATA(node){return node.type===ElementType.CDATA}function isText(node){return node.type===ElementType.Text}function isComment(node){return node.type===ElementType.Comment}function isDirective(node){return node.type===ElementType.Directive}function isDocument(node){return node.type===ElementType.Root}function hasChildren(node){return Object.prototype.hasOwnProperty.call(node,"children")}function cloneNode(node,recursive=false){let result;if(isText(node)){result=new Text$2(node.data)}else if(isComment(node)){result=new Comment$2(node.data)}else if(isTag$1(node)){const children=recursive?cloneChildren(node.children):[];const clone=new Element$2(node.name,{...node.attribs},children);children.forEach((child=>child.parent=clone));if(node.namespace!=null){clone.namespace=node.namespace}if(node["x-attribsNamespace"]){clone["x-attribsNamespace"]={...node["x-attribsNamespace"]}}if(node["x-attribsPrefix"]){clone["x-attribsPrefix"]={...node["x-attribsPrefix"]}}result=clone}else if(isCDATA(node)){const children=recursive?cloneChildren(node.children):[];const clone=new CDATA(children);children.forEach((child=>child.parent=clone));result=clone}else if(isDocument(node)){const children=recursive?cloneChildren(node.children):[];const clone=new Document$2(children);children.forEach((child=>child.parent=clone));if(node["x-mode"]){clone["x-mode"]=node["x-mode"]}result=clone}else if(isDirective(node)){const instruction=new ProcessingInstruction(node.name,node.data);if(node["x-name"]!=null){instruction["x-name"]=node["x-name"];instruction["x-publicId"]=node["x-publicId"];instruction["x-systemId"]=node["x-systemId"]}result=instruction}else{throw new Error(`Not implemented yet: ${node.type}`)}result.startIndex=node.startIndex;result.endIndex=node.endIndex;if(node.sourceCodeLocation!=null){result.sourceCodeLocation=node.sourceCodeLocation}return result}function cloneChildren(childs){const children=childs.map((child=>cloneNode(child,true)));for(let i=1;i<children.length;i++){children[i].prev=children[i-1];children[i-1].next=children[i]}return children}const defaultOpts={withStartIndices:false,withEndIndices:false,xmlMode:false};class DomHandler{constructor(callback,options,elementCB){this.dom=[];this.root=new Document$2(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null;if(typeof options==="function"){elementCB=options;options=defaultOpts}if(typeof callback==="object"){options=callback;callback=undefined}this.callback=callback!==null&&callback!==void 0?callback:null;this.options=options!==null&&options!==void 0?options:defaultOpts;this.elementCB=elementCB!==null&&elementCB!==void 0?elementCB:null}onparserinit(parser){this.parser=parser}onreset(){this.dom=[];this.root=new Document$2(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null}onend(){if(this.done)return;this.done=true;this.parser=null;this.handleCallback(null)}onerror(error){this.handleCallback(error)}onclosetag(){this.lastNode=null;const elem=this.tagStack.pop();if(this.options.withEndIndices){elem.endIndex=this.parser.endIndex}if(this.elementCB)this.elementCB(elem)}onopentag(name,attribs){const type=this.options.xmlMode?ElementType.Tag:undefined;const element=new Element$2(name,attribs,undefined,type);this.addNode(element);this.tagStack.push(element)}ontext(data){const{lastNode}=this;if(lastNode&&lastNode.type===ElementType.Text){lastNode.data+=data;if(this.options.withEndIndices){lastNode.endIndex=this.parser.endIndex}}else{const node=new Text$2(data);this.addNode(node);this.lastNode=node}}oncomment(data){if(this.lastNode&&this.lastNode.type===ElementType.Comment){this.lastNode.data+=data;return}const node=new Comment$2(data);this.addNode(node);this.lastNode=node}oncommentend(){this.lastNode=null}oncdatastart(){const text=new Text$2("");const node=new CDATA([text]);this.addNode(node);text.parent=node;this.lastNode=text}oncdataend(){this.lastNode=null}onprocessinginstruction(name,data){const node=new ProcessingInstruction(name,data);this.addNode(node)}handleCallback(error){if(typeof this.callback==="function"){this.callback(error,this.dom)}else if(error){throw error}}addNode(node){const parent=this.tagStack[this.tagStack.length-1];const previousSibling=parent.children[parent.children.length-1];if(this.options.withStartIndices){node.startIndex=this.parser.startIndex}if(this.options.withEndIndices){node.endIndex=this.parser.endIndex}parent.children.push(node);if(previousSibling){node.prev=previousSibling;previousSibling.next=node}node.parent=parent;this.lastNode=null}}const xmlReplacer=/["&'<>$\x80-\uFFFF]/g;const xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);const getCodePoint=String.prototype.codePointAt!=null?(str,index)=>str.codePointAt(index):(c,index)=>(c.charCodeAt(index)&0xfc00)===0xd800?(c.charCodeAt(index)-0xd800)*0x400+c.charCodeAt(index+1)-0xdc00+0x10000:c.charCodeAt(index);function encodeXML(str){let ret="";let lastIdx=0;let match;while((match=xmlReplacer.exec(str))!==null){const i=match.index;const char=str.charCodeAt(i);const next=xmlCodeMap.get(char);if(next!==undefined){ret+=str.substring(lastIdx,i)+next;lastIdx=i+1}else{ret+=`${str.substring(lastIdx,i)}&#x${getCodePoint(str,i).toString(16)};`;lastIdx=xmlReplacer.lastIndex+=Number((char&0xfc00)===0xd800)}}return ret+str.substr(lastIdx)}function getEscaper(regex,map){return function escape(data){let match;let lastIdx=0;let result="";while(match=regex.exec(data)){if(lastIdx!==match.index){result+=data.substring(lastIdx,match.index)}result+=map.get(match[0].charCodeAt(0));lastIdx=match.index+1}return result+data.substring(lastIdx)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]]));const escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));const elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((val=>[val.toLowerCase(),val])));const attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((val=>[val.toLowerCase(),val])));const unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(value){return value.replace(/"/g,"&quot;")}function formatAttributes(attributes,opts){var _a;if(!attributes)return;const encode=((_a=opts.encodeEntities)!==null&&_a!==void 0?_a:opts.decodeEntities)===false?replaceQuotes:opts.xmlMode||opts.encodeEntities!=="utf8"?encodeXML:escapeAttribute;return Object.keys(attributes).map((key=>{var _a,_b;const value=(_a=attributes[key])!==null&&_a!==void 0?_a:"";if(opts.xmlMode==="foreign"){key=(_b=attributeNames.get(key))!==null&&_b!==void 0?_b:key}if(!opts.emptyAttrs&&!opts.xmlMode&&value===""){return key}return`${key}="${encode(value)}"`})).join(" ")}const singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render$1(node,options={}){const nodes="length"in node?node:[node];let output="";for(let i=0;i<nodes.length;i++){output+=renderNode(nodes[i],options)}return output}function renderNode(node,options){switch(node.type){case Root$1:return render$1(node.children,options);case Doctype:case Directive:return renderDirective(node);case Comment$3:return renderComment(node);case CDATA$1:return renderCdata(node);case Script:case Style:case Tag$1:return renderTag(node,options);case Text$3:return renderText(node,options)}}const foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]);const foreignElements=new Set(["svg","math"]);function renderTag(elem,opts){var _a;if(opts.xmlMode==="foreign"){elem.name=(_a=elementNames.get(elem.name))!==null&&_a!==void 0?_a:elem.name;if(elem.parent&&foreignModeIntegrationPoints.has(elem.parent.name)){opts={...opts,xmlMode:false}}}if(!opts.xmlMode&&foreignElements.has(elem.name)){opts={...opts,xmlMode:"foreign"}}let tag=`<${elem.name}`;const attribs=formatAttributes(elem.attribs,opts);if(attribs){tag+=` ${attribs}`}if(elem.children.length===0&&(opts.xmlMode?opts.selfClosingTags!==false:opts.selfClosingTags&&singleTag.has(elem.name))){if(!opts.xmlMode)tag+=" ";tag+="/>"}else{tag+=">";if(elem.children.length>0){tag+=render$1(elem.children,opts)}if(opts.xmlMode||!singleTag.has(elem.name)){tag+=`</${elem.name}>`}}return tag}function renderDirective(elem){return`<${elem.data}>`}function renderText(elem,opts){var _a;let data=elem.data||"";if(((_a=opts.encodeEntities)!==null&&_a!==void 0?_a:opts.decodeEntities)!==false&&!(!opts.xmlMode&&elem.parent&&unencodedElements.has(elem.parent.name))){data=opts.xmlMode||opts.encodeEntities!=="utf8"?encodeXML(data):escapeText(data)}return data}function renderCdata(elem){return`<![CDATA[${elem.children[0].data}]]>`}function renderComment(elem){return`\x3c!--${elem.data}--\x3e`}function getOuterHTML(node,options){return render$1(node,options)}function getInnerHTML(node,options){return hasChildren(node)?node.children.map((node=>getOuterHTML(node,options))).join(""):""}function getText$1(node){if(Array.isArray(node))return node.map(getText$1).join("");if(isTag$1(node))return node.name==="br"?"\n":getText$1(node.children);if(isCDATA(node))return getText$1(node.children);if(isText(node))return node.data;return""}function textContent(node){if(Array.isArray(node))return node.map(textContent).join("");if(hasChildren(node)&&!isComment(node)){return textContent(node.children)}if(isText(node))return node.data;return""}function innerText(node){if(Array.isArray(node))return node.map(innerText).join("");if(hasChildren(node)&&(node.type===ElementType.Tag||isCDATA(node))){return innerText(node.children)}if(isText(node))return node.data;return""}function getChildren$1(elem){return hasChildren(elem)?elem.children:[]}function getParent$1(elem){return elem.parent||null}function getSiblings$1(elem){const parent=getParent$1(elem);if(parent!=null)return getChildren$1(parent);const siblings=[elem];let{prev,next}=elem;while(prev!=null){siblings.unshift(prev);({prev}=prev)}while(next!=null){siblings.push(next);({next}=next)}return siblings}function getAttributeValue$1(elem,name){var _a;return(_a=elem.attribs)===null||_a===void 0?void 0:_a[name]}function hasAttrib$1(elem,name){return elem.attribs!=null&&Object.prototype.hasOwnProperty.call(elem.attribs,name)&&elem.attribs[name]!=null}function getName$1(elem){return elem.name}function nextElementSibling$1(elem){let{next}=elem;while(next!==null&&!isTag$1(next))({next}=next);return next}function prevElementSibling(elem){let{prev}=elem;while(prev!==null&&!isTag$1(prev))({prev}=prev);return prev}function removeElement(elem){if(elem.prev)elem.prev.next=elem.next;if(elem.next)elem.next.prev=elem.prev;if(elem.parent){const childs=elem.parent.children;childs.splice(childs.lastIndexOf(elem),1)}}function replaceElement(elem,replacement){const prev=replacement.prev=elem.prev;if(prev){prev.next=replacement}const next=replacement.next=elem.next;if(next){next.prev=replacement}const parent=replacement.parent=elem.parent;if(parent){const childs=parent.children;childs[childs.lastIndexOf(elem)]=replacement;elem.parent=null}}function appendChild(elem,child){removeElement(child);child.next=null;child.parent=elem;if(elem.children.push(child)>1){const sibling=elem.children[elem.children.length-2];sibling.next=child;child.prev=sibling}else{child.prev=null}}function append$1(elem,next){removeElement(next);const{parent}=elem;const currNext=elem.next;next.next=currNext;next.prev=elem;elem.next=next;next.parent=parent;if(currNext){currNext.prev=next;if(parent){const childs=parent.children;childs.splice(childs.lastIndexOf(currNext),0,next)}}else if(parent){parent.children.push(next)}}function prependChild(elem,child){removeElement(child);child.parent=elem;child.prev=null;if(elem.children.unshift(child)!==1){const sibling=elem.children[1];sibling.prev=child;child.next=sibling}else{child.next=null}}function prepend(elem,prev){removeElement(prev);const{parent}=elem;if(parent){const childs=parent.children;childs.splice(childs.indexOf(elem),0,prev)}if(elem.prev){elem.prev.next=prev}prev.parent=parent;prev.prev=elem.prev;prev.next=elem;elem.prev=prev}function filter(test,node,recurse=true,limit=Infinity){if(!Array.isArray(node))node=[node];return find(test,node,recurse,limit)}function find(test,nodes,recurse,limit){const result=[];for(const elem of nodes){if(test(elem)){result.push(elem);if(--limit<=0)break}if(recurse&&hasChildren(elem)&&elem.children.length>0){const children=find(test,elem.children,recurse,limit);result.push(...children);limit-=children.length;if(limit<=0)break}}return result}function findOneChild(test,nodes){return nodes.find(test)}function findOne$1(test,nodes,recurse=true){let elem=null;for(let i=0;i<nodes.length&&!elem;i++){const checked=nodes[i];if(!isTag$1(checked)){continue}else if(test(checked)){elem=checked}else if(recurse&&checked.children.length>0){elem=findOne$1(test,checked.children,true)}}return elem}function existsOne$1(test,nodes){return nodes.some((checked=>isTag$1(checked)&&(test(checked)||checked.children.length>0&&existsOne$1(test,checked.children))))}function findAll$1(test,nodes){var _a;const result=[];const stack=nodes.filter(isTag$1);let elem;while(elem=stack.shift()){const children=(_a=elem.children)===null||_a===void 0?void 0:_a.filter(isTag$1);if(children&&children.length>0){stack.unshift(...children)}if(test(elem))result.push(elem)}return result}const Checks={tag_name(name){if(typeof name==="function"){return elem=>isTag$1(elem)&&name(elem.name)}else if(name==="*"){return isTag$1}return elem=>isTag$1(elem)&&elem.name===name},tag_type(type){if(typeof type==="function"){return elem=>type(elem.type)}return elem=>elem.type===type},tag_contains(data){if(typeof data==="function"){return elem=>isText(elem)&&data(elem.data)}return elem=>isText(elem)&&elem.data===data}};function getAttribCheck(attrib,value){if(typeof value==="function"){return elem=>isTag$1(elem)&&value(elem.attribs[attrib])}return elem=>isTag$1(elem)&&elem.attribs[attrib]===value}function combineFuncs(a,b){return elem=>a(elem)||b(elem)}function compileTest(options){const funcs=Object.keys(options).map((key=>{const value=options[key];return Object.prototype.hasOwnProperty.call(Checks,key)?Checks[key](value):getAttribCheck(key,value)}));return funcs.length===0?null:funcs.reduce(combineFuncs)}function testElement(options,node){const test=compileTest(options);return test?test(node):true}function getElements(options,nodes,recurse,limit=Infinity){const test=compileTest(options);return test?filter(test,nodes,recurse,limit):[]}function getElementById(id,nodes,recurse=true){if(!Array.isArray(nodes))nodes=[nodes];return findOne$1(getAttribCheck("id",id),nodes,recurse)}function getElementsByTagName(tagName,nodes,recurse=true,limit=Infinity){return filter(Checks["tag_name"](tagName),nodes,recurse,limit)}function getElementsByTagType(type,nodes,recurse=true,limit=Infinity){return filter(Checks["tag_type"](type),nodes,recurse,limit)}function removeSubsets$1(nodes){let idx=nodes.length;while(--idx>=0){const node=nodes[idx];if(idx>0&&nodes.lastIndexOf(node,idx-1)>=0){nodes.splice(idx,1);continue}for(let ancestor=node.parent;ancestor;ancestor=ancestor.parent){if(nodes.includes(ancestor)){nodes.splice(idx,1);break}}}return nodes}var DocumentPosition;(function(DocumentPosition){DocumentPosition[DocumentPosition["DISCONNECTED"]=1]="DISCONNECTED";DocumentPosition[DocumentPosition["PRECEDING"]=2]="PRECEDING";DocumentPosition[DocumentPosition["FOLLOWING"]=4]="FOLLOWING";DocumentPosition[DocumentPosition["CONTAINS"]=8]="CONTAINS";DocumentPosition[DocumentPosition["CONTAINED_BY"]=16]="CONTAINED_BY"})(DocumentPosition||(DocumentPosition={}));function compareDocumentPosition(nodeA,nodeB){const aParents=[];const bParents=[];if(nodeA===nodeB){return 0}let current=hasChildren(nodeA)?nodeA:nodeA.parent;while(current){aParents.unshift(current);current=current.parent}current=hasChildren(nodeB)?nodeB:nodeB.parent;while(current){bParents.unshift(current);current=current.parent}const maxIdx=Math.min(aParents.length,bParents.length);let idx=0;while(idx<maxIdx&&aParents[idx]===bParents[idx]){idx++}if(idx===0){return DocumentPosition.DISCONNECTED}const sharedParent=aParents[idx-1];const siblings=sharedParent.children;const aSibling=aParents[idx];const bSibling=bParents[idx];if(siblings.indexOf(aSibling)>siblings.indexOf(bSibling)){if(sharedParent===nodeB){return DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY}return DocumentPosition.FOLLOWING}if(sharedParent===nodeA){return DocumentPosition.PRECEDING|DocumentPosition.CONTAINS}return DocumentPosition.PRECEDING}function uniqueSort(nodes){nodes=nodes.filter(((node,i,arr)=>!arr.includes(node,i+1)));nodes.sort(((a,b)=>{const relative=compareDocumentPosition(a,b);if(relative&DocumentPosition.PRECEDING){return-1}else if(relative&DocumentPosition.FOLLOWING){return 1}return 0}));return nodes}function getFeed(doc){const feedRoot=getOneElement(isValidFeed,doc);return!feedRoot?null:feedRoot.name==="feed"?getAtomFeed(feedRoot):getRssFeed(feedRoot)}function getAtomFeed(feedRoot){var _a;const childs=feedRoot.children;const feed={type:"atom",items:getElementsByTagName("entry",childs).map((item=>{var _a;const{children}=item;const entry={media:getMediaElements(children)};addConditionally(entry,"id","id",children);addConditionally(entry,"title","title",children);const href=(_a=getOneElement("link",children))===null||_a===void 0?void 0:_a.attribs["href"];if(href){entry.link=href}const description=fetch("summary",children)||fetch("content",children);if(description){entry.description=description}const pubDate=fetch("updated",children);if(pubDate){entry.pubDate=new Date(pubDate)}return entry}))};addConditionally(feed,"id","id",childs);addConditionally(feed,"title","title",childs);const href=(_a=getOneElement("link",childs))===null||_a===void 0?void 0:_a.attribs["href"];if(href){feed.link=href}addConditionally(feed,"description","subtitle",childs);const updated=fetch("updated",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","email",childs,true);return feed}function getRssFeed(feedRoot){var _a,_b;const childs=(_b=(_a=getOneElement("channel",feedRoot.children))===null||_a===void 0?void 0:_a.children)!==null&&_b!==void 0?_b:[];const feed={type:feedRoot.name.substr(0,3),id:"",items:getElementsByTagName("item",feedRoot.children).map((item=>{const{children}=item;const entry={media:getMediaElements(children)};addConditionally(entry,"id","guid",children);addConditionally(entry,"title","title",children);addConditionally(entry,"link","link",children);addConditionally(entry,"description","description",children);const pubDate=fetch("pubDate",children);if(pubDate)entry.pubDate=new Date(pubDate);return entry}))};addConditionally(feed,"title","title",childs);addConditionally(feed,"link","link",childs);addConditionally(feed,"description","description",childs);const updated=fetch("lastBuildDate",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","managingEditor",childs,true);return feed}const MEDIA_KEYS_STRING=["url","type","lang"];const MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(where){return getElementsByTagName("media:content",where).map((elem=>{const{attribs}=elem;const media={medium:attribs["medium"],isDefault:!!attribs["isDefault"]};for(const attrib of MEDIA_KEYS_STRING){if(attribs[attrib]){media[attrib]=attribs[attrib]}}for(const attrib of MEDIA_KEYS_INT){if(attribs[attrib]){media[attrib]=parseInt(attribs[attrib],10)}}if(attribs["expression"]){media.expression=attribs["expression"]}return media}))}function getOneElement(tagName,node){return getElementsByTagName(tagName,node,true,1)[0]}function fetch(tagName,where,recurse=false){return textContent(getElementsByTagName(tagName,where,recurse,1)).trim()}function addConditionally(obj,prop,tagName,where,recurse=false){const val=fetch(tagName,where,recurse);if(val)obj[prop]=val}function isValidFeed(value){return value==="rss"||value==="feed"||value==="rdf:RDF"}const DomUtils=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return DocumentPosition},append:append$1,appendChild,compareDocumentPosition,existsOne:existsOne$1,filter,find,findAll:findAll$1,findOne:findOne$1,findOneChild,getAttributeValue:getAttributeValue$1,getChildren:getChildren$1,getElementById,getElements,getElementsByTagName,getElementsByTagType,getFeed,getInnerHTML,getName:getName$1,getOuterHTML,getParent:getParent$1,getSiblings:getSiblings$1,getText:getText$1,hasAttrib:hasAttrib$1,hasChildren,innerText,isCDATA,isComment,isDocument,isTag:isTag$1,isText,nextElementSibling:nextElementSibling$1,prepend,prependChild,prevElementSibling,removeElement,removeSubsets:removeSubsets$1,replaceElement,testElement,textContent,uniqueSort},Symbol.toStringTag,{value:'Module'}));function parseDocument(data,options){const handler=new DomHandler(undefined,options);new Parser$2(handler,options).end(data);return handler.root}function parseDOM(data,options){return parseDocument(data,options).children}function createDomStream(cb,options,elementCb){const handler=new DomHandler(cb,options,elementCb);return new Parser$2(handler,options)}function parseFeed(feed,options={xmlMode:true}){return getFeed(parseDOM(feed,options))}const HTMLParser2=Object.freeze(Object.defineProperty({__proto__:null,DefaultHandler:DomHandler,DomHandler,DomUtils,ElementType:index,Parser:Parser$2,Tokenizer:Tokenizer$1,createDomStream,getFeed,parseDOM,parseDocument,parseFeed},Symbol.toStringTag,{value:'Module'}));const NODE_END=-1;const ELEMENT_NODE=1;const ATTRIBUTE_NODE=2;const TEXT_NODE=3;const COMMENT_NODE=8;const DOCUMENT_NODE=9;const DOCUMENT_TYPE_NODE=10;const DOCUMENT_FRAGMENT_NODE=11;const BLOCK_ELEMENTS=new Set(['ARTICLE','ASIDE','BLOCKQUOTE','BODY','BR','BUTTON','CANVAS','CAPTION','COL','COLGROUP','DD','DIV','DL','DT','EMBED','FIELDSET','FIGCAPTION','FIGURE','FOOTER','FORM','H1','H2','H3','H4','H5','H6','LI','UL','OL','P']);const SHOW_ALL=-1;const SHOW_ELEMENT=1;const SHOW_TEXT=4;const SHOW_COMMENT=128;const DOCUMENT_POSITION_DISCONNECTED=0x01;const DOCUMENT_POSITION_PRECEDING=0x02;const DOCUMENT_POSITION_FOLLOWING=0x04;const DOCUMENT_POSITION_CONTAINS=0x08;const DOCUMENT_POSITION_CONTAINED_BY=0x10;const DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=0x20;const SVG_NAMESPACE='http://www.w3.org/2000/svg';const{assign:assign$2,create:create$3,defineProperties:defineProperties$1,entries,getOwnPropertyDescriptors:getOwnPropertyDescriptors$1,keys:keys$1,setPrototypeOf}=Object;const $String=String;const getEnd=node=>node.nodeType===ELEMENT_NODE?node[END]:node;const ignoreCase=({ownerDocument})=>ownerDocument[MIME].ignoreCase;const knownAdjacent=(prev,next)=>{prev[NEXT]=next;next[PREV]=prev};const knownBoundaries=(prev,current,next)=>{knownAdjacent(prev,current);knownAdjacent(getEnd(current),next)};const knownSegment=(prev,start,end,next)=>{knownAdjacent(prev,start);knownAdjacent(getEnd(end),next)};const knownSiblings=(prev,current,next)=>{knownAdjacent(prev,current);knownAdjacent(current,next)};const localCase=({localName,ownerDocument})=>ownerDocument[MIME].ignoreCase?localName.toUpperCase():localName;const setAdjacent=(prev,next)=>{if(prev)prev[NEXT]=next;if(next)next[PREV]=prev};const shadowRoots=new WeakMap;let reactive=false;const Classes=new WeakMap;const customElements=new WeakMap;const attributeChangedCallback$1=(element,attributeName,oldValue,newValue)=>{if(reactive&&customElements.has(element)&&element.attributeChangedCallback&&element.constructor.observedAttributes.includes(attributeName)){element.attributeChangedCallback(attributeName,oldValue,newValue)}};const createTrigger=(method,isConnected)=>element=>{if(customElements.has(element)){const info=customElements.get(element);if(info.connected!==isConnected&&element.isConnected===isConnected){info.connected=isConnected;if(method in element)element[method]()}}};const triggerConnected=createTrigger('connectedCallback',true);const connectedCallback=element=>{if(reactive){triggerConnected(element);if(shadowRoots.has(element))element=shadowRoots.get(element).shadowRoot;let{[NEXT]:next,[END]:end}=element;while(next!==end){if(next.nodeType===ELEMENT_NODE)triggerConnected(next);next=next[NEXT]}}};const triggerDisconnected=createTrigger('disconnectedCallback',false);const disconnectedCallback=element=>{if(reactive){triggerDisconnected(element);if(shadowRoots.has(element))element=shadowRoots.get(element).shadowRoot;let{[NEXT]:next,[END]:end}=element;while(next!==end){if(next.nodeType===ELEMENT_NODE)triggerDisconnected(next);next=next[NEXT]}}};class CustomElementRegistry{constructor(ownerDocument){this.ownerDocument=ownerDocument;this.registry=new Map;this.waiting=new Map;this.active=false}define(localName,Class,options={}){const{ownerDocument,registry,waiting}=this;if(registry.has(localName))throw new Error('unable to redefine '+localName);if(Classes.has(Class))throw new Error('unable to redefine the same class: '+Class);this.active=reactive=true;const{extends:extend}=options;Classes.set(Class,{ownerDocument,options:{is:extend?localName:''},localName:extend||localName});const check=extend?element=>element.localName===extend&&element.getAttribute('is')===localName:element=>element.localName===localName;registry.set(localName,{Class,check});if(waiting.has(localName)){for(const resolve of waiting.get(localName))resolve(Class);waiting.delete(localName)}ownerDocument.querySelectorAll(extend?`${extend}[is="${localName}"]`:localName).forEach(this.upgrade,this)}upgrade(element){if(customElements.has(element))return;const{ownerDocument,registry}=this;const ce=element.getAttribute('is')||element.localName;if(registry.has(ce)){const{Class,check}=registry.get(ce);if(check(element)){const{attributes,isConnected}=element;for(const attr of attributes)element.removeAttributeNode(attr);const values=entries(element);for(const[key]of values)delete element[key];setPrototypeOf(element,Class.prototype);ownerDocument[UPGRADE]={element,values};new Class(ownerDocument,ce);customElements.set(element,{connected:isConnected});for(const attr of attributes)element.setAttributeNode(attr);if(isConnected&&element.connectedCallback)element.connectedCallback()}}}whenDefined(localName){const{registry,waiting}=this;return new Promise((resolve=>{if(registry.has(localName))resolve(registry.get(localName).Class);else{if(!waiting.has(localName))waiting.set(localName,[]);waiting.get(localName).push(resolve)}}))}get(localName){const info=this.registry.get(localName);return info&&info.Class}}const{Parser:Parser$1}=HTMLParser2;const append=(self,node,active)=>{const end=self[END];node.parentNode=self;knownBoundaries(end[PREV],node,end);if(active&&node.nodeType===ELEMENT_NODE)connectedCallback(node);return node};const attribute=(element,end,attribute,value,active)=>{attribute[VALUE]=value;attribute.ownerElement=element;knownSiblings(end[PREV],attribute,end);if(attribute.name==='class')element.className=value;if(active)attributeChangedCallback$1(element,attribute.name,null,value)};const parseFromString=(document,isHTML,markupLanguage)=>{const{active,registry}=document[CUSTOM_ELEMENTS];let node=document;let ownerSVGElement=null;const content=new Parser$1({onprocessinginstruction(name,data){if(name.toLowerCase()==='!doctype')document.doctype=data.slice(name.length).trim()},onopentag(name,attributes){let create=true;if(isHTML){if(ownerSVGElement){node=append(node,document.createElementNS(SVG_NAMESPACE,name),active);node.ownerSVGElement=ownerSVGElement;create=false}else if(name==='svg'||name==='SVG'){ownerSVGElement=document.createElementNS(SVG_NAMESPACE,name);node=append(node,ownerSVGElement,active);create=false}else if(active){const ce=name.includes('-')?name:attributes.is||'';if(ce&&registry.has(ce)){const{Class}=registry.get(ce);node=append(node,new Class,active);delete attributes.is;create=false}}}if(create)node=append(node,document.createElement(name),false);let end=node[END];for(const name of keys$1(attributes))attribute(node,end,document.createAttribute(name),attributes[name],active)},oncomment(data){append(node,document.createComment(data),active)},ontext(text){append(node,document.createTextNode(text),active)},onclosetag(){if(isHTML&&node===ownerSVGElement)ownerSVGElement=null;node=node.parentNode}},{lowerCaseAttributeNames:false,decodeEntities:true,xmlMode:!isHTML});content.write(markupLanguage);content.end();return document};const htmlClasses=new Map;const registerHTMLClass=(names,Class)=>{for(const name of[].concat(names)){htmlClasses.set(name,Class);htmlClasses.set(name.toUpperCase(),Class)}};var perf_hooks={};var performance_1;try{const{performance}=require$$0;performance_1=perf_hooks.performance=performance}catch(fallback){performance_1=perf_hooks.performance={now(){return+new Date}}}const loopSegment=({[NEXT]:next,[END]:end},json)=>{while(next!==end){switch(next.nodeType){case ATTRIBUTE_NODE:attrAsJSON(next,json);break;case TEXT_NODE:case COMMENT_NODE:characterDataAsJSON(next,json);break;case ELEMENT_NODE:elementAsJSON(next,json);next=getEnd(next);break;case DOCUMENT_TYPE_NODE:documentTypeAsJSON(next,json);break}next=next[NEXT]}const last=json.length-1;const value=json[last];if(typeof value==='number'&&value<0)json[last]+=NODE_END;else json.push(NODE_END)};const attrAsJSON=(attr,json)=>{json.push(ATTRIBUTE_NODE,attr.name);const value=attr[VALUE].trim();if(value)json.push(value)};const characterDataAsJSON=(node,json)=>{const value=node[VALUE];if(value.trim())json.push(node.nodeType,value)};const nonElementAsJSON=(node,json)=>{json.push(node.nodeType);loopSegment(node,json)};const documentTypeAsJSON=({name,publicId,systemId},json)=>{json.push(DOCUMENT_TYPE_NODE,name);if(publicId)json.push(publicId);if(systemId)json.push(systemId)};const elementAsJSON=(element,json)=>{json.push(ELEMENT_NODE,element.localName);loopSegment(element,json)};const createRecord=(type,target,addedNodes,removedNodes,attributeName,oldValue)=>({type,target,addedNodes,removedNodes,attributeName,oldValue});const queueAttribute=(observer,target,attributeName,attributeFilter,attributeOldValue,oldValue)=>{if(!attributeFilter||attributeFilter.includes(attributeName)){const{callback,records,scheduled}=observer;records.push(createRecord('attributes',target,[],[],attributeName,attributeOldValue?oldValue:void 0));if(!scheduled){observer.scheduled=true;Promise.resolve().then((()=>{observer.scheduled=false;callback(records.splice(0),observer)}))}}};const attributeChangedCallback=(element,attributeName,oldValue)=>{const{ownerDocument}=element;const{active,observers}=ownerDocument[MUTATION_OBSERVER];if(active){for(const observer of observers){for(const[target,{childList,subtree,attributes,attributeFilter,attributeOldValue}]of observer.nodes){if(childList){if(subtree&&(target===ownerDocument||target.contains(element))||!subtree&&target.children.includes(element)){queueAttribute(observer,element,attributeName,attributeFilter,attributeOldValue,oldValue);break}}else if(attributes&&target===element){queueAttribute(observer,element,attributeName,attributeFilter,attributeOldValue,oldValue);break}}}}};const moCallback=(element,parentNode)=>{const{ownerDocument}=element;const{active,observers}=ownerDocument[MUTATION_OBSERVER];if(active){for(const observer of observers){for(const[target,{subtree,childList,characterData}]of observer.nodes){if(childList){if(parentNode&&(target===parentNode||subtree&&target.contains(parentNode))||!parentNode&&(subtree&&(target===ownerDocument||target.contains(element))||!subtree&&target[characterData?'childNodes':'children'].includes(element))){const{callback,records,scheduled}=observer;records.push(createRecord('childList',target,parentNode?[]:[element],parentNode?[element]:[]));if(!scheduled){observer.scheduled=true;Promise.resolve().then((()=>{observer.scheduled=false;callback(records.splice(0),observer)}))}break}}}}}};class MutationObserverClass{constructor(ownerDocument){const observers=new Set;this.observers=observers;this.active=false;this.class=class MutationObserver{constructor(callback){this.callback=callback;this.nodes=new Map;this.records=[];this.scheduled=false}disconnect(){this.records.splice(0);this.nodes.clear();observers.delete(this);ownerDocument[MUTATION_OBSERVER].active=!!observers.size}observe(target,options={subtree:false,childList:false,attributes:false,attributeFilter:null,attributeOldValue:false,characterData:false}){if('attributeOldValue'in options||'attributeFilter'in options)options.attributes=true;options.childList=!!options.childList;options.subtree=!!options.subtree;this.nodes.set(target,options);observers.add(this);ownerDocument[MUTATION_OBSERVER].active=true}takeRecords(){return this.records.splice(0)}}}}const emptyAttributes=new Set(['allowfullscreen','allowpaymentrequest','async','autofocus','autoplay','checked','class','contenteditable','controls','default','defer','disabled','draggable','formnovalidate','hidden','id','ismap','itemscope','loop','multiple','muted','nomodule','novalidate','open','playsinline','readonly','required','reversed','selected','style','truespeed']);const setAttribute=(element,attribute)=>{const{[VALUE]:value,name}=attribute;attribute.ownerElement=element;knownSiblings(element,attribute,element[NEXT]);if(name==='class')element.className=value;attributeChangedCallback(element,name,null);attributeChangedCallback$1(element,name,null,value)};const removeAttribute=(element,attribute)=>{const{[VALUE]:value,name}=attribute;knownAdjacent(attribute[PREV],attribute[NEXT]);attribute.ownerElement=attribute[PREV]=attribute[NEXT]=null;if(name==='class')element[CLASS_LIST]=null;attributeChangedCallback(element,name,value);attributeChangedCallback$1(element,name,value,null)};const booleanAttribute={get(element,name){return element.hasAttribute(name)},set(element,name,value){if(value)element.setAttribute(name,'');else element.removeAttribute(name)}};const numericAttribute={get(element,name){return parseFloat(element.getAttribute(name)||0)},set(element,name,value){element.setAttribute(name,value)}};const stringAttribute={get(element,name){return element.getAttribute(name)||''},set(element,name,value){element.setAttribute(name,value)}};const wm=new WeakMap;function dispatch(event,listener){if(typeof listener==='function')listener.call(event.target,event);else listener.handleEvent(event);return event._stopImmediatePropagationFlag}function invokeListeners({currentTarget,target}){const map=wm.get(currentTarget);if(map&&map.has(this.type)){const listeners=map.get(this.type);if(currentTarget===target){this.eventPhase=this.AT_TARGET}else{this.eventPhase=this.BUBBLING_PHASE}this.currentTarget=currentTarget;this.target=target;for(const[listener,options]of listeners){if(options&&options.once)listeners.delete(listener);if(dispatch(this,listener))break}delete this.currentTarget;delete this.target;return this.cancelBubble}}class DOMEventTarget{constructor(){wm.set(this,new Map)}_getParent(){return null}addEventListener(type,listener,options){const map=wm.get(this);if(!map.has(type))map.set(type,new Map);map.get(type).set(listener,options)}removeEventListener(type,listener){const map=wm.get(this);if(map.has(type)){const listeners=map.get(type);if(listeners.delete(listener)&&!listeners.size)map.delete(type)}}dispatchEvent(event){let node=this;event.eventPhase=event.CAPTURING_PHASE;while(node){if(node.dispatchEvent)event._path.push({currentTarget:node,target:this});node=event.bubbles&&node._getParent&&node._getParent()}event._path.some(invokeListeners,event);event._path=[];event.eventPhase=event.NONE;return!event.defaultPrevented}}class NodeList extends Array{item(i){return i<this.length?this[i]:null}}const getParentNodeCount=({parentNode})=>{let count=0;while(parentNode){count++;parentNode=parentNode.parentNode}return count};let Node$1=class Node extends DOMEventTarget{static get ELEMENT_NODE(){return ELEMENT_NODE}static get ATTRIBUTE_NODE(){return ATTRIBUTE_NODE}static get TEXT_NODE(){return TEXT_NODE}static get COMMENT_NODE(){return COMMENT_NODE}static get DOCUMENT_NODE(){return DOCUMENT_NODE}static get DOCUMENT_FRAGMENT_NODE(){return DOCUMENT_FRAGMENT_NODE}static get DOCUMENT_TYPE_NODE(){return DOCUMENT_TYPE_NODE}constructor(ownerDocument,localName,nodeType){super();this.ownerDocument=ownerDocument;this.localName=localName;this.nodeType=nodeType;this.parentNode=null;this[NEXT]=null;this[PREV]=null}get ELEMENT_NODE(){return ELEMENT_NODE}get ATTRIBUTE_NODE(){return ATTRIBUTE_NODE}get TEXT_NODE(){return TEXT_NODE}get COMMENT_NODE(){return COMMENT_NODE}get DOCUMENT_NODE(){return DOCUMENT_NODE}get DOCUMENT_FRAGMENT_NODE(){return DOCUMENT_FRAGMENT_NODE}get DOCUMENT_TYPE_NODE(){return DOCUMENT_TYPE_NODE}get baseURI(){const ownerDocument=this.nodeType===DOCUMENT_NODE?this:this.ownerDocument;if(ownerDocument){const base=ownerDocument.querySelector('base');if(base)return base.getAttribute('href');const{location}=ownerDocument.defaultView;if(location)return location.href}return null}get isConnected(){return false}get nodeName(){return this.localName}get parentElement(){return null}get previousSibling(){return null}get previousElementSibling(){return null}get nextSibling(){return null}get nextElementSibling(){return null}get childNodes(){return new NodeList}get firstChild(){return null}get lastChild(){return null}get nodeValue(){return null}set nodeValue(value){}get textContent(){return null}set textContent(value){}normalize(){}cloneNode(){return null}contains(){return false}insertBefore(newNode,referenceNode){return newNode}appendChild(child){return child}replaceChild(newChild,oldChild){return oldChild}removeChild(child){return child}toString(){return''}hasChildNodes(){return!!this.lastChild}isSameNode(node){return this===node}compareDocumentPosition(target){let result=0;if(this!==target){let self=getParentNodeCount(this);let other=getParentNodeCount(target);if(self<other){result+=DOCUMENT_POSITION_FOLLOWING;if(this.contains(target))result+=DOCUMENT_POSITION_CONTAINED_BY}else if(other<self){result+=DOCUMENT_POSITION_PRECEDING;if(target.contains(this))result+=DOCUMENT_POSITION_CONTAINS}else if(self&&other){const{childNodes}=this.parentNode;if(childNodes.indexOf(this)<childNodes.indexOf(target))result+=DOCUMENT_POSITION_FOLLOWING;else result+=DOCUMENT_POSITION_PRECEDING}if(!self||!other){result+=DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC;result+=DOCUMENT_POSITION_DISCONNECTED}}return result}isEqualNode(node){if(this===node)return true;if(this.nodeType===node.nodeType){switch(this.nodeType){case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:{const aNodes=this.childNodes;const bNodes=node.childNodes;return aNodes.length===bNodes.length&&aNodes.every(((node,i)=>node.isEqualNode(bNodes[i])))}}return this.toString()===node.toString()}return false}_getParent(){return this.parentNode}getRootNode(){let root=this;while(root.parentNode)root=root.parentNode;return root.nodeType===DOCUMENT_NODE?root.documentElement:root}};const QUOTE=/"/g;let Attr$1=class Attr extends Node$1{constructor(ownerDocument,name,value=''){super(ownerDocument,'#attribute',ATTRIBUTE_NODE);this.ownerElement=null;this.name=$String(name);this[VALUE]=$String(value);this[CHANGED]=false}get value(){return this[VALUE]}set value(newValue){const{[VALUE]:oldValue,name,ownerElement}=this;this[VALUE]=$String(newValue);this[CHANGED]=true;if(ownerElement){attributeChangedCallback(ownerElement,name,oldValue);attributeChangedCallback$1(ownerElement,name,oldValue,this[VALUE])}}cloneNode(){const{ownerDocument,name,[VALUE]:value}=this;return new Attr(ownerDocument,name,value)}toString(){const{name,[VALUE]:value}=this;return emptyAttributes.has(name)&&!value?name:`${name}="${value.replace(QUOTE,'&quot;')}"`}toJSON(){const json=[];attrAsJSON(this,json);return json}};const isConnected=({ownerDocument,parentNode})=>{while(parentNode){if(parentNode===ownerDocument)return true;parentNode=parentNode.parentNode||parentNode.host}return false};const parentElement=({parentNode})=>{if(parentNode){switch(parentNode.nodeType){case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:return null}}return parentNode};const previousSibling=({[PREV]:prev})=>{switch(prev?prev.nodeType:0){case NODE_END:return prev[START];case TEXT_NODE:case COMMENT_NODE:return prev}return null};const nextSibling=node=>{const next=getEnd(node)[NEXT];return next&&(next.nodeType===NODE_END?null:next)};const nextElementSibling=node=>{let next=nextSibling(node);while(next&&next.nodeType!==ELEMENT_NODE)next=nextSibling(next);return next};const previousElementSibling=node=>{let prev=previousSibling(node);while(prev&&prev.nodeType!==ELEMENT_NODE)prev=previousSibling(prev);return prev};const asFragment=(ownerDocument,nodes)=>{const fragment=ownerDocument.createDocumentFragment();fragment.append(...nodes);return fragment};const before=(node,nodes)=>{const{ownerDocument,parentNode}=node;if(parentNode)parentNode.insertBefore(asFragment(ownerDocument,nodes),node)};const after=(node,nodes)=>{const{ownerDocument,parentNode}=node;if(parentNode)parentNode.insertBefore(asFragment(ownerDocument,nodes),getEnd(node)[NEXT])};const replaceWith=(node,nodes)=>{const{ownerDocument,parentNode}=node;if(parentNode){parentNode.insertBefore(asFragment(ownerDocument,nodes),node);node.remove()}};const remove=(prev,current,next)=>{const{parentNode,nodeType}=current;if(prev||next){setAdjacent(prev,next);current[PREV]=null;getEnd(current)[NEXT]=null}if(parentNode){current.parentNode=null;moCallback(current,parentNode);if(nodeType===ELEMENT_NODE)disconnectedCallback(current)}};let CharacterData$1=class CharacterData extends Node$1{constructor(ownerDocument,localName,nodeType,data){super(ownerDocument,localName,nodeType);this[VALUE]=$String(data)}get isConnected(){return isConnected(this)}get parentElement(){return parentElement(this)}get previousSibling(){return previousSibling(this)}get nextSibling(){return nextSibling(this)}get previousElementSibling(){return previousElementSibling(this)}get nextElementSibling(){return nextElementSibling(this)}before(...nodes){before(this,nodes)}after(...nodes){after(this,nodes)}replaceWith(...nodes){replaceWith(this,nodes)}remove(){remove(this[PREV],this,this[NEXT])}get data(){return this[VALUE]}set data(value){this[VALUE]=$String(value);moCallback(this,this.parentNode)}get nodeValue(){return this.data}set nodeValue(value){this.data=value}get textContent(){return this.data}set textContent(value){this.data=value}get length(){return this.data.length}substringData(offset,count){return this.data.substr(offset,count)}appendData(data){this.data+=data}insertData(offset,data){const{data:t}=this;this.data=t.slice(0,offset)+data+t.slice(offset)}deleteData(offset,count){const{data:t}=this;this.data=t.slice(0,offset)+t.slice(offset+count)}replaceData(offset,count,data){const{data:t}=this;this.data=t.slice(0,offset)+data+t.slice(offset+count)}toJSON(){const json=[];characterDataAsJSON(this,json);return json}};let Comment$1=class Comment extends CharacterData$1{constructor(ownerDocument,data=''){super(ownerDocument,'#comment',COMMENT_NODE,data)}cloneNode(){const{ownerDocument,[VALUE]:data}=this;return new Comment(ownerDocument,data)}toString(){return`\x3c!--${this[VALUE]}--\x3e`}};var boolbase={trueFunc:function trueFunc(){return true},falseFunc:function falseFunc(){return false}};var SelectorType;(function(SelectorType){SelectorType["Attribute"]="attribute";SelectorType["Pseudo"]="pseudo";SelectorType["PseudoElement"]="pseudo-element";SelectorType["Tag"]="tag";SelectorType["Universal"]="universal";SelectorType["Adjacent"]="adjacent";SelectorType["Child"]="child";SelectorType["Descendant"]="descendant";SelectorType["Parent"]="parent";SelectorType["Sibling"]="sibling";SelectorType["ColumnCombinator"]="column-combinator"})(SelectorType||(SelectorType={}));var AttributeAction;(function(AttributeAction){AttributeAction["Any"]="any";AttributeAction["Element"]="element";AttributeAction["End"]="end";AttributeAction["Equals"]="equals";AttributeAction["Exists"]="exists";AttributeAction["Hyphen"]="hyphen";AttributeAction["Not"]="not";AttributeAction["Start"]="start"})(AttributeAction||(AttributeAction={}));const reName=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/;const reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi;const actionTypes=new Map([[126,AttributeAction.Element],[94,AttributeAction.Start],[36,AttributeAction.End],[42,AttributeAction.Any],[33,AttributeAction.Not],[124,AttributeAction.Hyphen]]);const unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);function isTraversal$1(selector){switch(selector.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:return true;default:return false}}const stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(_,escaped,escapedWhitespace){const high=parseInt(escaped,16)-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xd800,high&0x3ff|0xdc00)}function unescapeCSS(str){return str.replace(reEscape,funescape)}function isQuote(c){return c===39||c===34}function isWhitespace(c){return c===32||c===9||c===10||c===12||c===13}function parse$6(selector){const subselects=[];const endIndex=parseSelector(subselects,`${selector}`,0);if(endIndex<selector.length){throw new Error(`Unmatched selector: ${selector.slice(endIndex)}`)}return subselects}function parseSelector(subselects,selector,selectorIndex){let tokens=[];function getName(offset){const match=selector.slice(selectorIndex+offset).match(reName);if(!match){throw new Error(`Expected name, found ${selector.slice(selectorIndex)}`)}const[name]=match;selectorIndex+=offset+name.length;return unescapeCSS(name)}function stripWhitespace(offset){selectorIndex+=offset;while(selectorIndex<selector.length&&isWhitespace(selector.charCodeAt(selectorIndex))){selectorIndex++}}function readValueWithParenthesis(){selectorIndex+=1;const start=selectorIndex;let counter=1;for(;counter>0&&selectorIndex<selector.length;selectorIndex++){if(selector.charCodeAt(selectorIndex)===40&&!isEscaped(selectorIndex)){counter++}else if(selector.charCodeAt(selectorIndex)===41&&!isEscaped(selectorIndex)){counter--}}if(counter){throw new Error("Parenthesis not matched")}return unescapeCSS(selector.slice(start,selectorIndex-1))}function isEscaped(pos){let slashCount=0;while(selector.charCodeAt(--pos)===92)slashCount++;return(slashCount&1)===1}function ensureNotTraversal(){if(tokens.length>0&&isTraversal$1(tokens[tokens.length-1])){throw new Error("Did not expect successive traversals.")}}function addTraversal(type){if(tokens.length>0&&tokens[tokens.length-1].type===SelectorType.Descendant){tokens[tokens.length-1].type=type;return}ensureNotTraversal();tokens.push({type})}function addSpecialAttribute(name,action){tokens.push({type:SelectorType.Attribute,name,action,value:getName(1),namespace:null,ignoreCase:"quirks"})}function finalizeSubselector(){if(tokens.length&&tokens[tokens.length-1].type===SelectorType.Descendant){tokens.pop()}if(tokens.length===0){throw new Error("Empty sub-selector")}subselects.push(tokens)}stripWhitespace(0);if(selector.length===selectorIndex){return selectorIndex}loop:while(selectorIndex<selector.length){const firstChar=selector.charCodeAt(selectorIndex);switch(firstChar){case 32:case 9:case 10:case 12:case 13:{if(tokens.length===0||tokens[0].type!==SelectorType.Descendant){ensureNotTraversal();tokens.push({type:SelectorType.Descendant})}stripWhitespace(1);break}case 62:{addTraversal(SelectorType.Child);stripWhitespace(1);break}case 60:{addTraversal(SelectorType.Parent);stripWhitespace(1);break}case 126:{addTraversal(SelectorType.Sibling);stripWhitespace(1);break}case 43:{addTraversal(SelectorType.Adjacent);stripWhitespace(1);break}case 46:{addSpecialAttribute("class",AttributeAction.Element);break}case 35:{addSpecialAttribute("id",AttributeAction.Equals);break}case 91:{stripWhitespace(1);let name;let namespace=null;if(selector.charCodeAt(selectorIndex)===124){name=getName(1)}else if(selector.startsWith("*|",selectorIndex)){namespace="*";name=getName(2)}else{name=getName(0);if(selector.charCodeAt(selectorIndex)===124&&selector.charCodeAt(selectorIndex+1)!==61){namespace=name;name=getName(1)}}stripWhitespace(0);let action=AttributeAction.Exists;const possibleAction=actionTypes.get(selector.charCodeAt(selectorIndex));if(possibleAction){action=possibleAction;if(selector.charCodeAt(selectorIndex+1)!==61){throw new Error("Expected `=`")}stripWhitespace(2)}else if(selector.charCodeAt(selectorIndex)===61){action=AttributeAction.Equals;stripWhitespace(1)}let value="";let ignoreCase=null;if(action!=="exists"){if(isQuote(selector.charCodeAt(selectorIndex))){const quote=selector.charCodeAt(selectorIndex);let sectionEnd=selectorIndex+1;while(sectionEnd<selector.length&&(selector.charCodeAt(sectionEnd)!==quote||isEscaped(sectionEnd))){sectionEnd+=1}if(selector.charCodeAt(sectionEnd)!==quote){throw new Error("Attribute value didn't end")}value=unescapeCSS(selector.slice(selectorIndex+1,sectionEnd));selectorIndex=sectionEnd+1}else{const valueStart=selectorIndex;while(selectorIndex<selector.length&&(!isWhitespace(selector.charCodeAt(selectorIndex))&&selector.charCodeAt(selectorIndex)!==93||isEscaped(selectorIndex))){selectorIndex+=1}value=unescapeCSS(selector.slice(valueStart,selectorIndex))}stripWhitespace(0);const forceIgnore=selector.charCodeAt(selectorIndex)|0x20;if(forceIgnore===115){ignoreCase=false;stripWhitespace(1)}else if(forceIgnore===105){ignoreCase=true;stripWhitespace(1)}}if(selector.charCodeAt(selectorIndex)!==93){throw new Error("Attribute selector didn't terminate")}selectorIndex+=1;const attributeSelector={type:SelectorType.Attribute,name,action,value,namespace,ignoreCase};tokens.push(attributeSelector);break}case 58:{if(selector.charCodeAt(selectorIndex+1)===58){tokens.push({type:SelectorType.PseudoElement,name:getName(2).toLowerCase(),data:selector.charCodeAt(selectorIndex)===40?readValueWithParenthesis():null});continue}const name=getName(1).toLowerCase();let data=null;if(selector.charCodeAt(selectorIndex)===40){if(unpackPseudos.has(name)){if(isQuote(selector.charCodeAt(selectorIndex+1))){throw new Error(`Pseudo-selector ${name} cannot be quoted`)}data=[];selectorIndex=parseSelector(data,selector,selectorIndex+1);if(selector.charCodeAt(selectorIndex)!==41){throw new Error(`Missing closing parenthesis in :${name} (${selector})`)}selectorIndex+=1}else{data=readValueWithParenthesis();if(stripQuotesFromPseudos.has(name)){const quot=data.charCodeAt(0);if(quot===data.charCodeAt(data.length-1)&&isQuote(quot)){data=data.slice(1,-1)}}data=unescapeCSS(data)}}tokens.push({type:SelectorType.Pseudo,name,data});break}case 44:{finalizeSubselector();tokens=[];stripWhitespace(1);break}default:{if(selector.startsWith("/*",selectorIndex)){const endIndex=selector.indexOf("*/",selectorIndex+2);if(endIndex<0){throw new Error("Comment was not terminated")}selectorIndex=endIndex+2;if(tokens.length===0){stripWhitespace(0)}break}let namespace=null;let name;if(firstChar===42){selectorIndex+=1;name="*"}else if(firstChar===124){name="";if(selector.charCodeAt(selectorIndex+1)===124){addTraversal(SelectorType.ColumnCombinator);stripWhitespace(2);break}}else if(reName.test(selector.slice(selectorIndex))){name=getName(0)}else{break loop}if(selector.charCodeAt(selectorIndex)===124&&selector.charCodeAt(selectorIndex+1)!==124){namespace=name;if(selector.charCodeAt(selectorIndex+1)===42){name="*";selectorIndex+=2}else{name=getName(1)}}tokens.push(name==="*"?{type:SelectorType.Universal,namespace}:{type:SelectorType.Tag,name,namespace})}}}finalizeSubselector();return selectorIndex}const procedure=new Map([[SelectorType.Universal,50],[SelectorType.Tag,30],[SelectorType.Attribute,1],[SelectorType.Pseudo,0]]);function isTraversal(token){return!procedure.has(token.type)}const attributes=new Map([[AttributeAction.Exists,10],[AttributeAction.Equals,8],[AttributeAction.Not,7],[AttributeAction.Start,6],[AttributeAction.End,6],[AttributeAction.Any,5]]);function sortByProcedure(arr){const procs=arr.map(getProcedure);for(let i=1;i<arr.length;i++){const procNew=procs[i];if(procNew<0)continue;for(let j=i-1;j>=0&&procNew<procs[j];j--){const token=arr[j+1];arr[j+1]=arr[j];arr[j]=token;procs[j+1]=procs[j];procs[j]=procNew}}}function getProcedure(token){var _a,_b;let proc=(_a=procedure.get(token.type))!==null&&_a!==void 0?_a:-1;if(token.type===SelectorType.Attribute){proc=(_b=attributes.get(token.action))!==null&&_b!==void 0?_b:4;if(token.action===AttributeAction.Equals&&token.name==="id"){proc=9}if(token.ignoreCase){proc>>=1}}else if(token.type===SelectorType.Pseudo){if(!token.data){proc=3}else if(token.name==="has"||token.name==="contains"){proc=0}else if(Array.isArray(token.data)){proc=Math.min(...token.data.map((d=>Math.min(...d.map(getProcedure)))));if(proc<0){proc=0}}else{proc=2}}return proc}const reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex(value){return value.replace(reChars,"\\$&")}const caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(selector,options){return typeof selector.ignoreCase==="boolean"?selector.ignoreCase:selector.ignoreCase==="quirks"?!!options.quirksMode:!options.xmlMode&&caseInsensitiveAttributes.has(selector.name)}const attributeRules={equals(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return elem=>{const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length===value.length&&attr.toLowerCase()===value&&next(elem)}}return elem=>adapter.getAttributeValue(elem,name)===value&&next(elem)},hyphen(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=value.length;if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return function hyphenIC(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&(attr.length===len||attr.charAt(len)==="-")&&attr.substr(0,len).toLowerCase()===value&&next(elem)}}return function hyphen(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&(attr.length===len||attr.charAt(len)==="-")&&attr.substr(0,len)===value&&next(elem)}},element(next,data,options){const{adapter}=options;const{name,value}=data;if(/\s/.test(value)){return boolbase.falseFunc}const regex=new RegExp(`(?:^|\\s)${escapeRegex(value)}(?:$|\\s)`,shouldIgnoreCase(data,options)?"i":"");return function element(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=value.length&&regex.test(attr)&&next(elem)}},exists(next,{name},{adapter}){return elem=>adapter.hasAttrib(elem,name)&&next(elem)},start(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=value.length;if(len===0){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return elem=>{const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=len&&attr.substr(0,len).toLowerCase()===value&&next(elem)}}return elem=>{var _a;return!!((_a=adapter.getAttributeValue(elem,name))===null||_a===void 0?void 0:_a.startsWith(value))&&next(elem)}},end(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=-value.length;if(len===0){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return elem=>{var _a;return((_a=adapter.getAttributeValue(elem,name))===null||_a===void 0?void 0:_a.substr(len).toLowerCase())===value&&next(elem)}}return elem=>{var _a;return!!((_a=adapter.getAttributeValue(elem,name))===null||_a===void 0?void 0:_a.endsWith(value))&&next(elem)}},any(next,data,options){const{adapter}=options;const{name,value}=data;if(value===""){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){const regex=new RegExp(escapeRegex(value),"i");return function anyIC(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=value.length&&regex.test(attr)&&next(elem)}}return elem=>{var _a;return!!((_a=adapter.getAttributeValue(elem,name))===null||_a===void 0?void 0:_a.includes(value))&&next(elem)}},not(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;if(value===""){return elem=>!!adapter.getAttributeValue(elem,name)&&next(elem)}else if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return elem=>{const attr=adapter.getAttributeValue(elem,name);return(attr==null||attr.length!==value.length||attr.toLowerCase()!==value)&&next(elem)}}return elem=>adapter.getAttributeValue(elem,name)!==value&&next(elem)}};const whitespace=new Set([9,10,12,13,32]);const ZERO$1="0".charCodeAt(0);const NINE="9".charCodeAt(0);function parse$5(formula){formula=formula.trim().toLowerCase();if(formula==="even"){return[2,0]}else if(formula==="odd"){return[2,1]}let idx=0;let a=0;let sign=readSign();let number=readNumber();if(idx<formula.length&&formula.charAt(idx)==="n"){idx++;a=sign*(number!==null&&number!==void 0?number:1);skipWhitespace();if(idx<formula.length){sign=readSign();skipWhitespace();number=readNumber()}else{sign=number=0}}if(number===null||idx<formula.length){throw new Error(`n-th rule couldn't be parsed ('${formula}')`)}return[a,sign*number];function readSign(){if(formula.charAt(idx)==="-"){idx++;return-1}if(formula.charAt(idx)==="+"){idx++}return 1}function readNumber(){const start=idx;let value=0;while(idx<formula.length&&formula.charCodeAt(idx)>=ZERO$1&&formula.charCodeAt(idx)<=NINE){value=value*10+(formula.charCodeAt(idx)-ZERO$1);idx++}return idx===start?null:value}function skipWhitespace(){while(idx<formula.length&&whitespace.has(formula.charCodeAt(idx))){idx++}}}function compile$2(parsed){const a=parsed[0];const b=parsed[1]-1;if(b<0&&a<=0)return boolbase.falseFunc;if(a===-1)return index=>index<=b;if(a===0)return index=>index===b;if(a===1)return b<0?boolbase.trueFunc:index=>index>=b;const absA=Math.abs(a);const bMod=(b%absA+absA)%absA;return a>1?index=>index>=b&&index%absA===bMod:index=>index<=b&&index%absA===bMod}function nthCheck(formula){return compile$2(parse$5(formula))}function getChildFunc(next,adapter){return elem=>{const parent=adapter.getParent(elem);return parent!=null&&adapter.isTag(parent)&&next(elem)}}const filters={contains(next,text,{adapter}){return function contains(elem){return next(elem)&&adapter.getText(elem).includes(text)}},icontains(next,text,{adapter}){const itext=text.toLowerCase();return function icontains(elem){return next(elem)&&adapter.getText(elem).toLowerCase().includes(itext)}},"nth-child"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase.falseFunc)return boolbase.falseFunc;if(func===boolbase.trueFunc)return getChildFunc(next,adapter);return function nthChild(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=0;i<siblings.length;i++){if(equals(elem,siblings[i]))break;if(adapter.isTag(siblings[i])){pos++}}return func(pos)&&next(elem)}},"nth-last-child"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase.falseFunc)return boolbase.falseFunc;if(func===boolbase.trueFunc)return getChildFunc(next,adapter);return function nthLastChild(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=siblings.length-1;i>=0;i--){if(equals(elem,siblings[i]))break;if(adapter.isTag(siblings[i])){pos++}}return func(pos)&&next(elem)}},"nth-of-type"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase.falseFunc)return boolbase.falseFunc;if(func===boolbase.trueFunc)return getChildFunc(next,adapter);return function nthOfType(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling))break;if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===adapter.getName(elem)){pos++}}return func(pos)&&next(elem)}},"nth-last-of-type"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase.falseFunc)return boolbase.falseFunc;if(func===boolbase.trueFunc)return getChildFunc(next,adapter);return function nthLastOfType(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=siblings.length-1;i>=0;i--){const currentSibling=siblings[i];if(equals(elem,currentSibling))break;if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===adapter.getName(elem)){pos++}}return func(pos)&&next(elem)}},root(next,_rule,{adapter}){return elem=>{const parent=adapter.getParent(elem);return(parent==null||!adapter.isTag(parent))&&next(elem)}},scope(next,rule,options,context){const{equals}=options;if(!context||context.length===0){return filters["root"](next,rule,options)}if(context.length===1){return elem=>equals(context[0],elem)&&next(elem)}return elem=>context.includes(elem)&&next(elem)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(name){return function dynamicPseudo(next,_rule,{adapter}){const func=adapter[name];if(typeof func!=="function"){return boolbase.falseFunc}return function active(elem){return func(elem)&&next(elem)}}}const pseudos={empty(elem,{adapter}){return!adapter.getChildren(elem).some((elem=>adapter.isTag(elem)||adapter.getText(elem)!==""))},"first-child"(elem,{adapter,equals}){if(adapter.prevElementSibling){return adapter.prevElementSibling(elem)==null}const firstChild=adapter.getSiblings(elem).find((elem=>adapter.isTag(elem)));return firstChild!=null&&equals(elem,firstChild)},"last-child"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);for(let i=siblings.length-1;i>=0;i--){if(equals(elem,siblings[i]))return true;if(adapter.isTag(siblings[i]))break}return false},"first-of-type"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);const elemName=adapter.getName(elem);for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling))return true;if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===elemName){break}}return false},"last-of-type"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);const elemName=adapter.getName(elem);for(let i=siblings.length-1;i>=0;i--){const currentSibling=siblings[i];if(equals(elem,currentSibling))return true;if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===elemName){break}}return false},"only-of-type"(elem,{adapter,equals}){const elemName=adapter.getName(elem);return adapter.getSiblings(elem).every((sibling=>equals(elem,sibling)||!adapter.isTag(sibling)||adapter.getName(sibling)!==elemName))},"only-child"(elem,{adapter,equals}){return adapter.getSiblings(elem).every((sibling=>equals(elem,sibling)||!adapter.isTag(sibling)))}};function verifyPseudoArgs(func,name,subselect,argIndex){if(subselect===null){if(func.length>argIndex){throw new Error(`Pseudo-class :${name} requires an argument`)}}else if(func.length===argIndex){throw new Error(`Pseudo-class :${name} doesn't have any arguments`)}}const aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};const PLACEHOLDER_ELEMENT={};function ensureIsTag(next,adapter){if(next===boolbase.falseFunc)return boolbase.falseFunc;return elem=>adapter.isTag(elem)&&next(elem)}function getNextSiblings(elem,adapter){const siblings=adapter.getSiblings(elem);if(siblings.length<=1)return[];const elemIndex=siblings.indexOf(elem);if(elemIndex<0||elemIndex===siblings.length-1)return[];return siblings.slice(elemIndex+1).filter(adapter.isTag)}function copyOptions(options){return{xmlMode:!!options.xmlMode,lowerCaseAttributeNames:!!options.lowerCaseAttributeNames,lowerCaseTags:!!options.lowerCaseTags,quirksMode:!!options.quirksMode,cacheResults:!!options.cacheResults,pseudos:options.pseudos,adapter:options.adapter,equals:options.equals}}const is$2=(next,token,options,context,compileToken)=>{const func=compileToken(token,copyOptions(options),context);return func===boolbase.trueFunc?next:func===boolbase.falseFunc?boolbase.falseFunc:elem=>func(elem)&&next(elem)};const subselects={is:is$2,matches:is$2,where:is$2,not(next,token,options,context,compileToken){const func=compileToken(token,copyOptions(options),context);return func===boolbase.falseFunc?next:func===boolbase.trueFunc?boolbase.falseFunc:elem=>!func(elem)&&next(elem)},has(next,subselect,options,_context,compileToken){const{adapter}=options;const opts=copyOptions(options);opts.relativeSelector=true;const context=subselect.some((s=>s.some(isTraversal)))?[PLACEHOLDER_ELEMENT]:undefined;const compiled=compileToken(subselect,opts,context);if(compiled===boolbase.falseFunc)return boolbase.falseFunc;const hasElement=ensureIsTag(compiled,adapter);if(context&&compiled!==boolbase.trueFunc){const{shouldTestNextSiblings=false}=compiled;return elem=>{if(!next(elem))return false;context[0]=elem;const childs=adapter.getChildren(elem);const nextElements=shouldTestNextSiblings?[...childs,...getNextSiblings(elem,adapter)]:childs;return adapter.existsOne(hasElement,nextElements)}}return elem=>next(elem)&&adapter.existsOne(hasElement,adapter.getChildren(elem))}};function compilePseudoSelector(next,selector,options,context,compileToken){var _a;const{name,data}=selector;if(Array.isArray(data)){if(!(name in subselects)){throw new Error(`Unknown pseudo-class :${name}(${data})`)}return subselects[name](next,data,options,context,compileToken)}const userPseudo=(_a=options.pseudos)===null||_a===void 0?void 0:_a[name];const stringPseudo=typeof userPseudo==="string"?userPseudo:aliases[name];if(typeof stringPseudo==="string"){if(data!=null){throw new Error(`Pseudo ${name} doesn't have any arguments`)}const alias=parse$6(stringPseudo);return subselects["is"](next,alias,options,context,compileToken)}if(typeof userPseudo==="function"){verifyPseudoArgs(userPseudo,name,data,1);return elem=>userPseudo(elem,data)&&next(elem)}if(name in filters){return filters[name](next,data,options,context)}if(name in pseudos){const pseudo=pseudos[name];verifyPseudoArgs(pseudo,name,data,2);return elem=>pseudo(elem,options,data)&&next(elem)}throw new Error(`Unknown pseudo-class :${name}`)}function getElementParent(node,adapter){const parent=adapter.getParent(node);if(parent&&adapter.isTag(parent)){return parent}return null}function compileGeneralSelector(next,selector,options,context,compileToken){const{adapter,equals}=options;switch(selector.type){case SelectorType.PseudoElement:{throw new Error("Pseudo-elements are not supported by css-select")}case SelectorType.ColumnCombinator:{throw new Error("Column combinators are not yet supported by css-select")}case SelectorType.Attribute:{if(selector.namespace!=null){throw new Error("Namespaced attributes are not yet supported by css-select")}if(!options.xmlMode||options.lowerCaseAttributeNames){selector.name=selector.name.toLowerCase()}return attributeRules[selector.action](next,selector,options)}case SelectorType.Pseudo:{return compilePseudoSelector(next,selector,options,context,compileToken)}case SelectorType.Tag:{if(selector.namespace!=null){throw new Error("Namespaced tag names are not yet supported by css-select")}let{name}=selector;if(!options.xmlMode||options.lowerCaseTags){name=name.toLowerCase()}return function tag(elem){return adapter.getName(elem)===name&&next(elem)}}case SelectorType.Descendant:{if(options.cacheResults===false||typeof WeakSet==="undefined"){return function descendant(elem){let current=elem;while(current=getElementParent(current,adapter)){if(next(current)){return true}}return false}}const isFalseCache=new WeakSet;return function cachedDescendant(elem){let current=elem;while(current=getElementParent(current,adapter)){if(!isFalseCache.has(current)){if(adapter.isTag(current)&&next(current)){return true}isFalseCache.add(current)}}return false}}case"_flexibleDescendant":{return function flexibleDescendant(elem){let current=elem;do{if(next(current))return true}while(current=getElementParent(current,adapter));return false}}case SelectorType.Parent:{return function parent(elem){return adapter.getChildren(elem).some((elem=>adapter.isTag(elem)&&next(elem)))}}case SelectorType.Child:{return function child(elem){const parent=adapter.getParent(elem);return parent!=null&&adapter.isTag(parent)&&next(parent)}}case SelectorType.Sibling:{return function sibling(elem){const siblings=adapter.getSiblings(elem);for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling))break;if(adapter.isTag(currentSibling)&&next(currentSibling)){return true}}return false}}case SelectorType.Adjacent:{if(adapter.prevElementSibling){return function adjacent(elem){const previous=adapter.prevElementSibling(elem);return previous!=null&&next(previous)}}return function adjacent(elem){const siblings=adapter.getSiblings(elem);let lastElement;for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling))break;if(adapter.isTag(currentSibling)){lastElement=currentSibling}}return!!lastElement&&next(lastElement)}}case SelectorType.Universal:{if(selector.namespace!=null&&selector.namespace!=="*"){throw new Error("Namespaced universal selectors are not yet supported by css-select")}return next}}}function compile$1(selector,options,context){const next=compileUnsafe(selector,options,context);return ensureIsTag(next,options.adapter)}function compileUnsafe(selector,options,context){const token=typeof selector==="string"?parse$6(selector):selector;return compileToken(token,options,context)}function includesScopePseudo(t){return t.type===SelectorType.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some((data=>data.some(includesScopePseudo))))}const DESCENDANT_TOKEN={type:SelectorType.Descendant};const FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"};const SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(token,{adapter},context){const hasContext=!!(context===null||context===void 0?void 0:context.every((e=>{const parent=adapter.isTag(e)&&adapter.getParent(e);return e===PLACEHOLDER_ELEMENT||parent&&adapter.isTag(parent)})));for(const t of token){if(t.length>0&&isTraversal(t[0])&&t[0].type!==SelectorType.Descendant);else if(hasContext&&!t.some(includesScopePseudo)){t.unshift(DESCENDANT_TOKEN)}else{continue}t.unshift(SCOPE_TOKEN)}}function compileToken(token,options,context){var _a;token.forEach(sortByProcedure);context=(_a=options.context)!==null&&_a!==void 0?_a:context;const isArrayContext=Array.isArray(context);const finalContext=context&&(Array.isArray(context)?context:[context]);if(options.relativeSelector!==false){absolutize(token,options,finalContext)}else if(token.some((t=>t.length>0&&isTraversal(t[0])))){throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled")}let shouldTestNextSiblings=false;const query=token.map((rules=>{if(rules.length>=2){const[first,second]=rules;if(first.type!==SelectorType.Pseudo||first.name!=="scope");else if(isArrayContext&&second.type===SelectorType.Descendant){rules[1]=FLEXIBLE_DESCENDANT_TOKEN}else if(second.type===SelectorType.Adjacent||second.type===SelectorType.Sibling){shouldTestNextSiblings=true}}return compileRules(rules,options,finalContext)})).reduce(reduceRules,boolbase.falseFunc);query.shouldTestNextSiblings=shouldTestNextSiblings;return query}function compileRules(rules,options,context){var _a;return rules.reduce(((previous,rule)=>previous===boolbase.falseFunc?boolbase.falseFunc:compileGeneralSelector(previous,rule,options,context,compileToken)),(_a=options.rootFunc)!==null&&_a!==void 0?_a:boolbase.trueFunc)}function reduceRules(a,b){if(b===boolbase.falseFunc||a===boolbase.trueFunc){return a}if(a===boolbase.falseFunc||b===boolbase.trueFunc){return b}return function combine(elem){return a(elem)||b(elem)}}const defaultEquals=(a,b)=>a===b;const defaultOptions={adapter:DomUtils,equals:defaultEquals};function convertOptionFormats(options){var _a,_b,_c,_d;const opts=options!==null&&options!==void 0?options:defaultOptions;(_a=opts.adapter)!==null&&_a!==void 0?_a:opts.adapter=DomUtils;(_b=opts.equals)!==null&&_b!==void 0?_b:opts.equals=(_d=(_c=opts.adapter)===null||_c===void 0?void 0:_c.equals)!==null&&_d!==void 0?_d:defaultEquals;return opts}function wrapCompile(func){return function addAdapter(selector,options,context){const opts=convertOptionFormats(options);return func(selector,opts,context)}}const compile=wrapCompile(compile$1);function is$1(elem,query,options){const opts=convertOptionFormats(options);return(typeof query==="function"?query:compile$1(query,opts))(elem)}const{isArray:isArray$2}=Array;const isTag=({nodeType})=>nodeType===ELEMENT_NODE;const existsOne=(test,elements)=>elements.some((element=>isTag(element)&&(test(element)||existsOne(test,getChildren(element)))));const getAttributeValue=(element,name)=>name==='class'?element.classList.value:element.getAttribute(name);const getChildren=({childNodes})=>childNodes;const getName=element=>{const{localName}=element;return ignoreCase(element)?localName.toLowerCase():localName};const getParent=({parentNode})=>parentNode;const getSiblings=element=>{const{parentNode}=element;return parentNode?getChildren(parentNode):element};const getText=node=>{if(isArray$2(node))return node.map(getText).join('');if(isTag(node))return getText(getChildren(node));if(node.nodeType===TEXT_NODE)return node.data;return''};const hasAttrib=(element,name)=>element.hasAttribute(name);const removeSubsets=nodes=>{let{length}=nodes;while(length--){const node=nodes[length];if(length&&-1<nodes.lastIndexOf(node,length-1)){nodes.splice(length,1);continue}for(let{parentNode}=node;parentNode;parentNode=parentNode.parentNode){if(nodes.includes(parentNode)){nodes.splice(length,1);break}}}return nodes};const findAll=(test,nodes)=>{const matches=[];for(const node of nodes){if(isTag(node)){if(test(node))matches.push(node);matches.push(...findAll(test,getChildren(node)))}}return matches};const findOne=(test,nodes)=>{for(let node of nodes)if(test(node)||(node=findOne(test,getChildren(node))))return node;return null};const adapter={isTag,existsOne,getAttributeValue,getChildren,getName,getParent,getSiblings,getText,hasAttrib,removeSubsets,findAll,findOne};const prepareMatch=(element,selectors)=>compile(selectors,{context:selectors.includes(':scope')?element:void 0,xmlMode:!ignoreCase(element),adapter});const matches=(element,selectors)=>is$1(element,selectors,{strict:true,context:selectors.includes(':scope')?element:void 0,xmlMode:!ignoreCase(element),adapter});const{replace}='';const ca=/[<>&\xA0]/g;const esca={'':'&nbsp;','&':'&amp;','<':'&lt;','>':'&gt;'};const pe=m=>esca[m];const escape$1=es=>replace.call(es,ca,pe);let Text$1=class Text extends CharacterData$1{constructor(ownerDocument,data=''){super(ownerDocument,'#text',TEXT_NODE,data)}get wholeText(){const text=[];let{previousSibling,nextSibling}=this;while(previousSibling){if(previousSibling.nodeType===TEXT_NODE)text.unshift(previousSibling[VALUE]);else break;previousSibling=previousSibling.previousSibling}text.push(this[VALUE]);while(nextSibling){if(nextSibling.nodeType===TEXT_NODE)text.push(nextSibling[VALUE]);else break;nextSibling=nextSibling.nextSibling}return text.join('')}cloneNode(){const{ownerDocument,[VALUE]:data}=this;return new Text(ownerDocument,data)}toString(){return escape$1(this[VALUE])}};const isNode=node=>node instanceof Node$1;const insert=(parentNode,child,nodes)=>{const{ownerDocument}=parentNode;for(const node of nodes)parentNode.insertBefore(isNode(node)?node:new Text$1(ownerDocument,node),child)};class ParentNode extends Node$1{constructor(ownerDocument,localName,nodeType){super(ownerDocument,localName,nodeType);this[PRIVATE]=null;this[NEXT]=this[END]={[NEXT]:null,[PREV]:this,[START]:this,nodeType:NODE_END,ownerDocument:this.ownerDocument,parentNode:null}}get childNodes(){const childNodes=new NodeList;let{firstChild}=this;while(firstChild){childNodes.push(firstChild);firstChild=nextSibling(firstChild)}return childNodes}get children(){const children=new NodeList;let{firstElementChild}=this;while(firstElementChild){children.push(firstElementChild);firstElementChild=nextElementSibling(firstElementChild)}return children}get firstChild(){let{[NEXT]:next,[END]:end}=this;while(next.nodeType===ATTRIBUTE_NODE)next=next[NEXT];return next===end?null:next}get firstElementChild(){let{firstChild}=this;while(firstChild){if(firstChild.nodeType===ELEMENT_NODE)return firstChild;firstChild=nextSibling(firstChild)}return null}get lastChild(){const prev=this[END][PREV];switch(prev.nodeType){case NODE_END:return prev[START];case ATTRIBUTE_NODE:return null}return prev===this?null:prev}get lastElementChild(){let{lastChild}=this;while(lastChild){if(lastChild.nodeType===ELEMENT_NODE)return lastChild;lastChild=previousSibling(lastChild)}return null}get childElementCount(){return this.children.length}prepend(...nodes){insert(this,this.firstChild,nodes)}append(...nodes){insert(this,this[END],nodes)}replaceChildren(...nodes){let{[NEXT]:next,[END]:end}=this;while(next!==end&&next.nodeType===ATTRIBUTE_NODE)next=next[NEXT];while(next!==end){const after=getEnd(next)[NEXT];next.remove();next=after}if(nodes.length)insert(this,end,nodes)}getElementsByClassName(className){const elements=new NodeList;let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===ELEMENT_NODE&&next.hasAttribute('class')&&next.classList.has(className))elements.push(next);next=next[NEXT]}return elements}getElementsByTagName(tagName){const elements=new NodeList;let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===ELEMENT_NODE&&(next.localName===tagName||localCase(next)===tagName))elements.push(next);next=next[NEXT]}return elements}querySelector(selectors){const matches=prepareMatch(this,selectors);let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===ELEMENT_NODE&&matches(next))return next;next=next[NEXT]}return null}querySelectorAll(selectors){const matches=prepareMatch(this,selectors);const elements=new NodeList;let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===ELEMENT_NODE&&matches(next))elements.push(next);next=next[NEXT]}return elements}appendChild(node){return this.insertBefore(node,this[END])}contains(node){let parentNode=node;while(parentNode&&parentNode!==this)parentNode=parentNode.parentNode;return parentNode===this}insertBefore(node,before=null){if(node===before)return node;if(node===this)throw new Error('unable to append a node to itself');const next=before||this[END];switch(node.nodeType){case ELEMENT_NODE:node.remove();node.parentNode=this;knownBoundaries(next[PREV],node,next);moCallback(node,null);connectedCallback(node);break;case DOCUMENT_FRAGMENT_NODE:{let{[PRIVATE]:parentNode,firstChild,lastChild}=node;if(firstChild){knownSegment(next[PREV],firstChild,lastChild,next);knownAdjacent(node,node[END]);if(parentNode)parentNode.replaceChildren();do{firstChild.parentNode=this;moCallback(firstChild,null);if(firstChild.nodeType===ELEMENT_NODE)connectedCallback(firstChild)}while(firstChild!==lastChild&&(firstChild=nextSibling(firstChild)))}break}case TEXT_NODE:case COMMENT_NODE:node.remove();default:node.parentNode=this;knownSiblings(next[PREV],node,next);moCallback(node,null);break}return node}normalize(){let{[NEXT]:next,[END]:end}=this;while(next!==end){const{[NEXT]:$next,[PREV]:$prev,nodeType}=next;if(nodeType===TEXT_NODE){if(!next[VALUE])next.remove();else if($prev&&$prev.nodeType===TEXT_NODE){$prev.textContent+=next.textContent;next.remove()}}next=$next}}removeChild(node){if(node.parentNode!==this)throw new Error('node is not a child');node.remove();return node}replaceChild(node,replaced){const next=getEnd(replaced)[NEXT];replaced.remove();this.insertBefore(node,next);return replaced}}class NonElementParentNode extends ParentNode{getElementById(id){let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===ELEMENT_NODE&&next.id===id)return next;next=next[NEXT]}return null}cloneNode(deep){const{ownerDocument,constructor}=this;const nonEPN=new constructor(ownerDocument);if(deep){const{[END]:end}=nonEPN;for(const node of this.childNodes)nonEPN.insertBefore(node.cloneNode(deep),end)}return nonEPN}toString(){const{childNodes,localName}=this;return`<${localName}>${childNodes.join('')}</${localName}>`}toJSON(){const json=[];nonElementAsJSON(this,json);return json}}let DocumentFragment$1=class DocumentFragment extends NonElementParentNode{constructor(ownerDocument){super(ownerDocument,'#document-fragment',DOCUMENT_FRAGMENT_NODE)}};let DocumentType$1=class DocumentType extends Node$1{constructor(ownerDocument,name,publicId='',systemId=''){super(ownerDocument,'#document-type',DOCUMENT_TYPE_NODE);this.name=name;this.publicId=publicId;this.systemId=systemId}cloneNode(){const{ownerDocument,name,publicId,systemId}=this;return new DocumentType(ownerDocument,name,publicId,systemId)}toString(){const{name,publicId,systemId}=this;const hasPublic=0<publicId.length;const str=[name];if(hasPublic)str.push('PUBLIC',`"${publicId}"`);if(systemId.length){if(!hasPublic)str.push('SYSTEM');str.push(`"${systemId}"`)}return`<!DOCTYPE ${str.join(' ')}>`}toJSON(){const json=[];documentTypeAsJSON(this,json);return json}};const getInnerHtml=node=>node.childNodes.join('');const setInnerHtml=(node,html)=>{const{ownerDocument}=node;const{constructor}=ownerDocument;const document=new constructor;document[CUSTOM_ELEMENTS]=ownerDocument[CUSTOM_ELEMENTS];const{childNodes}=parseFromString(document,ignoreCase(node),html);node.replaceChildren(...childNodes.map(setOwnerDocument,ownerDocument))};function setOwnerDocument(node){node.ownerDocument=this;switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:node.childNodes.forEach(setOwnerDocument,this);break}return node}const uhyphen=camel=>camel.replace(/(([A-Z0-9])([A-Z0-9][a-z]))|(([a-z0-9]+)([A-Z]))/g,'$2$5-$3$6').toLowerCase();const refs$1=new WeakMap;const key=name=>`data-${uhyphen(name)}`;const prop=name=>name.slice(5).replace(/-([a-z])/g,((_,$1)=>$1.toUpperCase()));const handler$2={get(dataset,name){if(name in dataset)return refs$1.get(dataset).getAttribute(key(name))},set(dataset,name,value){dataset[name]=value;refs$1.get(dataset).setAttribute(key(name),value);return true},deleteProperty(dataset,name){if(name in dataset)refs$1.get(dataset).removeAttribute(key(name));return delete dataset[name]}};class DOMStringMap{constructor(ref){for(const{name,value}of ref.attributes){if(/^data-/.test(name))this[prop(name)]=value}refs$1.set(this,ref);return new Proxy(this,handler$2)}}setPrototypeOf(DOMStringMap.prototype,null);const{add:add$1}=Set.prototype;const addTokens=(self,tokens)=>{for(const token of tokens){if(token)add$1.call(self,token)}};const update=({[OWNER_ELEMENT]:ownerElement,value})=>{const attribute=ownerElement.getAttributeNode('class');if(attribute)attribute.value=value;else setAttribute(ownerElement,new Attr$1(ownerElement.ownerDocument,'class',value))};class DOMTokenList extends Set{constructor(ownerElement){super();this[OWNER_ELEMENT]=ownerElement;const attribute=ownerElement.getAttributeNode('class');if(attribute)addTokens(this,attribute.value.split(/\s+/))}get length(){return this.size}get value(){return[...this].join(' ')}add(...tokens){addTokens(this,tokens);update(this)}contains(token){return this.has(token)}remove(...tokens){for(const token of tokens)this.delete(token);update(this)}toggle(token,force){if(this.has(token)){if(force)return true;this.delete(token);update(this)}else if(force||arguments.length===1){super.add(token);update(this);return true}return false}replace(token,newToken){if(this.has(token)){this.delete(token);super.add(newToken);update(this);return true}return false}supports(){return true}}const refs=new WeakMap;const getKeys=style=>[...style.keys()].filter((key=>key!==PRIVATE));const updateKeys=style=>{const attr=refs.get(style).getAttributeNode('style');if(!attr||attr[CHANGED]||style.get(PRIVATE)!==attr){style.clear();if(attr){style.set(PRIVATE,attr);for(const rule of attr[VALUE].split(/\s*;\s*/)){let[key,...rest]=rule.split(':');if(rest.length>0){key=key.trim();const value=rest.join(':').trim();if(key&&value)style.set(key,value)}}}}return attr};const handler$1={get(style,name){if(name in prototype)return style[name];updateKeys(style);if(name==='length')return getKeys(style).length;if(/^\d+$/.test(name))return getKeys(style)[name];return style.get(uhyphen(name))},set(style,name,value){if(name==='cssText')style[name]=value;else{let attr=updateKeys(style);if(value==null)style.delete(uhyphen(name));else style.set(uhyphen(name),value);if(!attr){const element=refs.get(style);attr=element.ownerDocument.createAttribute('style');element.setAttributeNode(attr);style.set(PRIVATE,attr)}attr[CHANGED]=false;attr[VALUE]=style.toString()}return true}};let CSSStyleDeclaration$1=class CSSStyleDeclaration extends Map{constructor(element){super();refs.set(this,element);return new Proxy(this,handler$1)}get cssText(){return this.toString()}set cssText(value){refs.get(this).setAttribute('style',value)}getPropertyValue(name){const self=this[PRIVATE];return handler$1.get(self,name)}setProperty(name,value){const self=this[PRIVATE];handler$1.set(self,name,value)}removeProperty(name){const self=this[PRIVATE];handler$1.set(self,name,null)}[Symbol.iterator](){const keys=getKeys(this[PRIVATE]);const{length}=keys;let i=0;return{next(){const done=i===length;return{done,value:done?null:keys[i++]}}}}get[PRIVATE](){return this}toString(){const self=this[PRIVATE];updateKeys(self);const cssText=[];self.forEach(push$1,cssText);return cssText.join(';')}};const{prototype}=CSSStyleDeclaration$1;function push$1(value,key){if(key!==PRIVATE)this.push(`${key}:${value}`)}const BUBBLING_PHASE=3;const AT_TARGET=2;const CAPTURING_PHASE=1;const NONE$1=0;class GlobalEvent{static get BUBBLING_PHASE(){return BUBBLING_PHASE}static get AT_TARGET(){return AT_TARGET}static get CAPTURING_PHASE(){return CAPTURING_PHASE}static get NONE(){return NONE$1}constructor(type,eventInitDict={}){this.type=type;this.bubbles=!!eventInitDict.bubbles;this.cancelBubble=false;this._stopImmediatePropagationFlag=false;this.cancelable=!!eventInitDict.cancelable;this.eventPhase=this.NONE;this.timeStamp=Date.now();this.defaultPrevented=false;this.originalTarget=null;this.returnValue=null;this.srcElement=null;this.target=null;this._path=[]}get BUBBLING_PHASE(){return BUBBLING_PHASE}get AT_TARGET(){return AT_TARGET}get CAPTURING_PHASE(){return CAPTURING_PHASE}get NONE(){return NONE$1}preventDefault(){this.defaultPrevented=true}composedPath(){return this._path}stopPropagation(){this.cancelBubble=true}stopImmediatePropagation(){this.stopPropagation();this._stopImmediatePropagationFlag=true}}class NamedNodeMap extends Array{constructor(ownerElement){super();this.ownerElement=ownerElement}getNamedItem(name){return this.ownerElement.getAttributeNode(name)}setNamedItem(attr){this.ownerElement.setAttributeNode(attr);this.unshift(attr)}removeNamedItem(name){const item=this.getNamedItem(name);this.ownerElement.removeAttribute(name);this.splice(this.indexOf(item),1)}item(index){return index<this.length?this[index]:null}getNamedItemNS(_,name){return this.getNamedItem(name)}setNamedItemNS(_,attr){return this.setNamedItem(attr)}removeNamedItemNS(_,name){return this.removeNamedItem(name)}}let ShadowRoot$1=class ShadowRoot extends NonElementParentNode{constructor(host){super(host.ownerDocument,'#shadow-root',DOCUMENT_FRAGMENT_NODE);this.host=host}get innerHTML(){return getInnerHtml(this)}set innerHTML(html){setInnerHtml(this,html)}};const attributesHandler={get(target,key){return key in target?target[key]:target.find((({name})=>name===key))}};const create$2=(ownerDocument,element,localName)=>{if('ownerSVGElement'in element){const svg=ownerDocument.createElementNS(SVG_NAMESPACE,localName);svg.ownerSVGElement=element.ownerSVGElement;return svg}return ownerDocument.createElement(localName)};const isVoid=({localName,ownerDocument})=>ownerDocument[MIME].voidElements.test(localName);let Element$1=class Element extends ParentNode{constructor(ownerDocument,localName){super(ownerDocument,localName,ELEMENT_NODE);this[CLASS_LIST]=null;this[DATASET]=null;this[STYLE]=null}get isConnected(){return isConnected(this)}get parentElement(){return parentElement(this)}get previousSibling(){return previousSibling(this)}get nextSibling(){return nextSibling(this)}get namespaceURI(){return'http://www.w3.org/1999/xhtml'}get previousElementSibling(){return previousElementSibling(this)}get nextElementSibling(){return nextElementSibling(this)}before(...nodes){before(this,nodes)}after(...nodes){after(this,nodes)}replaceWith(...nodes){replaceWith(this,nodes)}remove(){remove(this[PREV],this,this[END][NEXT])}get id(){return stringAttribute.get(this,'id')}set id(value){stringAttribute.set(this,'id',value)}get className(){return this.classList.value}set className(value){const{classList}=this;classList.clear();classList.add(...value.split(/\s+/))}get nodeName(){return localCase(this)}get tagName(){return localCase(this)}get classList(){return this[CLASS_LIST]||(this[CLASS_LIST]=new DOMTokenList(this))}get dataset(){return this[DATASET]||(this[DATASET]=new DOMStringMap(this))}get nonce(){return stringAttribute.get(this,'nonce')}set nonce(value){stringAttribute.set(this,'nonce',value)}get style(){return this[STYLE]||(this[STYLE]=new CSSStyleDeclaration$1(this))}get tabIndex(){return numericAttribute.get(this,'tabindex')||-1}set tabIndex(value){numericAttribute.set(this,'tabindex',value)}get innerText(){const text=[];let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===TEXT_NODE){text.push(next.textContent.replace(/\s+/g,' '))}else if(text.length&&next[NEXT]!=end&&BLOCK_ELEMENTS.has(next.tagName)){text.push('\n')}next=next[NEXT]}return text.join('')}get textContent(){const text=[];let{[NEXT]:next,[END]:end}=this;while(next!==end){if(next.nodeType===TEXT_NODE)text.push(next.textContent);next=next[NEXT]}return text.join('')}set textContent(text){this.replaceChildren();if(text)this.appendChild(new Text$1(this.ownerDocument,text))}get innerHTML(){return getInnerHtml(this)}set innerHTML(html){setInnerHtml(this,html)}get outerHTML(){return this.toString()}set outerHTML(html){const template=this.ownerDocument.createElement('');template.innerHTML=html;this.replaceWith(...template.childNodes)}get attributes(){const attributes=new NamedNodeMap(this);let next=this[NEXT];while(next.nodeType===ATTRIBUTE_NODE){attributes.push(next);next=next[NEXT]}return new Proxy(attributes,attributesHandler)}focus(){this.dispatchEvent(new GlobalEvent('focus'))}getAttribute(name){if(name==='class')return this.className;const attribute=this.getAttributeNode(name);return attribute&&attribute.value}getAttributeNode(name){let next=this[NEXT];while(next.nodeType===ATTRIBUTE_NODE){if(next.name===name)return next;next=next[NEXT]}return null}getAttributeNames(){const attributes=new NodeList;let next=this[NEXT];while(next.nodeType===ATTRIBUTE_NODE){attributes.push(next.name);next=next[NEXT]}return attributes}hasAttribute(name){return!!this.getAttributeNode(name)}hasAttributes(){return this[NEXT].nodeType===ATTRIBUTE_NODE}removeAttribute(name){if(name==='class'&&this[CLASS_LIST])this[CLASS_LIST].clear();let next=this[NEXT];while(next.nodeType===ATTRIBUTE_NODE){if(next.name===name){removeAttribute(this,next);return}next=next[NEXT]}}removeAttributeNode(attribute){let next=this[NEXT];while(next.nodeType===ATTRIBUTE_NODE){if(next===attribute){removeAttribute(this,next);return}next=next[NEXT]}}setAttribute(name,value){if(name==='class')this.className=value;else{const attribute=this.getAttributeNode(name);if(attribute)attribute.value=value;else setAttribute(this,new Attr$1(this.ownerDocument,name,value))}}setAttributeNode(attribute){const{name}=attribute;const previously=this.getAttributeNode(name);if(previously!==attribute){if(previously)this.removeAttributeNode(previously);const{ownerElement}=attribute;if(ownerElement)ownerElement.removeAttributeNode(attribute);setAttribute(this,attribute)}return previously}toggleAttribute(name,force){if(this.hasAttribute(name)){if(!force){this.removeAttribute(name);return false}return true}else if(force||arguments.length===1){this.setAttribute(name,'');return true}return false}get shadowRoot(){if(shadowRoots.has(this)){const{mode,shadowRoot}=shadowRoots.get(this);if(mode==='open')return shadowRoot}return null}attachShadow(init){if(shadowRoots.has(this))throw new Error('operation not supported');const shadowRoot=new ShadowRoot$1(this);shadowRoot.append(...this.childNodes);shadowRoots.set(this,{mode:init.mode,shadowRoot});return shadowRoot}matches(selectors){return matches(this,selectors)}closest(selectors){let parentElement=this;const matches=prepareMatch(parentElement,selectors);while(parentElement&&!matches(parentElement))parentElement=parentElement.parentElement;return parentElement}insertAdjacentElement(position,element){const{parentElement}=this;switch(position){case'beforebegin':if(parentElement){parentElement.insertBefore(element,this);break}return null;case'afterbegin':this.insertBefore(element,this.firstChild);break;case'beforeend':this.insertBefore(element,null);break;case'afterend':if(parentElement){parentElement.insertBefore(element,this.nextSibling);break}return null}return element}insertAdjacentHTML(position,html){const template=this.ownerDocument.createElement('template');template.innerHTML=html;this.insertAdjacentElement(position,template.content)}insertAdjacentText(position,text){const node=this.ownerDocument.createTextNode(text);this.insertAdjacentElement(position,node)}cloneNode(deep=false){const{ownerDocument,localName}=this;const addNext=next=>{next.parentNode=parentNode;knownAdjacent($next,next);$next=next};const clone=create$2(ownerDocument,this,localName);let parentNode=clone,$next=clone;let{[NEXT]:next,[END]:prev}=this;while(next!==prev&&(deep||next.nodeType===ATTRIBUTE_NODE)){switch(next.nodeType){case NODE_END:knownAdjacent($next,parentNode[END]);$next=parentNode[END];parentNode=parentNode.parentNode;break;case ELEMENT_NODE:{const node=create$2(ownerDocument,next,next.localName);addNext(node);parentNode=node;break}case ATTRIBUTE_NODE:{const attr=next.cloneNode(deep);attr.ownerElement=parentNode;addNext(attr);break}case TEXT_NODE:case COMMENT_NODE:addNext(next.cloneNode(deep));break}next=next[NEXT]}knownAdjacent($next,clone[END]);return clone}toString(){const out=[];const{[END]:end}=this;let next={[NEXT]:this};let isOpened=false;do{next=next[NEXT];switch(next.nodeType){case ATTRIBUTE_NODE:{const attr=' '+next;switch(attr){case' id':case' class':case' style':break;default:out.push(attr)}break}case NODE_END:{const start=next[START];if(isOpened){if('ownerSVGElement'in start)out.push(' />');else if(isVoid(start))out.push(ignoreCase(start)?'>':' />');else out.push(`></${start.localName}>`);isOpened=false}else out.push(`</${start.localName}>`);break}case ELEMENT_NODE:if(isOpened)out.push('>');if(next.toString!==this.toString){out.push(next.toString());next=next[END];isOpened=false}else{out.push(`<${next.localName}`);isOpened=true}break;case TEXT_NODE:case COMMENT_NODE:out.push((isOpened?'>':'')+next);isOpened=false;break}}while(next!==end);return out.join('')}toJSON(){const json=[];elementAsJSON(this,json);return json}getAttributeNS(_,name){return this.getAttribute(name)}getElementsByTagNameNS(_,name){return this.getElementsByTagName(name)}hasAttributeNS(_,name){return this.hasAttribute(name)}removeAttributeNS(_,name){this.removeAttribute(name)}setAttributeNS(_,name,value){this.setAttribute(name,value)}setAttributeNodeNS(attr){return this.setAttributeNode(attr)}};const classNames=new WeakMap;const handler={get(target,name){return target[name]},set(target,name,value){target[name]=value;return true}};let SVGElement$1=class SVGElement extends Element$1{constructor(ownerDocument,localName,ownerSVGElement=null){super(ownerDocument,localName);this.ownerSVGElement=ownerSVGElement}get className(){if(!classNames.has(this))classNames.set(this,new Proxy({baseVal:'',animVal:''},handler));return classNames.get(this)}set className(value){const{classList}=this;classList.clear();classList.add(...value.split(/\s+/))}get namespaceURI(){return'http://www.w3.org/2000/svg'}getAttribute(name){return name==='class'?[...this.classList].join(' '):super.getAttribute(name)}setAttribute(name,value){if(name==='class')this.className=value;else if(name==='style'){const{className}=this;className.baseVal=className.animVal=value}super.setAttribute(name,value)}};const illegalConstructor=()=>{throw new TypeError('Illegal constructor')};function Attr(){illegalConstructor()}setPrototypeOf(Attr,Attr$1);Attr.prototype=Attr$1.prototype;function CharacterData(){illegalConstructor()}setPrototypeOf(CharacterData,CharacterData$1);CharacterData.prototype=CharacterData$1.prototype;function Comment(){illegalConstructor()}setPrototypeOf(Comment,Comment$1);Comment.prototype=Comment$1.prototype;function DocumentFragment(){illegalConstructor()}setPrototypeOf(DocumentFragment,DocumentFragment$1);DocumentFragment.prototype=DocumentFragment$1.prototype;function DocumentType(){illegalConstructor()}setPrototypeOf(DocumentType,DocumentType$1);DocumentType.prototype=DocumentType$1.prototype;function Element(){illegalConstructor()}setPrototypeOf(Element,Element$1);Element.prototype=Element$1.prototype;function Node(){illegalConstructor()}setPrototypeOf(Node,Node$1);Node.prototype=Node$1.prototype;function ShadowRoot(){illegalConstructor()}setPrototypeOf(ShadowRoot,ShadowRoot$1);ShadowRoot.prototype=ShadowRoot$1.prototype;function Text(){illegalConstructor()}setPrototypeOf(Text,Text$1);Text.prototype=Text$1.prototype;function SVGElement(){illegalConstructor()}setPrototypeOf(SVGElement,SVGElement$1);SVGElement.prototype=SVGElement$1.prototype;const Facades={Attr,CharacterData,Comment,DocumentFragment,DocumentType,Element,Node,ShadowRoot,Text,SVGElement};const Level0=new WeakMap;const level0={get(element,name){return Level0.has(element)&&Level0.get(element)[name]||null},set(element,name,value){if(!Level0.has(element))Level0.set(element,{});const handlers=Level0.get(element);const type=name.slice(2);if(handlers[name])element.removeEventListener(type,handlers[name],false);if(handlers[name]=value)element.addEventListener(type,value,false)}};class HTMLElement extends Element$1{static get observedAttributes(){return[]}constructor(ownerDocument=null,localName=''){super(ownerDocument,localName);const ownerLess=!ownerDocument;let options;if(ownerLess){const{constructor:Class}=this;if(!Classes.has(Class))throw new Error('unable to initialize this Custom Element');({ownerDocument,localName,options}=Classes.get(Class))}if(ownerDocument[UPGRADE]){const{element,values}=ownerDocument[UPGRADE];ownerDocument[UPGRADE]=null;for(const[key,value]of values)element[key]=value;return element}if(ownerLess){this.ownerDocument=this[END].ownerDocument=ownerDocument;this.localName=localName;customElements.set(this,{connected:false});if(options.is)this.setAttribute('is',options.is)}}blur(){this.dispatchEvent(new GlobalEvent('blur'))}click(){this.dispatchEvent(new GlobalEvent('click'))}get accessKeyLabel(){const{accessKey}=this;return accessKey&&`Alt+Shift+${accessKey}`}get isContentEditable(){return this.hasAttribute('contenteditable')}get contentEditable(){return booleanAttribute.get(this,'contenteditable')}set contentEditable(value){booleanAttribute.set(this,'contenteditable',value)}get draggable(){return booleanAttribute.get(this,'draggable')}set draggable(value){booleanAttribute.set(this,'draggable',value)}get hidden(){return booleanAttribute.get(this,'hidden')}set hidden(value){booleanAttribute.set(this,'hidden',value)}get spellcheck(){return booleanAttribute.get(this,'spellcheck')}set spellcheck(value){booleanAttribute.set(this,'spellcheck',value)}get accessKey(){return stringAttribute.get(this,'accesskey')}set accessKey(value){stringAttribute.set(this,'accesskey',value)}get dir(){return stringAttribute.get(this,'dir')}set dir(value){stringAttribute.set(this,'dir',value)}get lang(){return stringAttribute.get(this,'lang')}set lang(value){stringAttribute.set(this,'lang',value)}get title(){return stringAttribute.get(this,'title')}set title(value){stringAttribute.set(this,'title',value)}get onabort(){return level0.get(this,'onabort')}set onabort(value){level0.set(this,'onabort',value)}get onblur(){return level0.get(this,'onblur')}set onblur(value){level0.set(this,'onblur',value)}get oncancel(){return level0.get(this,'oncancel')}set oncancel(value){level0.set(this,'oncancel',value)}get oncanplay(){return level0.get(this,'oncanplay')}set oncanplay(value){level0.set(this,'oncanplay',value)}get oncanplaythrough(){return level0.get(this,'oncanplaythrough')}set oncanplaythrough(value){level0.set(this,'oncanplaythrough',value)}get onchange(){return level0.get(this,'onchange')}set onchange(value){level0.set(this,'onchange',value)}get onclick(){return level0.get(this,'onclick')}set onclick(value){level0.set(this,'onclick',value)}get onclose(){return level0.get(this,'onclose')}set onclose(value){level0.set(this,'onclose',value)}get oncontextmenu(){return level0.get(this,'oncontextmenu')}set oncontextmenu(value){level0.set(this,'oncontextmenu',value)}get oncuechange(){return level0.get(this,'oncuechange')}set oncuechange(value){level0.set(this,'oncuechange',value)}get ondblclick(){return level0.get(this,'ondblclick')}set ondblclick(value){level0.set(this,'ondblclick',value)}get ondrag(){return level0.get(this,'ondrag')}set ondrag(value){level0.set(this,'ondrag',value)}get ondragend(){return level0.get(this,'ondragend')}set ondragend(value){level0.set(this,'ondragend',value)}get ondragenter(){return level0.get(this,'ondragenter')}set ondragenter(value){level0.set(this,'ondragenter',value)}get ondragleave(){return level0.get(this,'ondragleave')}set ondragleave(value){level0.set(this,'ondragleave',value)}get ondragover(){return level0.get(this,'ondragover')}set ondragover(value){level0.set(this,'ondragover',value)}get ondragstart(){return level0.get(this,'ondragstart')}set ondragstart(value){level0.set(this,'ondragstart',value)}get ondrop(){return level0.get(this,'ondrop')}set ondrop(value){level0.set(this,'ondrop',value)}get ondurationchange(){return level0.get(this,'ondurationchange')}set ondurationchange(value){level0.set(this,'ondurationchange',value)}get onemptied(){return level0.get(this,'onemptied')}set onemptied(value){level0.set(this,'onemptied',value)}get onended(){return level0.get(this,'onended')}set onended(value){level0.set(this,'onended',value)}get onerror(){return level0.get(this,'onerror')}set onerror(value){level0.set(this,'onerror',value)}get onfocus(){return level0.get(this,'onfocus')}set onfocus(value){level0.set(this,'onfocus',value)}get oninput(){return level0.get(this,'oninput')}set oninput(value){level0.set(this,'oninput',value)}get oninvalid(){return level0.get(this,'oninvalid')}set oninvalid(value){level0.set(this,'oninvalid',value)}get onkeydown(){return level0.get(this,'onkeydown')}set onkeydown(value){level0.set(this,'onkeydown',value)}get onkeypress(){return level0.get(this,'onkeypress')}set onkeypress(value){level0.set(this,'onkeypress',value)}get onkeyup(){return level0.get(this,'onkeyup')}set onkeyup(value){level0.set(this,'onkeyup',value)}get onload(){return level0.get(this,'onload')}set onload(value){level0.set(this,'onload',value)}get onloadeddata(){return level0.get(this,'onloadeddata')}set onloadeddata(value){level0.set(this,'onloadeddata',value)}get onloadedmetadata(){return level0.get(this,'onloadedmetadata')}set onloadedmetadata(value){level0.set(this,'onloadedmetadata',value)}get onloadstart(){return level0.get(this,'onloadstart')}set onloadstart(value){level0.set(this,'onloadstart',value)}get onmousedown(){return level0.get(this,'onmousedown')}set onmousedown(value){level0.set(this,'onmousedown',value)}get onmouseenter(){return level0.get(this,'onmouseenter')}set onmouseenter(value){level0.set(this,'onmouseenter',value)}get onmouseleave(){return level0.get(this,'onmouseleave')}set onmouseleave(value){level0.set(this,'onmouseleave',value)}get onmousemove(){return level0.get(this,'onmousemove')}set onmousemove(value){level0.set(this,'onmousemove',value)}get onmouseout(){return level0.get(this,'onmouseout')}set onmouseout(value){level0.set(this,'onmouseout',value)}get onmouseover(){return level0.get(this,'onmouseover')}set onmouseover(value){level0.set(this,'onmouseover',value)}get onmouseup(){return level0.get(this,'onmouseup')}set onmouseup(value){level0.set(this,'onmouseup',value)}get onmousewheel(){return level0.get(this,'onmousewheel')}set onmousewheel(value){level0.set(this,'onmousewheel',value)}get onpause(){return level0.get(this,'onpause')}set onpause(value){level0.set(this,'onpause',value)}get onplay(){return level0.get(this,'onplay')}set onplay(value){level0.set(this,'onplay',value)}get onplaying(){return level0.get(this,'onplaying')}set onplaying(value){level0.set(this,'onplaying',value)}get onprogress(){return level0.get(this,'onprogress')}set onprogress(value){level0.set(this,'onprogress',value)}get onratechange(){return level0.get(this,'onratechange')}set onratechange(value){level0.set(this,'onratechange',value)}get onreset(){return level0.get(this,'onreset')}set onreset(value){level0.set(this,'onreset',value)}get onresize(){return level0.get(this,'onresize')}set onresize(value){level0.set(this,'onresize',value)}get onscroll(){return level0.get(this,'onscroll')}set onscroll(value){level0.set(this,'onscroll',value)}get onseeked(){return level0.get(this,'onseeked')}set onseeked(value){level0.set(this,'onseeked',value)}get onseeking(){return level0.get(this,'onseeking')}set onseeking(value){level0.set(this,'onseeking',value)}get onselect(){return level0.get(this,'onselect')}set onselect(value){level0.set(this,'onselect',value)}get onshow(){return level0.get(this,'onshow')}set onshow(value){level0.set(this,'onshow',value)}get onstalled(){return level0.get(this,'onstalled')}set onstalled(value){level0.set(this,'onstalled',value)}get onsubmit(){return level0.get(this,'onsubmit')}set onsubmit(value){level0.set(this,'onsubmit',value)}get onsuspend(){return level0.get(this,'onsuspend')}set onsuspend(value){level0.set(this,'onsuspend',value)}get ontimeupdate(){return level0.get(this,'ontimeupdate')}set ontimeupdate(value){level0.set(this,'ontimeupdate',value)}get ontoggle(){return level0.get(this,'ontoggle')}set ontoggle(value){level0.set(this,'ontoggle',value)}get onvolumechange(){return level0.get(this,'onvolumechange')}set onvolumechange(value){level0.set(this,'onvolumechange',value)}get onwaiting(){return level0.get(this,'onwaiting')}set onwaiting(value){level0.set(this,'onwaiting',value)}get onauxclick(){return level0.get(this,'onauxclick')}set onauxclick(value){level0.set(this,'onauxclick',value)}get ongotpointercapture(){return level0.get(this,'ongotpointercapture')}set ongotpointercapture(value){level0.set(this,'ongotpointercapture',value)}get onlostpointercapture(){return level0.get(this,'onlostpointercapture')}set onlostpointercapture(value){level0.set(this,'onlostpointercapture',value)}get onpointercancel(){return level0.get(this,'onpointercancel')}set onpointercancel(value){level0.set(this,'onpointercancel',value)}get onpointerdown(){return level0.get(this,'onpointerdown')}set onpointerdown(value){level0.set(this,'onpointerdown',value)}get onpointerenter(){return level0.get(this,'onpointerenter')}set onpointerenter(value){level0.set(this,'onpointerenter',value)}get onpointerleave(){return level0.get(this,'onpointerleave')}set onpointerleave(value){level0.set(this,'onpointerleave',value)}get onpointermove(){return level0.get(this,'onpointermove')}set onpointermove(value){level0.set(this,'onpointermove',value)}get onpointerout(){return level0.get(this,'onpointerout')}set onpointerout(value){level0.set(this,'onpointerout',value)}get onpointerover(){return level0.get(this,'onpointerover')}set onpointerover(value){level0.set(this,'onpointerover',value)}get onpointerup(){return level0.get(this,'onpointerup')}set onpointerup(value){level0.set(this,'onpointerup',value)}}const tagName$g='template';class HTMLTemplateElement extends HTMLElement{constructor(ownerDocument){super(ownerDocument,tagName$g);const content=this.ownerDocument.createDocumentFragment();(this[CONTENT]=content)[PRIVATE]=this}get content(){if(this.hasChildNodes()&&!this[CONTENT].hasChildNodes()){for(const node of this.childNodes)this[CONTENT].appendChild(node.cloneNode(true))}return this[CONTENT]}}registerHTMLClass(tagName$g,HTMLTemplateElement);class HTMLHtmlElement extends HTMLElement{constructor(ownerDocument,localName='html'){super(ownerDocument,localName)}}const{toString}=HTMLElement.prototype;class TextElement extends HTMLElement{get innerHTML(){return this.textContent}set innerHTML(html){this.textContent=html}toString(){const outerHTML=toString.call(this.cloneNode());return outerHTML.replace(/></,`>${this.textContent}<`)}}const tagName$f='script';class HTMLScriptElement extends TextElement{constructor(ownerDocument,localName=tagName$f){super(ownerDocument,localName)}get type(){return stringAttribute.get(this,'type')}set type(value){stringAttribute.set(this,'type',value)}get src(){return stringAttribute.get(this,'src')}set src(value){stringAttribute.set(this,'src',value)}get defer(){return booleanAttribute.get(this,'defer')}set defer(value){booleanAttribute.set(this,'defer',value)}get crossOrigin(){return stringAttribute.get(this,'crossorigin')}set crossOrigin(value){stringAttribute.set(this,'crossorigin',value)}get nomodule(){return booleanAttribute.get(this,'nomodule')}set nomodule(value){booleanAttribute.set(this,'nomodule',value)}get referrerPolicy(){return stringAttribute.get(this,'referrerpolicy')}set referrerPolicy(value){stringAttribute.set(this,'referrerpolicy',value)}get nonce(){return stringAttribute.get(this,'nonce')}set nonce(value){stringAttribute.set(this,'nonce',value)}get async(){return booleanAttribute.get(this,'async')}set async(value){booleanAttribute.set(this,'async',value)}get text(){return this.textContent}set text(content){this.textContent=content}}registerHTMLClass(tagName$f,HTMLScriptElement);class HTMLFrameElement extends HTMLElement{constructor(ownerDocument,localName='frame'){super(ownerDocument,localName)}}const tagName$e='iframe';class HTMLIFrameElement extends HTMLElement{constructor(ownerDocument,localName=tagName$e){super(ownerDocument,localName)}get src(){return stringAttribute.get(this,'src')}set src(value){stringAttribute.set(this,'src',value)}get srcdoc(){return stringAttribute.get(this,"srcdoc")}set srcdoc(value){stringAttribute.set(this,"srcdoc",value)}get name(){return stringAttribute.get(this,"name")}set name(value){stringAttribute.set(this,"name",value)}get allow(){return stringAttribute.get(this,"allow")}set allow(value){stringAttribute.set(this,"allow",value)}get allowFullscreen(){return booleanAttribute.get(this,"allowfullscreen")}set allowFullscreen(value){booleanAttribute.set(this,"allowfullscreen",value)}get referrerPolicy(){return stringAttribute.get(this,"referrerpolicy")}set referrerPolicy(value){stringAttribute.set(this,"referrerpolicy",value)}get loading(){return stringAttribute.get(this,"loading")}set loading(value){stringAttribute.set(this,"loading",value)}}registerHTMLClass(tagName$e,HTMLIFrameElement);class HTMLObjectElement extends HTMLElement{constructor(ownerDocument,localName='object'){super(ownerDocument,localName)}}class HTMLHeadElement extends HTMLElement{constructor(ownerDocument,localName='head'){super(ownerDocument,localName)}}class HTMLBodyElement extends HTMLElement{constructor(ownerDocument,localName='body'){super(ownerDocument,localName)}}var CSSStyleDeclaration={};var parse$4={};var CSSStyleSheet={};var StyleSheet={};var CSSOM$c={};CSSOM$c.StyleSheet=function StyleSheet(){this.parentStyleSheet=null};StyleSheet.StyleSheet=CSSOM$c.StyleSheet;var CSSStyleRule={};var CSSRule={};var CSSOM$b={};CSSOM$b.CSSRule=function CSSRule(){this.parentRule=null;this.parentStyleSheet=null};CSSOM$b.CSSRule.UNKNOWN_RULE=0;CSSOM$b.CSSRule.STYLE_RULE=1;CSSOM$b.CSSRule.CHARSET_RULE=2;CSSOM$b.CSSRule.IMPORT_RULE=3;CSSOM$b.CSSRule.MEDIA_RULE=4;CSSOM$b.CSSRule.FONT_FACE_RULE=5;CSSOM$b.CSSRule.PAGE_RULE=6;CSSOM$b.CSSRule.KEYFRAMES_RULE=7;CSSOM$b.CSSRule.KEYFRAME_RULE=8;CSSOM$b.CSSRule.MARGIN_RULE=9;CSSOM$b.CSSRule.NAMESPACE_RULE=10;CSSOM$b.CSSRule.COUNTER_STYLE_RULE=11;CSSOM$b.CSSRule.SUPPORTS_RULE=12;CSSOM$b.CSSRule.DOCUMENT_RULE=13;CSSOM$b.CSSRule.FONT_FEATURE_VALUES_RULE=14;CSSOM$b.CSSRule.VIEWPORT_RULE=15;CSSOM$b.CSSRule.REGION_STYLE_RULE=16;CSSOM$b.CSSRule.prototype={constructor:CSSOM$b.CSSRule};CSSRule.CSSRule=CSSOM$b.CSSRule;var hasRequiredCSSStyleRule;function requireCSSStyleRule(){if(hasRequiredCSSStyleRule)return CSSStyleRule;hasRequiredCSSStyleRule=1;var CSSOM={CSSStyleDeclaration:requireCSSStyleDeclaration().CSSStyleDeclaration,CSSRule:CSSRule.CSSRule};CSSOM.CSSStyleRule=function CSSStyleRule(){CSSOM.CSSRule.call(this);this.selectorText="";this.style=new CSSOM.CSSStyleDeclaration;this.style.parentRule=this};CSSOM.CSSStyleRule.prototype=new CSSOM.CSSRule;CSSOM.CSSStyleRule.prototype.constructor=CSSOM.CSSStyleRule;CSSOM.CSSStyleRule.prototype.type=1;Object.defineProperty(CSSOM.CSSStyleRule.prototype,"cssText",{get:function(){var text;if(this.selectorText){text=this.selectorText+" {"+this.style.cssText+"}"}else{text=""}return text},set:function(cssText){var rule=CSSOM.CSSStyleRule.parse(cssText);this.style=rule.style;this.selectorText=rule.selectorText}});CSSOM.CSSStyleRule.parse=function(ruleText){var i=0;var state="selector";var index;var j=i;var buffer="";var SIGNIFICANT_WHITESPACE={"selector":true,"value":true};var styleRule=new CSSOM.CSSStyleRule;var name,priority="";for(var character;character=ruleText.charAt(i);i++){switch(character){case" ":case"\t":case"\r":case"\n":case"\f":if(SIGNIFICANT_WHITESPACE[state]){switch(ruleText.charAt(i-1)){case" ":case"\t":case"\r":case"\n":case"\f":break;default:buffer+=" ";break}}break;case'"':j=i+1;index=ruleText.indexOf('"',j)+1;if(!index){throw'" is missing'}buffer+=ruleText.slice(i,index);i=index-1;break;case"'":j=i+1;index=ruleText.indexOf("'",j)+1;if(!index){throw"' is missing"}buffer+=ruleText.slice(i,index);i=index-1;break;case"/":if(ruleText.charAt(i+1)==="*"){i+=2;index=ruleText.indexOf("*/",i);if(index===-1){throw new SyntaxError("Missing */")}else{i=index+1}}else{buffer+=character}break;case"{":if(state==="selector"){styleRule.selectorText=buffer.trim();buffer="";state="name"}break;case":":if(state==="name"){name=buffer.trim();buffer="";state="value"}else{buffer+=character}break;case"!":if(state==="value"&&ruleText.indexOf("!important",i)===i){priority="important";i+="important".length}else{buffer+=character}break;case";":if(state==="value"){styleRule.style.setProperty(name,buffer.trim(),priority);priority="";buffer="";state="name"}else{buffer+=character}break;case"}":if(state==="value"){styleRule.style.setProperty(name,buffer.trim(),priority);priority="";buffer=""}else if(state==="name"){break}else{buffer+=character}state="selector";break;default:buffer+=character;break}}return styleRule};CSSStyleRule.CSSStyleRule=CSSOM.CSSStyleRule;return CSSStyleRule}var hasRequiredCSSStyleSheet;function requireCSSStyleSheet(){if(hasRequiredCSSStyleSheet)return CSSStyleSheet;hasRequiredCSSStyleSheet=1;var CSSOM={StyleSheet:StyleSheet.StyleSheet,CSSStyleRule:requireCSSStyleRule().CSSStyleRule};CSSOM.CSSStyleSheet=function CSSStyleSheet(){CSSOM.StyleSheet.call(this);this.cssRules=[]};CSSOM.CSSStyleSheet.prototype=new CSSOM.StyleSheet;CSSOM.CSSStyleSheet.prototype.constructor=CSSOM.CSSStyleSheet;CSSOM.CSSStyleSheet.prototype.insertRule=function(rule,index){if(index<0||index>this.cssRules.length){throw new RangeError("INDEX_SIZE_ERR")}var cssRule=CSSOM.parse(rule).cssRules[0];cssRule.parentStyleSheet=this;this.cssRules.splice(index,0,cssRule);return index};CSSOM.CSSStyleSheet.prototype.deleteRule=function(index){if(index<0||index>=this.cssRules.length){throw new RangeError("INDEX_SIZE_ERR")}this.cssRules.splice(index,1)};CSSOM.CSSStyleSheet.prototype.toString=function(){var result="";var rules=this.cssRules;for(var i=0;i<rules.length;i++){result+=rules[i].cssText+"\n"}return result};CSSStyleSheet.CSSStyleSheet=CSSOM.CSSStyleSheet;CSSOM.parse=requireParse().parse;return CSSStyleSheet}var CSSImportRule={};var MediaList={};var CSSOM$a={};CSSOM$a.MediaList=function MediaList(){this.length=0};CSSOM$a.MediaList.prototype={constructor:CSSOM$a.MediaList,get mediaText(){return Array.prototype.join.call(this,", ")},set mediaText(value){var values=value.split(",");var length=this.length=values.length;for(var i=0;i<length;i++){this[i]=values[i].trim()}},appendMedium:function(medium){if(Array.prototype.indexOf.call(this,medium)===-1){this[this.length]=medium;this.length++}},deleteMedium:function(medium){var index=Array.prototype.indexOf.call(this,medium);if(index!==-1){Array.prototype.splice.call(this,index,1)}}};MediaList.MediaList=CSSOM$a.MediaList;var hasRequiredCSSImportRule;function requireCSSImportRule(){if(hasRequiredCSSImportRule)return CSSImportRule;hasRequiredCSSImportRule=1;var CSSOM={CSSRule:CSSRule.CSSRule,CSSStyleSheet:requireCSSStyleSheet().CSSStyleSheet,MediaList:MediaList.MediaList};CSSOM.CSSImportRule=function CSSImportRule(){CSSOM.CSSRule.call(this);this.href="";this.media=new CSSOM.MediaList;this.styleSheet=new CSSOM.CSSStyleSheet};CSSOM.CSSImportRule.prototype=new CSSOM.CSSRule;CSSOM.CSSImportRule.prototype.constructor=CSSOM.CSSImportRule;CSSOM.CSSImportRule.prototype.type=3;Object.defineProperty(CSSOM.CSSImportRule.prototype,"cssText",{get:function(){var mediaText=this.media.mediaText;return"@import url("+this.href+")"+(mediaText?" "+mediaText:"")+";"},set:function(cssText){var i=0;var state='';var buffer='';var index;for(var character;character=cssText.charAt(i);i++){switch(character){case' ':case'\t':case'\r':case'\n':case'\f':if(state==='after-import'){state='url'}else{buffer+=character}break;case'@':if(!state&&cssText.indexOf('@import',i)===i){state='after-import';i+='import'.length;buffer=''}break;case'u':if(state==='url'&&cssText.indexOf('url(',i)===i){index=cssText.indexOf(')',i+1);if(index===-1){throw i+': ")" not found'}i+='url('.length;var url=cssText.slice(i,index);if(url[0]===url[url.length-1]){if(url[0]==='"'||url[0]==="'"){url=url.slice(1,-1)}}this.href=url;i=index;state='media'}break;case'"':if(state==='url'){index=cssText.indexOf('"',i+1);if(!index){throw i+": '\"' not found"}this.href=cssText.slice(i+1,index);i=index;state='media'}break;case"'":if(state==='url'){index=cssText.indexOf("'",i+1);if(!index){throw i+': "\'" not found'}this.href=cssText.slice(i+1,index);i=index;state='media'}break;case';':if(state==='media'){if(buffer){this.media.mediaText=buffer.trim()}}break;default:if(state==='media'){buffer+=character}break}}}});CSSImportRule.CSSImportRule=CSSOM.CSSImportRule;return CSSImportRule}var CSSGroupingRule={};var CSSOM$9={CSSRule:CSSRule.CSSRule};CSSOM$9.CSSGroupingRule=function CSSGroupingRule(){CSSOM$9.CSSRule.call(this);this.cssRules=[]};CSSOM$9.CSSGroupingRule.prototype=new CSSOM$9.CSSRule;CSSOM$9.CSSGroupingRule.prototype.constructor=CSSOM$9.CSSGroupingRule;CSSOM$9.CSSGroupingRule.prototype.insertRule=function insertRule(rule,index){if(index<0||index>this.cssRules.length){throw new RangeError("INDEX_SIZE_ERR")}var cssRule=CSSOM$9.parse(rule).cssRules[0];cssRule.parentRule=this;this.cssRules.splice(index,0,cssRule);return index};CSSOM$9.CSSGroupingRule.prototype.deleteRule=function deleteRule(index){if(index<0||index>=this.cssRules.length){throw new RangeError("INDEX_SIZE_ERR")}this.cssRules.splice(index,1)[0].parentRule=null};CSSGroupingRule.CSSGroupingRule=CSSOM$9.CSSGroupingRule;var CSSMediaRule={};var CSSConditionRule={};var CSSOM$8={CSSRule:CSSRule.CSSRule,CSSGroupingRule:CSSGroupingRule.CSSGroupingRule};CSSOM$8.CSSConditionRule=function CSSConditionRule(){CSSOM$8.CSSGroupingRule.call(this);this.cssRules=[]};CSSOM$8.CSSConditionRule.prototype=new CSSOM$8.CSSGroupingRule;CSSOM$8.CSSConditionRule.prototype.constructor=CSSOM$8.CSSConditionRule;CSSOM$8.CSSConditionRule.prototype.conditionText='';CSSOM$8.CSSConditionRule.prototype.cssText='';CSSConditionRule.CSSConditionRule=CSSOM$8.CSSConditionRule;var CSSOM$7={CSSRule:CSSRule.CSSRule,CSSGroupingRule:CSSGroupingRule.CSSGroupingRule,CSSConditionRule:CSSConditionRule.CSSConditionRule,MediaList:MediaList.MediaList};CSSOM$7.CSSMediaRule=function CSSMediaRule(){CSSOM$7.CSSConditionRule.call(this);this.media=new CSSOM$7.MediaList};CSSOM$7.CSSMediaRule.prototype=new CSSOM$7.CSSConditionRule;CSSOM$7.CSSMediaRule.prototype.constructor=CSSOM$7.CSSMediaRule;CSSOM$7.CSSMediaRule.prototype.type=4;Object.defineProperties(CSSOM$7.CSSMediaRule.prototype,{"conditionText":{get:function(){return this.media.mediaText},set:function(value){this.media.mediaText=value},configurable:true,enumerable:true},"cssText":{get:function(){var cssTexts=[];for(var i=0,length=this.cssRules.length;i<length;i++){cssTexts.push(this.cssRules[i].cssText)}return"@media "+this.media.mediaText+" {"+cssTexts.join("")+"}"},configurable:true,enumerable:true}});CSSMediaRule.CSSMediaRule=CSSOM$7.CSSMediaRule;var CSSSupportsRule={};var CSSOM$6={CSSRule:CSSRule.CSSRule,CSSGroupingRule:CSSGroupingRule.CSSGroupingRule,CSSConditionRule:CSSConditionRule.CSSConditionRule};CSSOM$6.CSSSupportsRule=function CSSSupportsRule(){CSSOM$6.CSSConditionRule.call(this)};CSSOM$6.CSSSupportsRule.prototype=new CSSOM$6.CSSConditionRule;CSSOM$6.CSSSupportsRule.prototype.constructor=CSSOM$6.CSSSupportsRule;CSSOM$6.CSSSupportsRule.prototype.type=12;Object.defineProperty(CSSOM$6.CSSSupportsRule.prototype,"cssText",{get:function(){var cssTexts=[];for(var i=0,length=this.cssRules.length;i<length;i++){cssTexts.push(this.cssRules[i].cssText)}return"@supports "+this.conditionText+" {"+cssTexts.join("")+"}"}});CSSSupportsRule.CSSSupportsRule=CSSOM$6.CSSSupportsRule;var CSSFontFaceRule={};var hasRequiredCSSFontFaceRule;function requireCSSFontFaceRule(){if(hasRequiredCSSFontFaceRule)return CSSFontFaceRule;hasRequiredCSSFontFaceRule=1;var CSSOM={CSSStyleDeclaration:requireCSSStyleDeclaration().CSSStyleDeclaration,CSSRule:CSSRule.CSSRule};CSSOM.CSSFontFaceRule=function CSSFontFaceRule(){CSSOM.CSSRule.call(this);this.style=new CSSOM.CSSStyleDeclaration;this.style.parentRule=this};CSSOM.CSSFontFaceRule.prototype=new CSSOM.CSSRule;CSSOM.CSSFontFaceRule.prototype.constructor=CSSOM.CSSFontFaceRule;CSSOM.CSSFontFaceRule.prototype.type=5;Object.defineProperty(CSSOM.CSSFontFaceRule.prototype,"cssText",{get:function(){return"@font-face {"+this.style.cssText+"}"}});CSSFontFaceRule.CSSFontFaceRule=CSSOM.CSSFontFaceRule;return CSSFontFaceRule}var CSSHostRule={};var CSSOM$5={CSSRule:CSSRule.CSSRule};CSSOM$5.CSSHostRule=function CSSHostRule(){CSSOM$5.CSSRule.call(this);this.cssRules=[]};CSSOM$5.CSSHostRule.prototype=new CSSOM$5.CSSRule;CSSOM$5.CSSHostRule.prototype.constructor=CSSOM$5.CSSHostRule;CSSOM$5.CSSHostRule.prototype.type=1001;Object.defineProperty(CSSOM$5.CSSHostRule.prototype,"cssText",{get:function(){var cssTexts=[];for(var i=0,length=this.cssRules.length;i<length;i++){cssTexts.push(this.cssRules[i].cssText)}return"@host {"+cssTexts.join("")+"}"}});CSSHostRule.CSSHostRule=CSSOM$5.CSSHostRule;var CSSKeyframeRule={};var hasRequiredCSSKeyframeRule;function requireCSSKeyframeRule(){if(hasRequiredCSSKeyframeRule)return CSSKeyframeRule;hasRequiredCSSKeyframeRule=1;var CSSOM={CSSRule:CSSRule.CSSRule,CSSStyleDeclaration:requireCSSStyleDeclaration().CSSStyleDeclaration};CSSOM.CSSKeyframeRule=function CSSKeyframeRule(){CSSOM.CSSRule.call(this);this.keyText='';this.style=new CSSOM.CSSStyleDeclaration;this.style.parentRule=this};CSSOM.CSSKeyframeRule.prototype=new CSSOM.CSSRule;CSSOM.CSSKeyframeRule.prototype.constructor=CSSOM.CSSKeyframeRule;CSSOM.CSSKeyframeRule.prototype.type=8;Object.defineProperty(CSSOM.CSSKeyframeRule.prototype,"cssText",{get:function(){return this.keyText+" {"+this.style.cssText+"} "}});CSSKeyframeRule.CSSKeyframeRule=CSSOM.CSSKeyframeRule;return CSSKeyframeRule}var CSSKeyframesRule={};var CSSOM$4={CSSRule:CSSRule.CSSRule};CSSOM$4.CSSKeyframesRule=function CSSKeyframesRule(){CSSOM$4.CSSRule.call(this);this.name='';this.cssRules=[]};CSSOM$4.CSSKeyframesRule.prototype=new CSSOM$4.CSSRule;CSSOM$4.CSSKeyframesRule.prototype.constructor=CSSOM$4.CSSKeyframesRule;CSSOM$4.CSSKeyframesRule.prototype.type=7;Object.defineProperty(CSSOM$4.CSSKeyframesRule.prototype,"cssText",{get:function(){var cssTexts=[];for(var i=0,length=this.cssRules.length;i<length;i++){cssTexts.push("  "+this.cssRules[i].cssText)}return"@"+(this._vendorPrefix||'')+"keyframes "+this.name+" { \n"+cssTexts.join("\n")+"\n}"}});CSSKeyframesRule.CSSKeyframesRule=CSSOM$4.CSSKeyframesRule;var CSSValueExpression={};var CSSValue={};var CSSOM$3={};CSSOM$3.CSSValue=function CSSValue(){};CSSOM$3.CSSValue.prototype={constructor:CSSOM$3.CSSValue,set cssText(text){var name=this._getConstructorName();throw new Error('DOMException: property "cssText" of "'+name+'" is readonly and can not be replaced with "'+text+'"!')},get cssText(){var name=this._getConstructorName();throw new Error('getter "cssText" of "'+name+'" is not implemented!')},_getConstructorName:function(){var s=this.constructor.toString(),c=s.match(/function\s([^\(]+)/),name=c[1];return name}};CSSValue.CSSValue=CSSOM$3.CSSValue;var CSSOM$2={CSSValue:CSSValue.CSSValue};CSSOM$2.CSSValueExpression=function CSSValueExpression(token,idx){this._token=token;this._idx=idx};CSSOM$2.CSSValueExpression.prototype=new CSSOM$2.CSSValue;CSSOM$2.CSSValueExpression.prototype.constructor=CSSOM$2.CSSValueExpression;CSSOM$2.CSSValueExpression.prototype.parse=function(){var token=this._token,idx=this._idx;var character='',expression='',error='',info,paren=[];for(;;++idx){character=token.charAt(idx);if(character===''){error='css expression error: unfinished expression!';break}switch(character){case'(':paren.push(character);expression+=character;break;case')':paren.pop(character);expression+=character;break;case'/':if(info=this._parseJSComment(token,idx)){if(info.error){error='css expression error: unfinished comment in expression!'}else{idx=info.idx}}else if(info=this._parseJSRexExp(token,idx)){idx=info.idx;expression+=info.text}else{expression+=character}break;case"'":case'"':info=this._parseJSString(token,idx,character);if(info){idx=info.idx;expression+=info.text}else{expression+=character}break;default:expression+=character;break}if(error){break}if(paren.length===0){break}}var ret;if(error){ret={error}}else{ret={idx,expression}}return ret};CSSOM$2.CSSValueExpression.prototype._parseJSComment=function(token,idx){var nextChar=token.charAt(idx+1),text;if(nextChar==='/'||nextChar==='*'){var startIdx=idx,endIdx,commentEndChar;if(nextChar==='/'){commentEndChar='\n'}else if(nextChar==='*'){commentEndChar='*/'}endIdx=token.indexOf(commentEndChar,startIdx+1+1);if(endIdx!==-1){endIdx=endIdx+commentEndChar.length-1;text=token.substring(idx,endIdx+1);return{idx:endIdx,text}}else{var error='css expression error: unfinished comment in expression!';return{error}}}else{return false}};CSSOM$2.CSSValueExpression.prototype._parseJSString=function(token,idx,sep){var endIdx=this._findMatchedIdx(token,idx,sep),text;if(endIdx===-1){return false}else{text=token.substring(idx,endIdx+sep.length);return{idx:endIdx,text}}};CSSOM$2.CSSValueExpression.prototype._parseJSRexExp=function(token,idx){var before=token.substring(0,idx).replace(/\s+$/,""),legalRegx=[/^$/,/\($/,/\[$/,/\!$/,/\+$/,/\-$/,/\*$/,/\/\s+/,/\%$/,/\=$/,/\>$/,/<$/,/\&$/,/\|$/,/\^$/,/\~$/,/\?$/,/\,$/,/delete$/,/in$/,/instanceof$/,/new$/,/typeof$/,/void$/];var isLegal=legalRegx.some((function(reg){return reg.test(before)}));if(!isLegal){return false}else{var sep='/';return this._parseJSString(token,idx,sep)}};CSSOM$2.CSSValueExpression.prototype._findMatchedIdx=function(token,idx,sep){var startIdx=idx,endIdx;var NOT_FOUND=-1;while(true){endIdx=token.indexOf(sep,startIdx+1);if(endIdx===-1){endIdx=NOT_FOUND;break}else{var text=token.substring(idx+1,endIdx),matched=text.match(/\\+$/);if(!matched||matched[0]%2===0){break}else{startIdx=endIdx}}}var nextNewLineIdx=token.indexOf('\n',idx+1);if(nextNewLineIdx<endIdx){endIdx=NOT_FOUND}return endIdx};CSSValueExpression.CSSValueExpression=CSSOM$2.CSSValueExpression;var CSSDocumentRule={};var MatcherList={};var CSSOM$1={};CSSOM$1.MatcherList=function MatcherList(){this.length=0};CSSOM$1.MatcherList.prototype={constructor:CSSOM$1.MatcherList,get matcherText(){return Array.prototype.join.call(this,", ")},set matcherText(value){var values=value.split(",");var length=this.length=values.length;for(var i=0;i<length;i++){this[i]=values[i].trim()}},appendMatcher:function(matcher){if(Array.prototype.indexOf.call(this,matcher)===-1){this[this.length]=matcher;this.length++}},deleteMatcher:function(matcher){var index=Array.prototype.indexOf.call(this,matcher);if(index!==-1){Array.prototype.splice.call(this,index,1)}}};MatcherList.MatcherList=CSSOM$1.MatcherList;var CSSOM={CSSRule:CSSRule.CSSRule,MatcherList:MatcherList.MatcherList};CSSOM.CSSDocumentRule=function CSSDocumentRule(){CSSOM.CSSRule.call(this);this.matcher=new CSSOM.MatcherList;this.cssRules=[]};CSSOM.CSSDocumentRule.prototype=new CSSOM.CSSRule;CSSOM.CSSDocumentRule.prototype.constructor=CSSOM.CSSDocumentRule;CSSOM.CSSDocumentRule.prototype.type=10;Object.defineProperty(CSSOM.CSSDocumentRule.prototype,"cssText",{get:function(){var cssTexts=[];for(var i=0,length=this.cssRules.length;i<length;i++){cssTexts.push(this.cssRules[i].cssText)}return"@-moz-document "+this.matcher.matcherText+" {"+cssTexts.join("")+"}"}});CSSDocumentRule.CSSDocumentRule=CSSOM.CSSDocumentRule;var hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$4;hasRequiredParse=1;var CSSOM={};CSSOM.parse=function parse(token){var i=0;var state="before-selector";var index;var buffer="";var valueParenthesisDepth=0;var SIGNIFICANT_WHITESPACE={"selector":true,"value":true,"value-parenthesis":true,"atRule":true,"importRule-begin":true,"importRule":true,"atBlock":true,"conditionBlock":true,'documentRule-begin':true};var styleSheet=new CSSOM.CSSStyleSheet;var currentScope=styleSheet;var parentRule;var ancestorRules=[];var hasAncestors=false;var prevScope;var name,priority="",styleRule,mediaRule,supportsRule,importRule,fontFaceRule,keyframesRule,documentRule,hostRule;var atKeyframesRegExp=/@(-(?:\w+-)+)?keyframes/g;var parseError=function(message){var lines=token.substring(0,i).split('\n');var lineCount=lines.length;var charCount=lines.pop().length+1;var error=new Error(message+' (line '+lineCount+', char '+charCount+')');error.line=lineCount;error['char']=charCount;error.styleSheet=styleSheet;throw error};for(var character;character=token.charAt(i);i++){switch(character){case" ":case"\t":case"\r":case"\n":case"\f":if(SIGNIFICANT_WHITESPACE[state]){buffer+=character}break;case'"':index=i+1;do{index=token.indexOf('"',index)+1;if(!index){parseError('Unmatched "')}}while(token[index-2]==='\\');buffer+=token.slice(i,index);i=index-1;switch(state){case'before-value':state='value';break;case'importRule-begin':state='importRule';break}break;case"'":index=i+1;do{index=token.indexOf("'",index)+1;if(!index){parseError("Unmatched '")}}while(token[index-2]==='\\');buffer+=token.slice(i,index);i=index-1;switch(state){case'before-value':state='value';break;case'importRule-begin':state='importRule';break}break;case"/":if(token.charAt(i+1)==="*"){i+=2;index=token.indexOf("*/",i);if(index===-1){parseError("Missing */")}else{i=index+1}}else{buffer+=character}if(state==="importRule-begin"){buffer+=" ";state="importRule"}break;case"@":if(token.indexOf("@-moz-document",i)===i){state="documentRule-begin";documentRule=new CSSOM.CSSDocumentRule;documentRule.__starts=i;i+="-moz-document".length;buffer="";break}else if(token.indexOf("@media",i)===i){state="atBlock";mediaRule=new CSSOM.CSSMediaRule;mediaRule.__starts=i;i+="media".length;buffer="";break}else if(token.indexOf("@supports",i)===i){state="conditionBlock";supportsRule=new CSSOM.CSSSupportsRule;supportsRule.__starts=i;i+="supports".length;buffer="";break}else if(token.indexOf("@host",i)===i){state="hostRule-begin";i+="host".length;hostRule=new CSSOM.CSSHostRule;hostRule.__starts=i;buffer="";break}else if(token.indexOf("@import",i)===i){state="importRule-begin";i+="import".length;buffer+="@import";break}else if(token.indexOf("@font-face",i)===i){state="fontFaceRule-begin";i+="font-face".length;fontFaceRule=new CSSOM.CSSFontFaceRule;fontFaceRule.__starts=i;buffer="";break}else{atKeyframesRegExp.lastIndex=i;var matchKeyframes=atKeyframesRegExp.exec(token);if(matchKeyframes&&matchKeyframes.index===i){state="keyframesRule-begin";keyframesRule=new CSSOM.CSSKeyframesRule;keyframesRule.__starts=i;keyframesRule._vendorPrefix=matchKeyframes[1];i+=matchKeyframes[0].length-1;buffer="";break}else if(state==="selector"){state="atRule"}}buffer+=character;break;case"{":if(state==="selector"||state==="atRule"){styleRule.selectorText=buffer.trim();styleRule.style.__starts=i;buffer="";state="before-name"}else if(state==="atBlock"){mediaRule.media.mediaText=buffer.trim();if(parentRule){ancestorRules.push(parentRule)}currentScope=parentRule=mediaRule;mediaRule.parentStyleSheet=styleSheet;buffer="";state="before-selector"}else if(state==="conditionBlock"){supportsRule.conditionText=buffer.trim();if(parentRule){ancestorRules.push(parentRule)}currentScope=parentRule=supportsRule;supportsRule.parentStyleSheet=styleSheet;buffer="";state="before-selector"}else if(state==="hostRule-begin"){if(parentRule){ancestorRules.push(parentRule)}currentScope=parentRule=hostRule;hostRule.parentStyleSheet=styleSheet;buffer="";state="before-selector"}else if(state==="fontFaceRule-begin"){if(parentRule){fontFaceRule.parentRule=parentRule}fontFaceRule.parentStyleSheet=styleSheet;styleRule=fontFaceRule;buffer="";state="before-name"}else if(state==="keyframesRule-begin"){keyframesRule.name=buffer.trim();if(parentRule){ancestorRules.push(parentRule);keyframesRule.parentRule=parentRule}keyframesRule.parentStyleSheet=styleSheet;currentScope=parentRule=keyframesRule;buffer="";state="keyframeRule-begin"}else if(state==="keyframeRule-begin"){styleRule=new CSSOM.CSSKeyframeRule;styleRule.keyText=buffer.trim();styleRule.__starts=i;buffer="";state="before-name"}else if(state==="documentRule-begin"){documentRule.matcher.matcherText=buffer.trim();if(parentRule){ancestorRules.push(parentRule);documentRule.parentRule=parentRule}currentScope=parentRule=documentRule;documentRule.parentStyleSheet=styleSheet;buffer="";state="before-selector"}break;case":":if(state==="name"){name=buffer.trim();buffer="";state="before-value"}else{buffer+=character}break;case"(":if(state==='value'){if(buffer.trim()==='expression'){var info=new CSSOM.CSSValueExpression(token,i).parse();if(info.error){parseError(info.error)}else{buffer+=info.expression;i=info.idx}}else{state='value-parenthesis';valueParenthesisDepth=1;buffer+=character}}else if(state==='value-parenthesis'){valueParenthesisDepth++;buffer+=character}else{buffer+=character}break;case")":if(state==='value-parenthesis'){valueParenthesisDepth--;if(valueParenthesisDepth===0)state='value'}buffer+=character;break;case"!":if(state==="value"&&token.indexOf("!important",i)===i){priority="important";i+="important".length}else{buffer+=character}break;case";":switch(state){case"value":styleRule.style.setProperty(name,buffer.trim(),priority);priority="";buffer="";state="before-name";break;case"atRule":buffer="";state="before-selector";break;case"importRule":importRule=new CSSOM.CSSImportRule;importRule.parentStyleSheet=importRule.styleSheet.parentStyleSheet=styleSheet;importRule.cssText=buffer+character;styleSheet.cssRules.push(importRule);buffer="";state="before-selector";break;default:buffer+=character;break}break;case"}":switch(state){case"value":styleRule.style.setProperty(name,buffer.trim(),priority);priority="";case"before-name":case"name":styleRule.__ends=i+1;if(parentRule){styleRule.parentRule=parentRule}styleRule.parentStyleSheet=styleSheet;currentScope.cssRules.push(styleRule);buffer="";if(currentScope.constructor===CSSOM.CSSKeyframesRule){state="keyframeRule-begin"}else{state="before-selector"}break;case"keyframeRule-begin":case"before-selector":case"selector":if(!parentRule){parseError("Unexpected }")}hasAncestors=ancestorRules.length>0;while(ancestorRules.length>0){parentRule=ancestorRules.pop();if(parentRule.constructor.name==="CSSMediaRule"||parentRule.constructor.name==="CSSSupportsRule"){prevScope=currentScope;currentScope=parentRule;currentScope.cssRules.push(prevScope);break}if(ancestorRules.length===0){hasAncestors=false}}if(!hasAncestors){currentScope.__ends=i+1;styleSheet.cssRules.push(currentScope);currentScope=styleSheet;parentRule=null}buffer="";state="before-selector";break}break;default:switch(state){case"before-selector":state="selector";styleRule=new CSSOM.CSSStyleRule;styleRule.__starts=i;break;case"before-name":state="name";break;case"before-value":state="value";break;case"importRule-begin":state="importRule";break}buffer+=character;break}}return styleSheet};parse$4.parse=CSSOM.parse;CSSOM.CSSStyleSheet=requireCSSStyleSheet().CSSStyleSheet;CSSOM.CSSStyleRule=requireCSSStyleRule().CSSStyleRule;CSSOM.CSSImportRule=requireCSSImportRule().CSSImportRule;CSSOM.CSSGroupingRule=CSSGroupingRule.CSSGroupingRule;CSSOM.CSSMediaRule=CSSMediaRule.CSSMediaRule;CSSOM.CSSConditionRule=CSSConditionRule.CSSConditionRule;CSSOM.CSSSupportsRule=CSSSupportsRule.CSSSupportsRule;CSSOM.CSSFontFaceRule=requireCSSFontFaceRule().CSSFontFaceRule;CSSOM.CSSHostRule=CSSHostRule.CSSHostRule;CSSOM.CSSStyleDeclaration=requireCSSStyleDeclaration().CSSStyleDeclaration;CSSOM.CSSKeyframeRule=requireCSSKeyframeRule().CSSKeyframeRule;CSSOM.CSSKeyframesRule=CSSKeyframesRule.CSSKeyframesRule;CSSOM.CSSValueExpression=CSSValueExpression.CSSValueExpression;CSSOM.CSSDocumentRule=CSSDocumentRule.CSSDocumentRule;return parse$4}var hasRequiredCSSStyleDeclaration;function requireCSSStyleDeclaration(){if(hasRequiredCSSStyleDeclaration)return CSSStyleDeclaration;hasRequiredCSSStyleDeclaration=1;var CSSOM={};CSSOM.CSSStyleDeclaration=function CSSStyleDeclaration(){this.length=0;this.parentRule=null;this._importants={}};CSSOM.CSSStyleDeclaration.prototype={constructor:CSSOM.CSSStyleDeclaration,getPropertyValue:function(name){return this[name]||""},setProperty:function(name,value,priority){if(this[name]){var index=Array.prototype.indexOf.call(this,name);if(index<0){this[this.length]=name;this.length++}}else{this[this.length]=name;this.length++}this[name]=value+"";this._importants[name]=priority},removeProperty:function(name){if(!(name in this)){return""}var index=Array.prototype.indexOf.call(this,name);if(index<0){return""}var prevValue=this[name];this[name]="";Array.prototype.splice.call(this,index,1);return prevValue},getPropertyCSSValue:function(){},getPropertyPriority:function(name){return this._importants[name]||""},getPropertyShorthand:function(){},isPropertyImplicit:function(){},get cssText(){var properties=[];for(var i=0,length=this.length;i<length;++i){var name=this[i];var value=this.getPropertyValue(name);var priority=this.getPropertyPriority(name);if(priority){priority=" !"+priority}properties[i]=name+": "+value+priority+";"}return properties.join(" ")},set cssText(text){var i,name;for(i=this.length;i--;){name=this[i];this[name]=""}Array.prototype.splice.call(this,0,this.length);this._importants={};var dummyRule=CSSOM.parse('#bogus{'+text+'}').cssRules[0].style;var length=dummyRule.length;for(i=0;i<length;++i){name=dummyRule[i];this.setProperty(dummyRule[i],dummyRule.getPropertyValue(name),dummyRule.getPropertyPriority(name))}}};CSSStyleDeclaration.CSSStyleDeclaration=CSSOM.CSSStyleDeclaration;CSSOM.parse=requireParse().parse;return CSSStyleDeclaration}({CSSStyleSheet:requireCSSStyleSheet().CSSStyleSheet,CSSRule:CSSRule.CSSRule,CSSStyleRule:requireCSSStyleRule().CSSStyleRule,CSSGroupingRule:CSSGroupingRule.CSSGroupingRule,CSSConditionRule:CSSConditionRule.CSSConditionRule,CSSMediaRule:CSSMediaRule.CSSMediaRule,CSSSupportsRule:CSSSupportsRule.CSSSupportsRule,CSSStyleDeclaration:requireCSSStyleDeclaration().CSSStyleDeclaration,CSSKeyframeRule:requireCSSKeyframeRule().CSSKeyframeRule,CSSKeyframesRule:CSSKeyframesRule.CSSKeyframesRule});requireCSSStyleDeclaration().CSSStyleDeclaration;requireCSSStyleRule().CSSStyleRule;requireCSSImportRule().CSSImportRule;requireCSSFontFaceRule().CSSFontFaceRule;requireCSSStyleSheet().CSSStyleSheet;requireCSSKeyframeRule().CSSKeyframeRule;var parse$3=requireParse().parse;const tagName$d='style';class HTMLStyleElement extends TextElement{constructor(ownerDocument,localName=tagName$d){super(ownerDocument,localName);this[SHEET]=null}get sheet(){const sheet=this[SHEET];if(sheet!==null){return sheet}return this[SHEET]=parse$3(this.textContent)}get innerHTML(){return super.innerHTML||''}set innerHTML(value){super.textContent=value;this[SHEET]=null}get innerText(){return super.innerText||''}set innerText(value){super.textContent=value;this[SHEET]=null}get textContent(){return super.textContent||''}set textContent(value){super.textContent=value;this[SHEET]=null}}registerHTMLClass(tagName$d,HTMLStyleElement);class HTMLTimeElement extends HTMLElement{constructor(ownerDocument,localName='time'){super(ownerDocument,localName)}}class HTMLFieldSetElement extends HTMLElement{constructor(ownerDocument,localName='fieldset'){super(ownerDocument,localName)}}class HTMLEmbedElement extends HTMLElement{constructor(ownerDocument,localName='embed'){super(ownerDocument,localName)}}class HTMLHRElement extends HTMLElement{constructor(ownerDocument,localName='hr'){super(ownerDocument,localName)}}class HTMLProgressElement extends HTMLElement{constructor(ownerDocument,localName='progress'){super(ownerDocument,localName)}}class HTMLParagraphElement extends HTMLElement{constructor(ownerDocument,localName='p'){super(ownerDocument,localName)}}class HTMLTableElement extends HTMLElement{constructor(ownerDocument,localName='table'){super(ownerDocument,localName)}}class HTMLFrameSetElement extends HTMLElement{constructor(ownerDocument,localName='frameset'){super(ownerDocument,localName)}}class HTMLLIElement extends HTMLElement{constructor(ownerDocument,localName='li'){super(ownerDocument,localName)}}class HTMLBaseElement extends HTMLElement{constructor(ownerDocument,localName='base'){super(ownerDocument,localName)}}class HTMLDataListElement extends HTMLElement{constructor(ownerDocument,localName='datalist'){super(ownerDocument,localName)}}const tagName$c='input';class HTMLInputElement extends HTMLElement{constructor(ownerDocument,localName=tagName$c){super(ownerDocument,localName)}get autofocus(){return booleanAttribute.get(this,'autofocus')||-1}set autofocus(value){booleanAttribute.set(this,'autofocus',value)}get disabled(){return booleanAttribute.get(this,'disabled')}set disabled(value){booleanAttribute.set(this,'disabled',value)}get name(){return this.getAttribute('name')}set name(value){this.setAttribute('name',value)}get placeholder(){return this.getAttribute('placeholder')}set placeholder(value){this.setAttribute('placeholder',value)}get type(){return this.getAttribute('type')}set type(value){this.setAttribute('type',value)}get value(){return stringAttribute.get(this,'value')}set value(value){stringAttribute.set(this,'value',value)}}registerHTMLClass(tagName$c,HTMLInputElement);class HTMLParamElement extends HTMLElement{constructor(ownerDocument,localName='param'){super(ownerDocument,localName)}}class HTMLMediaElement extends HTMLElement{constructor(ownerDocument,localName='media'){super(ownerDocument,localName)}}class HTMLAudioElement extends HTMLElement{constructor(ownerDocument,localName='audio'){super(ownerDocument,localName)}}const tagName$b='h1';class HTMLHeadingElement extends HTMLElement{constructor(ownerDocument,localName=tagName$b){super(ownerDocument,localName)}}registerHTMLClass([tagName$b,'h2','h3','h4','h5','h6'],HTMLHeadingElement);class HTMLDirectoryElement extends HTMLElement{constructor(ownerDocument,localName='dir'){super(ownerDocument,localName)}}class HTMLQuoteElement extends HTMLElement{constructor(ownerDocument,localName='quote'){super(ownerDocument,localName)}}var canvasExports={};var canvas={get exports(){return canvasExports},set exports(v){canvasExports=v}};var canvasShim;var hasRequiredCanvasShim;function requireCanvasShim(){if(hasRequiredCanvasShim)return canvasShim;hasRequiredCanvasShim=1;class Canvas{constructor(width,height){this.width=width;this.height=height}getContext(){return null}toDataURL(){return''}}canvasShim={createCanvas:(width,height)=>new Canvas(width,height)};return canvasShim}(function(module){try{module.exports=require('canvas')}catch(fallback){module.exports=requireCanvasShim()}})(canvas);const Canvas=getDefaultExportFromCjs(canvasExports);const{createCanvas}=Canvas;const tagName$a='canvas';class HTMLCanvasElement extends HTMLElement{constructor(ownerDocument,localName=tagName$a){super(ownerDocument,localName);this[IMAGE]=createCanvas(300,150)}get width(){return this[IMAGE].width}set width(value){numericAttribute.set(this,'width',value);this[IMAGE].width=value}get height(){return this[IMAGE].height}set height(value){numericAttribute.set(this,'height',value);this[IMAGE].height=value}getContext(type){return this[IMAGE].getContext(type)}toDataURL(...args){return this[IMAGE].toDataURL(...args)}}registerHTMLClass(tagName$a,HTMLCanvasElement);class HTMLLegendElement extends HTMLElement{constructor(ownerDocument,localName='legend'){super(ownerDocument,localName)}}const tagName$9='option';class HTMLOptionElement extends HTMLElement{constructor(ownerDocument,localName=tagName$9){super(ownerDocument,localName)}get value(){return stringAttribute.get(this,'value')}set value(value){stringAttribute.set(this,'value',value)}get selected(){return booleanAttribute.get(this,'selected')}set selected(value){const option=this.parentElement?.querySelector('option[selected]');if(option&&option!==this)option.selected=false;booleanAttribute.set(this,'selected',value)}}registerHTMLClass(tagName$9,HTMLOptionElement);class HTMLSpanElement extends HTMLElement{constructor(ownerDocument,localName='span'){super(ownerDocument,localName)}}class HTMLMeterElement extends HTMLElement{constructor(ownerDocument,localName='meter'){super(ownerDocument,localName)}}class HTMLVideoElement extends HTMLElement{constructor(ownerDocument,localName='video'){super(ownerDocument,localName)}}class HTMLTableCellElement extends HTMLElement{constructor(ownerDocument,localName='td'){super(ownerDocument,localName)}}const tagName$8='title';class HTMLTitleElement extends TextElement{constructor(ownerDocument,localName=tagName$8){super(ownerDocument,localName)}}registerHTMLClass(tagName$8,HTMLTitleElement);class HTMLOutputElement extends HTMLElement{constructor(ownerDocument,localName='output'){super(ownerDocument,localName)}}class HTMLTableRowElement extends HTMLElement{constructor(ownerDocument,localName='tr'){super(ownerDocument,localName)}}class HTMLDataElement extends HTMLElement{constructor(ownerDocument,localName='data'){super(ownerDocument,localName)}}class HTMLMenuElement extends HTMLElement{constructor(ownerDocument,localName='menu'){super(ownerDocument,localName)}}const tagName$7='select';class HTMLSelectElement extends HTMLElement{constructor(ownerDocument,localName=tagName$7){super(ownerDocument,localName)}get options(){let children=new NodeList;let{firstElementChild}=this;while(firstElementChild){if(firstElementChild.tagName==='OPTGROUP')children.push(...firstElementChild.children);else children.push(firstElementChild);firstElementChild=firstElementChild.nextElementSibling}return children}get disabled(){return booleanAttribute.get(this,'disabled')}set disabled(value){booleanAttribute.set(this,'disabled',value)}get name(){return this.getAttribute('name')}set name(value){this.setAttribute('name',value)}get value(){return this.querySelector('option[selected]')?.value}}registerHTMLClass(tagName$7,HTMLSelectElement);class HTMLBRElement extends HTMLElement{constructor(ownerDocument,localName='br'){super(ownerDocument,localName)}}const tagName$6='button';class HTMLButtonElement extends HTMLElement{constructor(ownerDocument,localName=tagName$6){super(ownerDocument,localName)}get disabled(){return booleanAttribute.get(this,'disabled')}set disabled(value){booleanAttribute.set(this,'disabled',value)}get name(){return this.getAttribute('name')}set name(value){this.setAttribute('name',value)}get type(){return this.getAttribute('type')}set type(value){this.setAttribute('type',value)}}registerHTMLClass(tagName$6,HTMLButtonElement);class HTMLMapElement extends HTMLElement{constructor(ownerDocument,localName='map'){super(ownerDocument,localName)}}class HTMLOptGroupElement extends HTMLElement{constructor(ownerDocument,localName='optgroup'){super(ownerDocument,localName)}}class HTMLDListElement extends HTMLElement{constructor(ownerDocument,localName='dl'){super(ownerDocument,localName)}}const tagName$5='textarea';class HTMLTextAreaElement extends TextElement{constructor(ownerDocument,localName=tagName$5){super(ownerDocument,localName)}get disabled(){return booleanAttribute.get(this,'disabled')}set disabled(value){booleanAttribute.set(this,'disabled',value)}get name(){return this.getAttribute('name')}set name(value){this.setAttribute('name',value)}get placeholder(){return this.getAttribute('placeholder')}set placeholder(value){this.setAttribute('placeholder',value)}get type(){return this.getAttribute('type')}set type(value){this.setAttribute('type',value)}get value(){return this.textContent}set value(content){this.textContent=content}}registerHTMLClass(tagName$5,HTMLTextAreaElement);class HTMLFontElement extends HTMLElement{constructor(ownerDocument,localName='font'){super(ownerDocument,localName)}}class HTMLDivElement extends HTMLElement{constructor(ownerDocument,localName='div'){super(ownerDocument,localName)}}const tagName$4='link';class HTMLLinkElement extends HTMLElement{constructor(ownerDocument,localName=tagName$4){super(ownerDocument,localName)}get disabled(){return booleanAttribute.get(this,'disabled')}set disabled(value){booleanAttribute.set(this,'disabled',value)}get href(){return stringAttribute.get(this,'href')}set href(value){stringAttribute.set(this,'href',value)}get hreflang(){return stringAttribute.get(this,'hreflang')}set hreflang(value){stringAttribute.set(this,'hreflang',value)}get media(){return stringAttribute.get(this,'media')}set media(value){stringAttribute.set(this,'media',value)}get rel(){return stringAttribute.get(this,'rel')}set rel(value){stringAttribute.set(this,'rel',value)}get type(){return stringAttribute.get(this,'type')}set type(value){stringAttribute.set(this,'type',value)}}registerHTMLClass(tagName$4,HTMLLinkElement);class HTMLSlotElement extends HTMLElement{constructor(ownerDocument,localName='slot'){super(ownerDocument,localName)}}class HTMLFormElement extends HTMLElement{constructor(ownerDocument,localName='form'){super(ownerDocument,localName)}}const tagName$3='img';class HTMLImageElement extends HTMLElement{constructor(ownerDocument,localName=tagName$3){super(ownerDocument,localName)}get alt(){return stringAttribute.get(this,'alt')}set alt(value){stringAttribute.set(this,'alt',value)}get sizes(){return stringAttribute.get(this,'sizes')}set sizes(value){stringAttribute.set(this,'sizes',value)}get src(){return stringAttribute.get(this,'src')}set src(value){stringAttribute.set(this,'src',value)}get srcset(){return stringAttribute.get(this,'srcset')}set srcset(value){stringAttribute.set(this,'srcset',value)}get title(){return stringAttribute.get(this,'title')}set title(value){stringAttribute.set(this,'title',value)}get width(){return numericAttribute.get(this,'width')}set width(value){numericAttribute.set(this,'width',value)}get height(){return numericAttribute.get(this,'height')}set height(value){numericAttribute.set(this,'height',value)}}registerHTMLClass(tagName$3,HTMLImageElement);class HTMLPreElement extends HTMLElement{constructor(ownerDocument,localName='pre'){super(ownerDocument,localName)}}class HTMLUListElement extends HTMLElement{constructor(ownerDocument,localName='ul'){super(ownerDocument,localName)}}const tagName$2='meta';class HTMLMetaElement extends HTMLElement{constructor(ownerDocument,localName=tagName$2){super(ownerDocument,localName)}get name(){return stringAttribute.get(this,'name')}set name(value){stringAttribute.set(this,'name',value)}get httpEquiv(){return stringAttribute.get(this,'http-equiv')}set httpEquiv(value){stringAttribute.set(this,'http-equiv',value)}get content(){return stringAttribute.get(this,'content')}set content(value){stringAttribute.set(this,'content',value)}get charset(){return stringAttribute.get(this,'charset')}set charset(value){stringAttribute.set(this,'charset',value)}get media(){return stringAttribute.get(this,'media')}set media(value){stringAttribute.set(this,'media',value)}}registerHTMLClass(tagName$2,HTMLMetaElement);class HTMLPictureElement extends HTMLElement{constructor(ownerDocument,localName='picture'){super(ownerDocument,localName)}}class HTMLAreaElement extends HTMLElement{constructor(ownerDocument,localName='area'){super(ownerDocument,localName)}}class HTMLOListElement extends HTMLElement{constructor(ownerDocument,localName='ol'){super(ownerDocument,localName)}}class HTMLTableCaptionElement extends HTMLElement{constructor(ownerDocument,localName='caption'){super(ownerDocument,localName)}}const tagName$1='a';class HTMLAnchorElement extends HTMLElement{constructor(ownerDocument,localName=tagName$1){super(ownerDocument,localName)}get href(){return encodeURI(stringAttribute.get(this,'href'))}set href(value){stringAttribute.set(this,'href',decodeURI(value))}get download(){return encodeURI(stringAttribute.get(this,'download'))}set download(value){stringAttribute.set(this,'download',decodeURI(value))}get target(){return stringAttribute.get(this,'target')}set target(value){stringAttribute.set(this,'target',value)}get type(){return stringAttribute.get(this,'type')}set type(value){stringAttribute.set(this,'type',value)}}registerHTMLClass(tagName$1,HTMLAnchorElement);class HTMLLabelElement extends HTMLElement{constructor(ownerDocument,localName='label'){super(ownerDocument,localName)}}class HTMLUnknownElement extends HTMLElement{constructor(ownerDocument,localName='unknown'){super(ownerDocument,localName)}}class HTMLModElement extends HTMLElement{constructor(ownerDocument,localName='mod'){super(ownerDocument,localName)}}class HTMLDetailsElement extends HTMLElement{constructor(ownerDocument,localName='details'){super(ownerDocument,localName)}}const tagName='source';class HTMLSourceElement extends HTMLElement{constructor(ownerDocument,localName=tagName){super(ownerDocument,localName)}get src(){return stringAttribute.get(this,'src')}set src(value){stringAttribute.set(this,'src',value)}get srcset(){return stringAttribute.get(this,'srcset')}set srcset(value){stringAttribute.set(this,'srcset',value)}get sizes(){return stringAttribute.get(this,'sizes')}set sizes(value){stringAttribute.set(this,'sizes',value)}get type(){return stringAttribute.get(this,'type')}set type(value){stringAttribute.set(this,'type',value)}}registerHTMLClass(tagName,HTMLSourceElement);class HTMLTrackElement extends HTMLElement{constructor(ownerDocument,localName='track'){super(ownerDocument,localName)}}class HTMLMarqueeElement extends HTMLElement{constructor(ownerDocument,localName='marquee'){super(ownerDocument,localName)}}const HTMLClasses={HTMLElement,HTMLTemplateElement,HTMLHtmlElement,HTMLScriptElement,HTMLFrameElement,HTMLIFrameElement,HTMLObjectElement,HTMLHeadElement,HTMLBodyElement,HTMLStyleElement,HTMLTimeElement,HTMLFieldSetElement,HTMLEmbedElement,HTMLHRElement,HTMLProgressElement,HTMLParagraphElement,HTMLTableElement,HTMLFrameSetElement,HTMLLIElement,HTMLBaseElement,HTMLDataListElement,HTMLInputElement,HTMLParamElement,HTMLMediaElement,HTMLAudioElement,HTMLHeadingElement,HTMLDirectoryElement,HTMLQuoteElement,HTMLCanvasElement,HTMLLegendElement,HTMLOptionElement,HTMLSpanElement,HTMLMeterElement,HTMLVideoElement,HTMLTableCellElement,HTMLTitleElement,HTMLOutputElement,HTMLTableRowElement,HTMLDataElement,HTMLMenuElement,HTMLSelectElement,HTMLBRElement,HTMLButtonElement,HTMLMapElement,HTMLOptGroupElement,HTMLDListElement,HTMLTextAreaElement,HTMLFontElement,HTMLDivElement,HTMLLinkElement,HTMLSlotElement,HTMLFormElement,HTMLImageElement,HTMLPreElement,HTMLUListElement,HTMLMetaElement,HTMLPictureElement,HTMLAreaElement,HTMLOListElement,HTMLTableCaptionElement,HTMLAnchorElement,HTMLLabelElement,HTMLUnknownElement,HTMLModElement,HTMLDetailsElement,HTMLSourceElement,HTMLTrackElement,HTMLMarqueeElement};const voidElements={test:()=>true};const Mime={'text/html':{docType:'<!DOCTYPE html>',ignoreCase:true,voidElements:/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i},'image/svg+xml':{docType:'<?xml version="1.0" encoding="utf-8"?>',ignoreCase:false,voidElements},'text/xml':{docType:'<?xml version="1.0" encoding="utf-8"?>',ignoreCase:false,voidElements},'application/xml':{docType:'<?xml version="1.0" encoding="utf-8"?>',ignoreCase:false,voidElements},'application/xhtml+xml':{docType:'<?xml version="1.0" encoding="utf-8"?>',ignoreCase:false,voidElements}};class CustomEvent extends GlobalEvent{constructor(type,eventInitDict={}){super(type,eventInitDict);this.detail=eventInitDict.detail}}class InputEvent extends GlobalEvent{constructor(type,inputEventInit={}){super(type,inputEventInit);this.inputType=inputEventInit.inputType;this.data=inputEventInit.data;this.dataTransfer=inputEventInit.dataTransfer;this.isComposing=inputEventInit.isComposing||false;this.ranges=inputEventInit.ranges}}const ImageClass=ownerDocument=>class Image extends HTMLImageElement{constructor(width,height){super(ownerDocument);switch(arguments.length){case 1:this.height=width;this.width=width;break;case 2:this.height=height;this.width=width;break}}};const deleteContents=({[START]:start,[END]:end},fragment=null)=>{setAdjacent(start[PREV],end[NEXT]);do{const after=getEnd(start);const next=after===end?after:after[NEXT];if(fragment)fragment.insertBefore(start,fragment[END]);else start.remove();start=next}while(start!==end)};class Range{constructor(){this[START]=null;this[END]=null;this.commonAncestorContainer=null}insertNode(newNode){this[END].parentNode.insertBefore(newNode,this[START])}selectNode(node){this[START]=node;this[END]=getEnd(node)}surroundContents(parentNode){parentNode.replaceChildren(this.extractContents())}setStartBefore(node){this[START]=node}setStartAfter(node){this[START]=node.nextSibling}setEndBefore(node){this[END]=getEnd(node.previousSibling)}setEndAfter(node){this[END]=getEnd(node)}cloneContents(){let{[START]:start,[END]:end}=this;const fragment=start.ownerDocument.createDocumentFragment();while(start!==end){fragment.insertBefore(start.cloneNode(true),fragment[END]);start=getEnd(start);if(start!==end)start=start[NEXT]}return fragment}deleteContents(){deleteContents(this)}extractContents(){const fragment=this[START].ownerDocument.createDocumentFragment();deleteContents(this,fragment);return fragment}createContextualFragment(html){const template=this.commonAncestorContainer.createElement('template');template.innerHTML=html;this.selectNode(template.content);return template.content}cloneRange(){const range=new Range;range[START]=this[START];range[END]=this[END];return range}}const isOK=({nodeType},mask)=>{switch(nodeType){case ELEMENT_NODE:return mask&SHOW_ELEMENT;case TEXT_NODE:return mask&SHOW_TEXT;case COMMENT_NODE:return mask&SHOW_COMMENT}return 0};class TreeWalker{constructor(root,whatToShow=SHOW_ALL){this.root=root;this.currentNode=root;this.whatToShow=whatToShow;let{[NEXT]:next,[END]:end}=root;if(root.nodeType===DOCUMENT_NODE){const{documentElement}=root;next=documentElement;end=documentElement[END]}const nodes=[];while(next!==end){if(isOK(next,whatToShow))nodes.push(next);next=next[NEXT]}this[PRIVATE]={i:0,nodes}}nextNode(){const $=this[PRIVATE];this.currentNode=$.i<$.nodes.length?$.nodes[$.i++]:null;return this.currentNode}}const query=(method,ownerDocument,selectors)=>{let{[NEXT]:next,[END]:end}=ownerDocument;return method.call({ownerDocument,[NEXT]:next,[END]:end},selectors)};const globalExports=assign$2({},Facades,HTMLClasses,{CustomEvent,Event:GlobalEvent,EventTarget:DOMEventTarget,InputEvent,NamedNodeMap,NodeList});const window=new WeakMap;let Document$1=class Document extends NonElementParentNode{constructor(type){super(null,'#document',DOCUMENT_NODE);this[CUSTOM_ELEMENTS]={active:false,registry:null};this[MUTATION_OBSERVER]={active:false,class:null};this[MIME]=Mime[type];this[DOCTYPE]=null;this[DOM_PARSER]=null;this[GLOBALS]=null;this[IMAGE]=null;this[UPGRADE]=null}get defaultView(){if(!window.has(this))window.set(this,new Proxy(globalThis,{set:(target,name,value)=>{switch(name){case'addEventListener':case'removeEventListener':case'dispatchEvent':this[EVENT_TARGET][name]=value;break;default:target[name]=value;break}return true},get:(globalThis,name)=>{switch(name){case'addEventListener':case'removeEventListener':case'dispatchEvent':if(!this[EVENT_TARGET]){const et=this[EVENT_TARGET]=new DOMEventTarget;et.dispatchEvent=et.dispatchEvent.bind(et);et.addEventListener=et.addEventListener.bind(et);et.removeEventListener=et.removeEventListener.bind(et)}return this[EVENT_TARGET][name];case'document':return this;case'navigator':return{userAgent:'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36'};case'window':return window.get(this);case'customElements':if(!this[CUSTOM_ELEMENTS].registry)this[CUSTOM_ELEMENTS]=new CustomElementRegistry(this);return this[CUSTOM_ELEMENTS];case'performance':return performance_1;case'DOMParser':return this[DOM_PARSER];case'Image':if(!this[IMAGE])this[IMAGE]=ImageClass(this);return this[IMAGE];case'MutationObserver':if(!this[MUTATION_OBSERVER].class)this[MUTATION_OBSERVER]=new MutationObserverClass(this);return this[MUTATION_OBSERVER].class}return this[GLOBALS]&&this[GLOBALS][name]||globalExports[name]||globalThis[name]}}));return window.get(this)}get doctype(){const docType=this[DOCTYPE];if(docType)return docType;const{firstChild}=this;if(firstChild&&firstChild.nodeType===DOCUMENT_TYPE_NODE)return this[DOCTYPE]=firstChild;return null}set doctype(value){if(/^([a-z:]+)(\s+system|\s+public(\s+"([^"]+)")?)?(\s+"([^"]+)")?/i.test(value)){const{$1:name,$4:publicId,$6:systemId}=RegExp;this[DOCTYPE]=new DocumentType$1(this,name,publicId,systemId);knownSiblings(this,this[DOCTYPE],this[NEXT])}}get documentElement(){return this.firstElementChild}get isConnected(){return true}_getParent(){return this[EVENT_TARGET]}createAttribute(name){return new Attr$1(this,name)}createComment(textContent){return new Comment$1(this,textContent)}createDocumentFragment(){return new DocumentFragment$1(this)}createDocumentType(name,publicId,systemId){return new DocumentType$1(this,name,publicId,systemId)}createElement(localName){return new Element$1(this,localName)}createRange(){const range=new Range;range.commonAncestorContainer=this;return range}createTextNode(textContent){return new Text$1(this,textContent)}createTreeWalker(root,whatToShow=-1){return new TreeWalker(root,whatToShow)}createNodeIterator(root,whatToShow=-1){return this.createTreeWalker(root,whatToShow)}createEvent(name){const event=create$3(name==='Event'?new GlobalEvent(''):new CustomEvent(''));event.initEvent=event.initCustomEvent=(type,canBubble=false,cancelable=false,detail)=>{defineProperties$1(event,{type:{value:type},canBubble:{value:canBubble},cancelable:{value:cancelable},detail:{value:detail}})};return event}cloneNode(deep=false){const{constructor,[CUSTOM_ELEMENTS]:customElements,[DOCTYPE]:doctype}=this;const document=new constructor;document[CUSTOM_ELEMENTS]=customElements;if(deep){const end=document[END];const{childNodes}=this;for(let{length}=childNodes,i=0;i<length;i++)document.insertBefore(childNodes[i].cloneNode(true),end);if(doctype)document[DOCTYPE]=childNodes[0]}return document}importNode(externalNode){const deep=1<arguments.length&&!!arguments[1];const node=externalNode.cloneNode(deep);const{[CUSTOM_ELEMENTS]:customElements}=this;const{active}=customElements;const upgrade=element=>{const{ownerDocument,nodeType}=element;element.ownerDocument=this;if(active&&ownerDocument!==this&&nodeType===ELEMENT_NODE)customElements.upgrade(element)};upgrade(node);if(deep){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:{let{[NEXT]:next,[END]:end}=node;while(next!==end){if(next.nodeType===ELEMENT_NODE)upgrade(next);next=next[NEXT]}break}}}return node}toString(){return this.childNodes.join('')}querySelector(selectors){return query(super.querySelector,this,selectors)}querySelectorAll(selectors){return query(super.querySelectorAll,this,selectors)}getElementsByTagNameNS(_,name){return this.getElementsByTagName(name)}createAttributeNS(_,name){return this.createAttribute(name)}createElementNS(nsp,localName,options){return nsp===SVG_NAMESPACE?new SVGElement$1(this,localName,null):this.createElement(localName,options)}};setPrototypeOf(globalExports.Document=function Document(){illegalConstructor()},Document$1).prototype=Document$1.prototype;const createHTMLElement=(ownerDocument,builtin,localName,options)=>{if(!builtin&&htmlClasses.has(localName)){const Class=htmlClasses.get(localName);return new Class(ownerDocument,localName)}const{[CUSTOM_ELEMENTS]:{active,registry}}=ownerDocument;if(active){const ce=builtin?options.is:localName;if(registry.has(ce)){const{Class}=registry.get(ce);const element=new Class(ownerDocument,localName);customElements.set(element,{connected:false});return element}}return new HTMLElement(ownerDocument,localName)};class HTMLDocument extends Document$1{constructor(){super('text/html')}get all(){const nodeList=new NodeList;let{[NEXT]:next,[END]:end}=this;while(next!==end){switch(next.nodeType){case ELEMENT_NODE:nodeList.push(next);break}next=next[NEXT]}return nodeList}get head(){const{documentElement}=this;let{firstElementChild}=documentElement;if(!firstElementChild||firstElementChild.tagName!=='HEAD'){firstElementChild=this.createElement('head');documentElement.prepend(firstElementChild)}return firstElementChild}get body(){const{head}=this;let{nextElementSibling}=head;if(!nextElementSibling||nextElementSibling.tagName!=='BODY'){nextElementSibling=this.createElement('body');head.after(nextElementSibling)}return nextElementSibling}get title(){const{head}=this;let title=head.getElementsByTagName('title').shift();return title?title.textContent:''}set title(textContent){const{head}=this;let title=head.getElementsByTagName('title').shift();if(title)title.textContent=textContent;else{head.insertBefore(this.createElement('title'),head.firstChild).textContent=textContent}}createElement(localName,options){const builtin=!!(options&&options.is);const element=createHTMLElement(this,builtin,localName,options);if(builtin)element.setAttribute('is',options.is);return element}}class SVGDocument extends Document$1{constructor(){super('image/svg+xml')}toString(){return this[MIME].docType+super.toString()}}class XMLDocument extends Document$1{constructor(){super('text/xml')}toString(){return this[MIME].docType+super.toString()}}class DOMParser{parseFromString(markupLanguage,mimeType,globals=null){let isHTML=false,document;if(mimeType==='text/html'){isHTML=true;document=new HTMLDocument}else if(mimeType==='image/svg+xml')document=new SVGDocument;else document=new XMLDocument;document[DOM_PARSER]=DOMParser;if(globals)document[GLOBALS]=globals;if(isHTML&&markupLanguage==='...')markupLanguage='<!doctype html><html><head></head><body></body></html>';return markupLanguage?parseFromString(document,isHTML,markupLanguage):document}}const parseHTML=(html,globals=null)=>(new DOMParser).parseFromString(html,'text/html',globals).defaultView;function Document(){illegalConstructor()}setPrototypeOf(Document,Document$1).prototype=Document$1.prototype;function getDefaults(){return{async:false,baseUrl:null,breaks:false,extensions:null,gfm:true,headerIds:true,headerPrefix:'',highlight:null,hooks:null,langPrefix:'language-',mangle:true,pedantic:false,renderer:null,sanitize:false,sanitizer:null,silent:false,smartypants:false,tokenizer:null,walkTokens:null,xhtml:false}}let defaults=getDefaults();function changeDefaults(newDefaults){defaults=newDefaults}const escapeTest=/[&<>"']/;const escapeReplace=new RegExp(escapeTest.source,'g');const escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/;const escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,'g');const escapeReplacements={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};const getEscapeReplacement=ch=>escapeReplacements[ch];function escape(html,encode){if(encode){if(escapeTest.test(html)){return html.replace(escapeReplace,getEscapeReplacement)}}else{if(escapeTestNoEncode.test(html)){return html.replace(escapeReplaceNoEncode,getEscapeReplacement)}}return html}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape(html){return html.replace(unescapeTest,((_,n)=>{n=n.toLowerCase();if(n==='colon')return':';if(n.charAt(0)==='#'){return n.charAt(1)==='x'?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1))}return''}))}const caret=/(^|[^\[])\^/g;function edit(regex,opt){regex=typeof regex==='string'?regex:regex.source;opt=opt||'';const obj={replace:(name,val)=>{val=val.source||val;val=val.replace(caret,'$1');regex=regex.replace(name,val);return obj},getRegex:()=>new RegExp(regex,opt)};return obj}const nonWordAndColonTest=/[^\w:]/g;const originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(sanitize,base,href){if(sanitize){let prot;try{prot=decodeURIComponent(unescape(href)).replace(nonWordAndColonTest,'').toLowerCase()}catch(e){return null}if(prot.indexOf('javascript:')===0||prot.indexOf('vbscript:')===0||prot.indexOf('data:')===0){return null}}if(base&&!originIndependentUrl.test(href)){href=resolveUrl(base,href)}try{href=encodeURI(href).replace(/%25/g,'%')}catch(e){return null}return href}const baseUrls={};const justDomain=/^[^:]+:\/*[^/]*$/;const protocol=/^([^:]+:)[\s\S]*$/;const domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(base,href){if(!baseUrls[' '+base]){if(justDomain.test(base)){baseUrls[' '+base]=base+'/'}else{baseUrls[' '+base]=rtrim(base,'/',true)}}base=baseUrls[' '+base];const relativeBase=base.indexOf(':')===-1;if(href.substring(0,2)==='//'){if(relativeBase){return href}return base.replace(protocol,'$1')+href}else if(href.charAt(0)==='/'){if(relativeBase){return href}return base.replace(domain,'$1')+href}else{return base+href}}const noopTest={exec:function noopTest(){}};function splitCells(tableRow,count){const row=tableRow.replace(/\|/g,((match,offset,str)=>{let escaped=false,curr=offset;while(--curr>=0&&str[curr]==='\\')escaped=!escaped;if(escaped){return'|'}else{return' |'}})),cells=row.split(/ \|/);let i=0;if(!cells[0].trim()){cells.shift()}if(cells.length>0&&!cells[cells.length-1].trim()){cells.pop()}if(cells.length>count){cells.splice(count)}else{while(cells.length<count)cells.push('')}for(;i<cells.length;i++){cells[i]=cells[i].trim().replace(/\\\|/g,'|')}return cells}function rtrim(str,c,invert){const l=str.length;if(l===0){return''}let suffLen=0;while(suffLen<l){const currChar=str.charAt(l-suffLen-1);if(currChar===c&&!invert){suffLen++}else if(currChar!==c&&invert){suffLen++}else{break}}return str.slice(0,l-suffLen)}function findClosingBracket(str,b){if(str.indexOf(b[1])===-1){return-1}const l=str.length;let level=0,i=0;for(;i<l;i++){if(str[i]==='\\'){i++}else if(str[i]===b[0]){level++}else if(str[i]===b[1]){level--;if(level<0){return i}}}return-1}function checkSanitizeDeprecation(opt){if(opt&&opt.sanitize&&!opt.silent){console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options')}}function repeatString(pattern,count){if(count<1){return''}let result='';while(count>1){if(count&1){result+=pattern}count>>=1;pattern+=pattern}return result+pattern}function outputLink(cap,link,raw,lexer){const href=link.href;const title=link.title?escape(link.title):null;const text=cap[1].replace(/\\([\[\]])/g,'$1');if(cap[0].charAt(0)!=='!'){lexer.state.inLink=true;const token={type:'link',raw,href,title,text,tokens:lexer.inlineTokens(text)};lexer.state.inLink=false;return token}return{type:'image',raw,href,title,text:escape(text)}}function indentCodeCompensation(raw,text){const matchIndentToCode=raw.match(/^(\s+)(?:```)/);if(matchIndentToCode===null){return text}const indentToCode=matchIndentToCode[1];return text.split('\n').map((node=>{const matchIndentInNode=node.match(/^\s+/);if(matchIndentInNode===null){return node}const[indentInNode]=matchIndentInNode;if(indentInNode.length>=indentToCode.length){return node.slice(indentToCode.length)}return node})).join('\n')}class Tokenizer{constructor(options){this.options=options||defaults}space(src){const cap=this.rules.block.newline.exec(src);if(cap&&cap[0].length>0){return{type:'space',raw:cap[0]}}}code(src){const cap=this.rules.block.code.exec(src);if(cap){const text=cap[0].replace(/^ {1,4}/gm,'');return{type:'code',raw:cap[0],codeBlockStyle:'indented',text:!this.options.pedantic?rtrim(text,'\n'):text}}}fences(src){const cap=this.rules.block.fences.exec(src);if(cap){const raw=cap[0];const text=indentCodeCompensation(raw,cap[3]||'');return{type:'code',raw,lang:cap[2]?cap[2].trim().replace(this.rules.inline._escapes,'$1'):cap[2],text}}}heading(src){const cap=this.rules.block.heading.exec(src);if(cap){let text=cap[2].trim();if(/#$/.test(text)){const trimmed=rtrim(text,'#');if(this.options.pedantic){text=trimmed.trim()}else if(!trimmed||/ $/.test(trimmed)){text=trimmed.trim()}}return{type:'heading',raw:cap[0],depth:cap[1].length,text,tokens:this.lexer.inline(text)}}}hr(src){const cap=this.rules.block.hr.exec(src);if(cap){return{type:'hr',raw:cap[0]}}}blockquote(src){const cap=this.rules.block.blockquote.exec(src);if(cap){const text=cap[0].replace(/^ *>[ \t]?/gm,'');const top=this.lexer.state.top;this.lexer.state.top=true;const tokens=this.lexer.blockTokens(text);this.lexer.state.top=top;return{type:'blockquote',raw:cap[0],tokens,text}}}list(src){let cap=this.rules.block.list.exec(src);if(cap){let raw,istask,ischecked,indent,i,blankLine,endsWithBlankLine,line,nextLine,rawLine,itemContents,endEarly;let bull=cap[1].trim();const isordered=bull.length>1;const list={type:'list',raw:'',ordered:isordered,start:isordered?+bull.slice(0,-1):'',loose:false,items:[]};bull=isordered?`\\d{1,9}\\${bull.slice(-1)}`:`\\${bull}`;if(this.options.pedantic){bull=isordered?bull:'[*+-]'}const itemRegex=new RegExp(`^( {0,3}${bull})((?:[\t ][^\\n]*)?(?:\\n|$))`);while(src){endEarly=false;if(!(cap=itemRegex.exec(src))){break}if(this.rules.block.hr.test(src)){break}raw=cap[0];src=src.substring(raw.length);line=cap[2].split('\n',1)[0].replace(/^\t+/,(t=>' '.repeat(3*t.length)));nextLine=src.split('\n',1)[0];if(this.options.pedantic){indent=2;itemContents=line.trimLeft()}else{indent=cap[2].search(/[^ ]/);indent=indent>4?1:indent;itemContents=line.slice(indent);indent+=cap[1].length}blankLine=false;if(!line&&/^ *$/.test(nextLine)){raw+=nextLine+'\n';src=src.substring(nextLine.length+1);endEarly=true}if(!endEarly){const nextBulletRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`);const hrRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);const fencesBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:\`\`\`|~~~)`);const headingBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}#`);while(src){rawLine=src.split('\n',1)[0];nextLine=rawLine;if(this.options.pedantic){nextLine=nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g,'  ')}if(fencesBeginRegex.test(nextLine)){break}if(headingBeginRegex.test(nextLine)){break}if(nextBulletRegex.test(nextLine)){break}if(hrRegex.test(src)){break}if(nextLine.search(/[^ ]/)>=indent||!nextLine.trim()){itemContents+='\n'+nextLine.slice(indent)}else{if(blankLine){break}if(line.search(/[^ ]/)>=4){break}if(fencesBeginRegex.test(line)){break}if(headingBeginRegex.test(line)){break}if(hrRegex.test(line)){break}itemContents+='\n'+nextLine}if(!blankLine&&!nextLine.trim()){blankLine=true}raw+=rawLine+'\n';src=src.substring(rawLine.length+1);line=nextLine.slice(indent)}}if(!list.loose){if(endsWithBlankLine){list.loose=true}else if(/\n *\n *$/.test(raw)){endsWithBlankLine=true}}if(this.options.gfm){istask=/^\[[ xX]\] /.exec(itemContents);if(istask){ischecked=istask[0]!=='[ ] ';itemContents=itemContents.replace(/^\[[ xX]\] +/,'')}}list.items.push({type:'list_item',raw,task:!!istask,checked:ischecked,loose:false,text:itemContents});list.raw+=raw}list.items[list.items.length-1].raw=raw.trimRight();list.items[list.items.length-1].text=itemContents.trimRight();list.raw=list.raw.trimRight();const l=list.items.length;for(i=0;i<l;i++){this.lexer.state.top=false;list.items[i].tokens=this.lexer.blockTokens(list.items[i].text,[]);if(!list.loose){const spacers=list.items[i].tokens.filter((t=>t.type==='space'));const hasMultipleLineBreaks=spacers.length>0&&spacers.some((t=>/\n.*\n/.test(t.raw)));list.loose=hasMultipleLineBreaks}}if(list.loose){for(i=0;i<l;i++){list.items[i].loose=true}}return list}}html(src){const cap=this.rules.block.html.exec(src);if(cap){const token={type:'html',raw:cap[0],pre:!this.options.sanitizer&&(cap[1]==='pre'||cap[1]==='script'||cap[1]==='style'),text:cap[0]};if(this.options.sanitize){const text=this.options.sanitizer?this.options.sanitizer(cap[0]):escape(cap[0]);token.type='paragraph';token.text=text;token.tokens=this.lexer.inline(text)}return token}}def(src){const cap=this.rules.block.def.exec(src);if(cap){const tag=cap[1].toLowerCase().replace(/\s+/g,' ');const href=cap[2]?cap[2].replace(/^<(.*)>$/,'$1').replace(this.rules.inline._escapes,'$1'):'';const title=cap[3]?cap[3].substring(1,cap[3].length-1).replace(this.rules.inline._escapes,'$1'):cap[3];return{type:'def',tag,raw:cap[0],href,title}}}table(src){const cap=this.rules.block.table.exec(src);if(cap){const item={type:'table',header:splitCells(cap[1]).map((c=>({text:c}))),align:cap[2].replace(/^ *|\| *$/g,'').split(/ *\| */),rows:cap[3]&&cap[3].trim()?cap[3].replace(/\n[ \t]*$/,'').split('\n'):[]};if(item.header.length===item.align.length){item.raw=cap[0];let l=item.align.length;let i,j,k,row;for(i=0;i<l;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]='right'}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]='center'}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]='left'}else{item.align[i]=null}}l=item.rows.length;for(i=0;i<l;i++){item.rows[i]=splitCells(item.rows[i],item.header.length).map((c=>({text:c})))}l=item.header.length;for(j=0;j<l;j++){item.header[j].tokens=this.lexer.inline(item.header[j].text)}l=item.rows.length;for(j=0;j<l;j++){row=item.rows[j];for(k=0;k<row.length;k++){row[k].tokens=this.lexer.inline(row[k].text)}}return item}}}lheading(src){const cap=this.rules.block.lheading.exec(src);if(cap){return{type:'heading',raw:cap[0],depth:cap[2].charAt(0)==='='?1:2,text:cap[1],tokens:this.lexer.inline(cap[1])}}}paragraph(src){const cap=this.rules.block.paragraph.exec(src);if(cap){const text=cap[1].charAt(cap[1].length-1)==='\n'?cap[1].slice(0,-1):cap[1];return{type:'paragraph',raw:cap[0],text,tokens:this.lexer.inline(text)}}}text(src){const cap=this.rules.block.text.exec(src);if(cap){return{type:'text',raw:cap[0],text:cap[0],tokens:this.lexer.inline(cap[0])}}}escape(src){const cap=this.rules.inline.escape.exec(src);if(cap){return{type:'escape',raw:cap[0],text:escape(cap[1])}}}tag(src){const cap=this.rules.inline.tag.exec(src);if(cap){if(!this.lexer.state.inLink&&/^<a /i.test(cap[0])){this.lexer.state.inLink=true}else if(this.lexer.state.inLink&&/^<\/a>/i.test(cap[0])){this.lexer.state.inLink=false}if(!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])){this.lexer.state.inRawBlock=true}else if(this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])){this.lexer.state.inRawBlock=false}return{type:this.options.sanitize?'text':'html',raw:cap[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):escape(cap[0]):cap[0]}}}link(src){const cap=this.rules.inline.link.exec(src);if(cap){const trimmedUrl=cap[2].trim();if(!this.options.pedantic&&/^</.test(trimmedUrl)){if(!/>$/.test(trimmedUrl)){return}const rtrimSlash=rtrim(trimmedUrl.slice(0,-1),'\\');if((trimmedUrl.length-rtrimSlash.length)%2===0){return}}else{const lastParenIndex=findClosingBracket(cap[2],'()');if(lastParenIndex>-1){const start=cap[0].indexOf('!')===0?5:4;const linkLen=start+cap[1].length+lastParenIndex;cap[2]=cap[2].substring(0,lastParenIndex);cap[0]=cap[0].substring(0,linkLen).trim();cap[3]=''}}let href=cap[2];let title='';if(this.options.pedantic){const link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);if(link){href=link[1];title=link[3]}}else{title=cap[3]?cap[3].slice(1,-1):''}href=href.trim();if(/^</.test(href)){if(this.options.pedantic&&!/>$/.test(trimmedUrl)){href=href.slice(1)}else{href=href.slice(1,-1)}}return outputLink(cap,{href:href?href.replace(this.rules.inline._escapes,'$1'):href,title:title?title.replace(this.rules.inline._escapes,'$1'):title},cap[0],this.lexer)}}reflink(src,links){let cap;if((cap=this.rules.inline.reflink.exec(src))||(cap=this.rules.inline.nolink.exec(src))){let link=(cap[2]||cap[1]).replace(/\s+/g,' ');link=links[link.toLowerCase()];if(!link){const text=cap[0].charAt(0);return{type:'text',raw:text,text}}return outputLink(cap,link,cap[0],this.lexer)}}emStrong(src,maskedSrc,prevChar=''){let match=this.rules.inline.emStrong.lDelim.exec(src);if(!match)return;if(match[3]&&prevChar.match(/[\p{L}\p{N}]/u))return;const nextChar=match[1]||match[2]||'';if(!nextChar||nextChar&&(prevChar===''||this.rules.inline.punctuation.exec(prevChar))){const lLength=match[0].length-1;let rDelim,rLength,delimTotal=lLength,midDelimTotal=0;const endReg=match[0][0]==='*'?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;endReg.lastIndex=0;maskedSrc=maskedSrc.slice(-1*src.length+lLength);while((match=endReg.exec(maskedSrc))!=null){rDelim=match[1]||match[2]||match[3]||match[4]||match[5]||match[6];if(!rDelim)continue;rLength=rDelim.length;if(match[3]||match[4]){delimTotal+=rLength;continue}else if(match[5]||match[6]){if(lLength%3&&!((lLength+rLength)%3)){midDelimTotal+=rLength;continue}}delimTotal-=rLength;if(delimTotal>0)continue;rLength=Math.min(rLength,rLength+delimTotal+midDelimTotal);const raw=src.slice(0,lLength+match.index+(match[0].length-rDelim.length)+rLength);if(Math.min(lLength,rLength)%2){const text=raw.slice(1,-1);return{type:'em',raw,text,tokens:this.lexer.inlineTokens(text)}}const text=raw.slice(2,-2);return{type:'strong',raw,text,tokens:this.lexer.inlineTokens(text)}}}}codespan(src){const cap=this.rules.inline.code.exec(src);if(cap){let text=cap[2].replace(/\n/g,' ');const hasNonSpaceChars=/[^ ]/.test(text);const hasSpaceCharsOnBothEnds=/^ /.test(text)&&/ $/.test(text);if(hasNonSpaceChars&&hasSpaceCharsOnBothEnds){text=text.substring(1,text.length-1)}text=escape(text,true);return{type:'codespan',raw:cap[0],text}}}br(src){const cap=this.rules.inline.br.exec(src);if(cap){return{type:'br',raw:cap[0]}}}del(src){const cap=this.rules.inline.del.exec(src);if(cap){return{type:'del',raw:cap[0],text:cap[2],tokens:this.lexer.inlineTokens(cap[2])}}}autolink(src,mangle){const cap=this.rules.inline.autolink.exec(src);if(cap){let text,href;if(cap[2]==='@'){text=escape(this.options.mangle?mangle(cap[1]):cap[1]);href='mailto:'+text}else{text=escape(cap[1]);href=text}return{type:'link',raw:cap[0],text,href,tokens:[{type:'text',raw:text,text}]}}}url(src,mangle){let cap;if(cap=this.rules.inline.url.exec(src)){let text,href;if(cap[2]==='@'){text=escape(this.options.mangle?mangle(cap[0]):cap[0]);href='mailto:'+text}else{let prevCapZero;do{prevCapZero=cap[0];cap[0]=this.rules.inline._backpedal.exec(cap[0])[0]}while(prevCapZero!==cap[0]);text=escape(cap[0]);if(cap[1]==='www.'){href='http://'+cap[0]}else{href=cap[0]}}return{type:'link',raw:cap[0],text,href,tokens:[{type:'text',raw:text,text}]}}}inlineText(src,smartypants){const cap=this.rules.inline.text.exec(src);if(cap){let text;if(this.lexer.state.inRawBlock){text=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):escape(cap[0]):cap[0]}else{text=escape(this.options.smartypants?smartypants(cap[0]):cap[0])}return{type:'text',raw:cap[0],text}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:'^ {0,3}(?:'+'<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)'+'|comment[^\\n]*(\\n+|$)'+'|<\\?[\\s\\S]*?(?:\\?>\\n*|$)'+'|<![A-Z][\\s\\S]*?(?:>\\n*|$)'+'|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)'+'|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)'+'|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)'+'|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)'+')',def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace('label',block._label).replace('title',block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace('bull',block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace('hr','\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))').replace('def','\\n+(?='+block.def.source+')').getRegex();block._tag='address|article|aside|base|basefont|blockquote|body|caption'+'|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'+'|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'+'|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'+'|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'+'|track|ul';block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,'i').replace('comment',block._comment).replace('tag',block._tag).replace('attribute',/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace('hr',block.hr).replace('heading',' {0,3}#{1,6} ').replace('|lheading','').replace('|table','').replace('blockquote',' {0,3}>').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',block._tag).getRegex();block.blockquote=edit(block.blockquote).replace('paragraph',block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:'^ *([^\\n ].*\\|.*)\\n'+' {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?'+'(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)'};block.gfm.table=edit(block.gfm.table).replace('hr',block.hr).replace('heading',' {0,3}#{1,6} ').replace('blockquote',' {0,3}>').replace('code',' {4}[^\\n]').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace('hr',block.hr).replace('heading',' {0,3}#{1,6} ').replace('|lheading','').replace('table',block.gfm.table).replace('blockquote',' {0,3}>').replace('fences',' {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n').replace('list',' {0,3}(?:[*+-]|1[.)]) ').replace('html','</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag',block._tag).getRegex();block.pedantic={...block.normal,html:edit('^ *(?:comment *(?:\\n|\\s*$)'+'|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)'+'|<tag(?:"[^"]*"|\'[^\']*\'|\\s[^\'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))').replace('comment',block._comment).replace(/tag/g,'(?!(?:'+'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'+'|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'+'\\b)\\w+(?!:|[^\\w\\s@]*@)\\b').getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace('hr',block.hr).replace('heading',' *#{1,6} *[^\n]').replace('lheading',block.lheading).replace('blockquote',' {0,3}>').replace('|fences','').replace('|list','').replace('|html','').getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:'^comment'+'|^</[a-zA-Z][\\w:-]*\\s*>'+'|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>'+'|^<\\?[\\s\\S]*?\\?>'+'|^<![a-zA-Z]+\\s[\\s\\S]*?>'+'|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>',link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:'reflink|nolink(?!\\()',emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation='!"#$%&\'()+\\-.,/:;<=>?@\\[\\]`^{|}~';inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;inline._comment=edit(block._comment).replace('(?:--\x3e|$)','--\x3e').getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,'g').replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,'g').replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace('scheme',inline._scheme).replace('email',inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace('comment',inline._comment).replace('attribute',inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace('label',inline._label).replace('href',inline._href).replace('title',inline._title).getRegex();inline.reflink=edit(inline.reflink).replace('label',inline._label).replace('ref',block._label).getRegex();inline.nolink=edit(inline.nolink).replace('ref',block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,'g').replace('reflink',inline.reflink).replace('nolink',inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace('label',inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace('label',inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace('])','~|])').getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,'i').replace('email',inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace('{2,}','*').getRegex(),text:edit(inline.gfm.text).replace('\\b_','\\b_| {2,}\\n').replace(/\{2,\}/g,'*').getRegex()};function smartypants(text){return text.replace(/---/g,'').replace(/--/g,'').replace(/(^|[-\u2014/(\[{"\s])'/g,'$1').replace(/'/g,'').replace(/(^|[-\u2014/(\[{\u2018\s])"/g,'$1').replace(/"/g,'').replace(/\.{3}/g,'')}function mangle(text){let out='',i,ch;const l=text.length;for(i=0;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>0.5){ch='x'+ch.toString(16)}out+='&#'+ch+';'}return out}class Lexer{constructor(options){this.tokens=[];this.tokens.links=Object.create(null);this.options=options||defaults;this.options.tokenizer=this.options.tokenizer||new Tokenizer;this.tokenizer=this.options.tokenizer;this.tokenizer.options=this.options;this.tokenizer.lexer=this;this.inlineQueue=[];this.state={inLink:false,inRawBlock:false,top:true};const rules={block:block.normal,inline:inline.normal};if(this.options.pedantic){rules.block=block.pedantic;rules.inline=inline.pedantic}else if(this.options.gfm){rules.block=block.gfm;if(this.options.breaks){rules.inline=inline.breaks}else{rules.inline=inline.gfm}}this.tokenizer.rules=rules}static get rules(){return{block,inline}}static lex(src,options){const lexer=new Lexer(options);return lexer.lex(src)}static lexInline(src,options){const lexer=new Lexer(options);return lexer.inlineTokens(src)}lex(src){src=src.replace(/\r\n|\r/g,'\n');this.blockTokens(src,this.tokens);let next;while(next=this.inlineQueue.shift()){this.inlineTokens(next.src,next.tokens)}return this.tokens}blockTokens(src,tokens=[]){if(this.options.pedantic){src=src.replace(/\t/g,'    ').replace(/^ +$/gm,'')}else{src=src.replace(/^( *)(\t+)/gm,((_,leading,tabs)=>leading+'    '.repeat(tabs.length)))}let token,lastToken,cutSrc,lastParagraphClipped;while(src){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((extTokenizer=>{if(token=extTokenizer.call({lexer:this},src,tokens)){src=src.substring(token.raw.length);tokens.push(token);return true}return false}))){continue}if(token=this.tokenizer.space(src)){src=src.substring(token.raw.length);if(token.raw.length===1&&tokens.length>0){tokens[tokens.length-1].raw+='\n'}else{tokens.push(token)}continue}if(token=this.tokenizer.code(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&(lastToken.type==='paragraph'||lastToken.type==='text')){lastToken.raw+='\n'+token.raw;lastToken.text+='\n'+token.text;this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text}else{tokens.push(token)}continue}if(token=this.tokenizer.fences(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.heading(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.hr(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.blockquote(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.list(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.html(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.def(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&(lastToken.type==='paragraph'||lastToken.type==='text')){lastToken.raw+='\n'+token.raw;lastToken.text+='\n'+token.raw;this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text}else if(!this.tokens.links[token.tag]){this.tokens.links[token.tag]={href:token.href,title:token.title}}continue}if(token=this.tokenizer.table(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.lheading(src)){src=src.substring(token.raw.length);tokens.push(token);continue}cutSrc=src;if(this.options.extensions&&this.options.extensions.startBlock){let startIndex=Infinity;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startBlock.forEach((function(getStartIndex){tempStart=getStartIndex.call({lexer:this},tempSrc);if(typeof tempStart==='number'&&tempStart>=0){startIndex=Math.min(startIndex,tempStart)}}));if(startIndex<Infinity&&startIndex>=0){cutSrc=src.substring(0,startIndex+1)}}if(this.state.top&&(token=this.tokenizer.paragraph(cutSrc))){lastToken=tokens[tokens.length-1];if(lastParagraphClipped&&lastToken.type==='paragraph'){lastToken.raw+='\n'+token.raw;lastToken.text+='\n'+token.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text}else{tokens.push(token)}lastParagraphClipped=cutSrc.length!==src.length;src=src.substring(token.raw.length);continue}if(token=this.tokenizer.text(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&lastToken.type==='text'){lastToken.raw+='\n'+token.raw;lastToken.text+='\n'+token.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text}else{tokens.push(token)}continue}if(src){const errMsg='Infinite loop on byte: '+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}else{throw new Error(errMsg)}}}this.state.top=true;return tokens}inline(src,tokens=[]){this.inlineQueue.push({src,tokens});return tokens}inlineTokens(src,tokens=[]){let token,lastToken,cutSrc;let maskedSrc=src;let match;let keepPrevChar,prevChar;if(this.tokens.links){const links=Object.keys(this.tokens.links);if(links.length>0){while((match=this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc))!=null){if(links.includes(match[0].slice(match[0].lastIndexOf('[')+1,-1))){maskedSrc=maskedSrc.slice(0,match.index)+'['+repeatString('a',match[0].length-2)+']'+maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}}}while((match=this.tokenizer.rules.inline.blockSkip.exec(maskedSrc))!=null){maskedSrc=maskedSrc.slice(0,match.index)+'['+repeatString('a',match[0].length-2)+']'+maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex)}while((match=this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc))!=null){maskedSrc=maskedSrc.slice(0,match.index+match[0].length-2)+'++'+maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);this.tokenizer.rules.inline.escapedEmSt.lastIndex--}while(src){if(!keepPrevChar){prevChar=''}keepPrevChar=false;if(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((extTokenizer=>{if(token=extTokenizer.call({lexer:this},src,tokens)){src=src.substring(token.raw.length);tokens.push(token);return true}return false}))){continue}if(token=this.tokenizer.escape(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.tag(src)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&token.type==='text'&&lastToken.type==='text'){lastToken.raw+=token.raw;lastToken.text+=token.text}else{tokens.push(token)}continue}if(token=this.tokenizer.link(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.reflink(src,this.tokens.links)){src=src.substring(token.raw.length);lastToken=tokens[tokens.length-1];if(lastToken&&token.type==='text'&&lastToken.type==='text'){lastToken.raw+=token.raw;lastToken.text+=token.text}else{tokens.push(token)}continue}if(token=this.tokenizer.emStrong(src,maskedSrc,prevChar)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.codespan(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.br(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.del(src)){src=src.substring(token.raw.length);tokens.push(token);continue}if(token=this.tokenizer.autolink(src,mangle)){src=src.substring(token.raw.length);tokens.push(token);continue}if(!this.state.inLink&&(token=this.tokenizer.url(src,mangle))){src=src.substring(token.raw.length);tokens.push(token);continue}cutSrc=src;if(this.options.extensions&&this.options.extensions.startInline){let startIndex=Infinity;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startInline.forEach((function(getStartIndex){tempStart=getStartIndex.call({lexer:this},tempSrc);if(typeof tempStart==='number'&&tempStart>=0){startIndex=Math.min(startIndex,tempStart)}}));if(startIndex<Infinity&&startIndex>=0){cutSrc=src.substring(0,startIndex+1)}}if(token=this.tokenizer.inlineText(cutSrc,smartypants)){src=src.substring(token.raw.length);if(token.raw.slice(-1)!=='_'){prevChar=token.raw.slice(-1)}keepPrevChar=true;lastToken=tokens[tokens.length-1];if(lastToken&&lastToken.type==='text'){lastToken.raw+=token.raw;lastToken.text+=token.text}else{tokens.push(token)}continue}if(src){const errMsg='Infinite loop on byte: '+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}else{throw new Error(errMsg)}}}return tokens}}class Renderer{constructor(options){this.options=options||defaults}code(code,infostring,escaped){const lang=(infostring||'').match(/\S*/)[0];if(this.options.highlight){const out=this.options.highlight(code,lang);if(out!=null&&out!==code){escaped=true;code=out}}code=code.replace(/\n$/,'')+'\n';if(!lang){return'<pre><code>'+(escaped?code:escape(code,true))+'</code></pre>\n'}return'<pre><code class="'+this.options.langPrefix+escape(lang)+'">'+(escaped?code:escape(code,true))+'</code></pre>\n'}blockquote(quote){return`<blockquote>\n${quote}</blockquote>\n`}html(html){return html}heading(text,level,raw,slugger){if(this.options.headerIds){const id=this.options.headerPrefix+slugger.slug(raw);return`<h${level} id="${id}">${text}</h${level}>\n`}return`<h${level}>${text}</h${level}>\n`}hr(){return this.options.xhtml?'<hr/>\n':'<hr>\n'}list(body,ordered,start){const type=ordered?'ol':'ul',startatt=ordered&&start!==1?' start="'+start+'"':'';return'<'+type+startatt+'>\n'+body+'</'+type+'>\n'}listitem(text){return`<li>${text}</li>\n`}checkbox(checked){return'<input '+(checked?'checked="" ':'')+'disabled="" type="checkbox"'+(this.options.xhtml?' /':'')+'> '}paragraph(text){return`<p>${text}</p>\n`}table(header,body){if(body)body=`<tbody>${body}</tbody>`;return'<table>\n'+'<thead>\n'+header+'</thead>\n'+body+'</table>\n'}tablerow(content){return`<tr>\n${content}</tr>\n`}tablecell(content,flags){const type=flags.header?'th':'td';const tag=flags.align?`<${type} align="${flags.align}">`:`<${type}>`;return tag+content+`</${type}>\n`}strong(text){return`<strong>${text}</strong>`}em(text){return`<em>${text}</em>`}codespan(text){return`<code>${text}</code>`}br(){return this.options.xhtml?'<br/>':'<br>'}del(text){return`<del>${text}</del>`}link(href,title,text){href=cleanUrl(this.options.sanitize,this.options.baseUrl,href);if(href===null){return text}let out='<a href="'+href+'"';if(title){out+=' title="'+title+'"'}out+='>'+text+'</a>';return out}image(href,title,text){href=cleanUrl(this.options.sanitize,this.options.baseUrl,href);if(href===null){return text}let out=`<img src="${href}" alt="${text}"`;if(title){out+=` title="${title}"`}out+=this.options.xhtml?'/>':'>';return out}text(text){return text}}class TextRenderer{strong(text){return text}em(text){return text}codespan(text){return text}del(text){return text}html(text){return text}text(text){return text}link(href,title,text){return''+text}image(href,title,text){return''+text}br(){return''}}class Slugger{constructor(){this.seen={}}serialize(value){return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,'').replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,'').replace(/\s/g,'-')}getNextSafeSlug(originalSlug,isDryRun){let slug=originalSlug;let occurenceAccumulator=0;if(this.seen.hasOwnProperty(slug)){occurenceAccumulator=this.seen[originalSlug];do{occurenceAccumulator++;slug=originalSlug+'-'+occurenceAccumulator}while(this.seen.hasOwnProperty(slug))}if(!isDryRun){this.seen[originalSlug]=occurenceAccumulator;this.seen[slug]=0}return slug}slug(value,options={}){const slug=this.serialize(value);return this.getNextSafeSlug(slug,options.dryrun)}}class Parser{constructor(options){this.options=options||defaults;this.options.renderer=this.options.renderer||new Renderer;this.renderer=this.options.renderer;this.renderer.options=this.options;this.textRenderer=new TextRenderer;this.slugger=new Slugger}static parse(tokens,options){const parser=new Parser(options);return parser.parse(tokens)}static parseInline(tokens,options){const parser=new Parser(options);return parser.parseInline(tokens)}parse(tokens,top=true){let out='',i,j,k,l2,l3,row,cell,header,body,token,ordered,start,loose,itemBody,item,checked,task,checkbox,ret;const l=tokens.length;for(i=0;i<l;i++){token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){ret=this.options.extensions.renderers[token.type].call({parser:this},token);if(ret!==false||!['space','hr','heading','code','table','blockquote','list','html','paragraph','text'].includes(token.type)){out+=ret||'';continue}}switch(token.type){case'space':{continue}case'hr':{out+=this.renderer.hr();continue}case'heading':{out+=this.renderer.heading(this.parseInline(token.tokens),token.depth,unescape(this.parseInline(token.tokens,this.textRenderer)),this.slugger);continue}case'code':{out+=this.renderer.code(token.text,token.lang,token.escaped);continue}case'table':{header='';cell='';l2=token.header.length;for(j=0;j<l2;j++){cell+=this.renderer.tablecell(this.parseInline(token.header[j].tokens),{header:true,align:token.align[j]})}header+=this.renderer.tablerow(cell);body='';l2=token.rows.length;for(j=0;j<l2;j++){row=token.rows[j];cell='';l3=row.length;for(k=0;k<l3;k++){cell+=this.renderer.tablecell(this.parseInline(row[k].tokens),{header:false,align:token.align[k]})}body+=this.renderer.tablerow(cell)}out+=this.renderer.table(header,body);continue}case'blockquote':{body=this.parse(token.tokens);out+=this.renderer.blockquote(body);continue}case'list':{ordered=token.ordered;start=token.start;loose=token.loose;l2=token.items.length;body='';for(j=0;j<l2;j++){item=token.items[j];checked=item.checked;task=item.task;itemBody='';if(item.task){checkbox=this.renderer.checkbox(checked);if(loose){if(item.tokens.length>0&&item.tokens[0].type==='paragraph'){item.tokens[0].text=checkbox+' '+item.tokens[0].text;if(item.tokens[0].tokens&&item.tokens[0].tokens.length>0&&item.tokens[0].tokens[0].type==='text'){item.tokens[0].tokens[0].text=checkbox+' '+item.tokens[0].tokens[0].text}}else{item.tokens.unshift({type:'text',text:checkbox})}}else{itemBody+=checkbox}}itemBody+=this.parse(item.tokens,loose);body+=this.renderer.listitem(itemBody,task,checked)}out+=this.renderer.list(body,ordered,start);continue}case'html':{out+=this.renderer.html(token.text);continue}case'paragraph':{out+=this.renderer.paragraph(this.parseInline(token.tokens));continue}case'text':{body=token.tokens?this.parseInline(token.tokens):token.text;while(i+1<l&&tokens[i+1].type==='text'){token=tokens[++i];body+='\n'+(token.tokens?this.parseInline(token.tokens):token.text)}out+=top?this.renderer.paragraph(body):body;continue}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent){console.error(errMsg);return}else{throw new Error(errMsg)}}}}return out}parseInline(tokens,renderer){renderer=renderer||this.renderer;let out='',i,token,ret;const l=tokens.length;for(i=0;i<l;i++){token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){ret=this.options.extensions.renderers[token.type].call({parser:this},token);if(ret!==false||!['escape','html','link','image','strong','em','codespan','br','del','text'].includes(token.type)){out+=ret||'';continue}}switch(token.type){case'escape':{out+=renderer.text(token.text);break}case'html':{out+=renderer.html(token.text);break}case'link':{out+=renderer.link(token.href,token.title,this.parseInline(token.tokens,renderer));break}case'image':{out+=renderer.image(token.href,token.title,token.text);break}case'strong':{out+=renderer.strong(this.parseInline(token.tokens,renderer));break}case'em':{out+=renderer.em(this.parseInline(token.tokens,renderer));break}case'codespan':{out+=renderer.codespan(token.text);break}case'br':{out+=renderer.br();break}case'del':{out+=renderer.del(this.parseInline(token.tokens,renderer));break}case'text':{out+=renderer.text(token.text);break}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent){console.error(errMsg);return}else{throw new Error(errMsg)}}}}return out}}class Hooks{constructor(options){this.options=options||defaults}static passThroughHooks=new Set(['preprocess','postprocess']);preprocess(markdown){return markdown}postprocess(html){return html}}function onError(silent,async,callback){return e=>{e.message+='\nPlease report this to https://github.com/markedjs/marked.';if(silent){const msg='<p>An error occurred:</p><pre>'+escape(e.message+'',true)+'</pre>';if(async){return Promise.resolve(msg)}if(callback){callback(null,msg);return}return msg}if(async){return Promise.reject(e)}if(callback){callback(e);return}throw e}}function parseMarkdown(lexer,parser){return(src,opt,callback)=>{if(typeof opt==='function'){callback=opt;opt=null}const origOpt={...opt};opt={...marked.defaults,...origOpt};const throwError=onError(opt.silent,opt.async,callback);if(typeof src==='undefined'||src===null){return throwError(new Error('marked(): input parameter is undefined or null'))}if(typeof src!=='string'){return throwError(new Error('marked(): input parameter is of type '+Object.prototype.toString.call(src)+', string expected'))}checkSanitizeDeprecation(opt);if(opt.hooks){opt.hooks.options=opt}if(callback){const highlight=opt.highlight;let tokens;try{if(opt.hooks){src=opt.hooks.preprocess(src)}tokens=lexer(src,opt)}catch(e){return throwError(e)}const done=function(err){let out;if(!err){try{if(opt.walkTokens){marked.walkTokens(tokens,opt.walkTokens)}out=parser(tokens,opt);if(opt.hooks){out=opt.hooks.postprocess(out)}}catch(e){err=e}}opt.highlight=highlight;return err?throwError(err):callback(null,out)};if(!highlight||highlight.length<3){return done()}delete opt.highlight;if(!tokens.length)return done();let pending=0;marked.walkTokens(tokens,(function(token){if(token.type==='code'){pending++;setTimeout((()=>{highlight(token.text,token.lang,(function(err,code){if(err){return done(err)}if(code!=null&&code!==token.text){token.text=code;token.escaped=true}pending--;if(pending===0){done()}}))}),0)}}));if(pending===0){done()}return}if(opt.async){return Promise.resolve(opt.hooks?opt.hooks.preprocess(src):src).then((src=>lexer(src,opt))).then((tokens=>opt.walkTokens?Promise.all(marked.walkTokens(tokens,opt.walkTokens)).then((()=>tokens)):tokens)).then((tokens=>parser(tokens,opt))).then((html=>opt.hooks?opt.hooks.postprocess(html):html)).catch(throwError)}try{if(opt.hooks){src=opt.hooks.preprocess(src)}const tokens=lexer(src,opt);if(opt.walkTokens){marked.walkTokens(tokens,opt.walkTokens)}let html=parser(tokens,opt);if(opt.hooks){html=opt.hooks.postprocess(html)}return html}catch(e){return throwError(e)}}}function marked(src,opt,callback){return parseMarkdown(Lexer.lex,Parser.parse)(src,opt,callback)}marked.options=marked.setOptions=function(opt){marked.defaults={...marked.defaults,...opt};changeDefaults(marked.defaults);return marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...args){const extensions=marked.defaults.extensions||{renderers:{},childTokens:{}};args.forEach((pack=>{const opts={...pack};opts.async=marked.defaults.async||opts.async||false;if(pack.extensions){pack.extensions.forEach((ext=>{if(!ext.name){throw new Error('extension name required')}if(ext.renderer){const prevRenderer=extensions.renderers[ext.name];if(prevRenderer){extensions.renderers[ext.name]=function(...args){let ret=ext.renderer.apply(this,args);if(ret===false){ret=prevRenderer.apply(this,args)}return ret}}else{extensions.renderers[ext.name]=ext.renderer}}if(ext.tokenizer){if(!ext.level||ext.level!=='block'&&ext.level!=='inline'){throw new Error("extension level must be 'block' or 'inline'")}if(extensions[ext.level]){extensions[ext.level].unshift(ext.tokenizer)}else{extensions[ext.level]=[ext.tokenizer]}if(ext.start){if(ext.level==='block'){if(extensions.startBlock){extensions.startBlock.push(ext.start)}else{extensions.startBlock=[ext.start]}}else if(ext.level==='inline'){if(extensions.startInline){extensions.startInline.push(ext.start)}else{extensions.startInline=[ext.start]}}}}if(ext.childTokens){extensions.childTokens[ext.name]=ext.childTokens}}));opts.extensions=extensions}if(pack.renderer){const renderer=marked.defaults.renderer||new Renderer;for(const prop in pack.renderer){const prevRenderer=renderer[prop];renderer[prop]=(...args)=>{let ret=pack.renderer[prop].apply(renderer,args);if(ret===false){ret=prevRenderer.apply(renderer,args)}return ret}}opts.renderer=renderer}if(pack.tokenizer){const tokenizer=marked.defaults.tokenizer||new Tokenizer;for(const prop in pack.tokenizer){const prevTokenizer=tokenizer[prop];tokenizer[prop]=(...args)=>{let ret=pack.tokenizer[prop].apply(tokenizer,args);if(ret===false){ret=prevTokenizer.apply(tokenizer,args)}return ret}}opts.tokenizer=tokenizer}if(pack.hooks){const hooks=marked.defaults.hooks||new Hooks;for(const prop in pack.hooks){const prevHook=hooks[prop];if(Hooks.passThroughHooks.has(prop)){hooks[prop]=arg=>{if(marked.defaults.async){return Promise.resolve(pack.hooks[prop].call(hooks,arg)).then((ret=>prevHook.call(hooks,ret)))}const ret=pack.hooks[prop].call(hooks,arg);return prevHook.call(hooks,ret)}}else{hooks[prop]=(...args)=>{let ret=pack.hooks[prop].apply(hooks,args);if(ret===false){ret=prevHook.apply(hooks,args)}return ret}}}opts.hooks=hooks}if(pack.walkTokens){const walkTokens=marked.defaults.walkTokens;opts.walkTokens=function(token){let values=[];values.push(pack.walkTokens.call(this,token));if(walkTokens){values=values.concat(walkTokens.call(this,token))}return values}}marked.setOptions(opts)}))};marked.walkTokens=function(tokens,callback){let values=[];for(const token of tokens){values=values.concat(callback.call(marked,token));switch(token.type){case'table':{for(const cell of token.header){values=values.concat(marked.walkTokens(cell.tokens,callback))}for(const row of token.rows){for(const cell of row){values=values.concat(marked.walkTokens(cell.tokens,callback))}}break}case'list':{values=values.concat(marked.walkTokens(token.items,callback));break}default:{if(marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[token.type]){marked.defaults.extensions.childTokens[token.type].forEach((function(childTokens){values=values.concat(marked.walkTokens(token[childTokens],callback))}))}else if(token.tokens){values=values.concat(marked.walkTokens(token.tokens,callback))}}}}return values};marked.parseInline=parseMarkdown(Lexer.lexInline,Parser.parseInline);marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;const render=(file,format="html")=>{let htmlFile="";switch(format){case"html":{htmlFile=file}break;case"md":{htmlFile=marked.parse(file)}break;default:{throw TypeError(`${format} is not one of supported types.\n      Supported types:\n      'html',\n      'md' (GitHub flavored markdown),\n      'mdx' (Support for mdx is work in progress)`)}}const documentFragment=(new DOMParser).parseFromString(htmlFile,"text/html");const{document}=parseHTML(`\n<html lang="en"\n  style="\n  --light: #f9f9f9;\n  --dark: #1b1b1b;\n  background-color: black;">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport"\n    content="width=device-width">\n<title></title>\n<link type="text/css"\n    rel="stylesheet"\n    blocking="render"\n    fetchpriority="high"\n    href="/index.css">\n<script type="module"\n      rel="script"\n      async\n      src="/index.js"><\/script>\n</head>\n<body>\n</body>\n</html>\n`);document.body.innerHTML=[...documentFragment.children].map((documentFragmentChild=>documentFragmentChild.outerHTML)).join("");return[...document.children].map((documentChild=>documentChild.outerHTML)).join("")};const documentString=document=>[...document.children].map((documentChild=>documentChild.outerHTML)).join("");const trimStartWith=(inputString,trimWhat)=>inputString.startsWith(trimWhat)?trimStartWith(inputString.slice(trimWhat.length),trimWhat):inputString;const trimEndWith=(inputString,trimWhat)=>inputString.endsWith(trimWhat)?trimEndWith(inputString.slice(0,-trimWhat.length),trimWhat):inputString;const trimWith=(inputString,trimWhat)=>trimEndWith(trimStartWith(inputString,trimWhat),trimWhat);const potentialId=element=>{const result=element.id||trimWith(trimEndWith((element.textContent??"").trim(),".").replaceAll(/\s|\/|\\|\||<|>|:|;|"|'|#|\?|\[|]|\(|\)|\{|}|\^|&|%|\*|\$|@|,|\+|=|`/g,"_"),"_").replaceAll(/_{2,}/g,"_")||"1";element.removeAttribute("id");return result};const MAX_PATH$1=255;const sanitize=(inputString,maxPath=MAX_PATH$1)=>trimWith(trimEndWith((inputString||"").trim(),".").replaceAll(/\s|\/|\\|\||<|>|:|;|"|'|#|\?|\[|]|\(|\)|\{|}|\^|&|%|\*|\$|@|,|\+|=|`/g,"_"),"_").replaceAll(/_{2,}/g,"_").slice(0,maxPath)||"_";const DIGIT_STRINGS=new Set(["1","2","3","4","5","6","7","8","9","0"]);const numberStringAtEndOfStringWhereThereIsANumber=(inputString,accumulatedNumberString="")=>DIGIT_STRINGS.has(inputString.slice(-1))?numberStringAtEndOfStringWhereThereIsANumber(inputString.slice(0,-1),`${inputString.slice(-1)}${accumulatedNumberString}`):accumulatedNumberString;const numberAtEndOfString=inputString=>DIGIT_STRINGS.has(inputString.slice(-1))?parseInt(numberStringAtEndOfStringWhereThereIsANumber(inputString)):NaN;const uniqueId=(document,potentialId)=>document.getElementById(potentialId)?numberAtEndOfString(potentialId)?`${potentialId.slice(0,-`${numberAtEndOfString(potentialId)}`.length)}${numberAtEndOfString(potentialId)+1}`:`${potentialId}1`:potentialId;const removeXVariables=document=>{document.body.querySelector(":scope x-variables")?.remove()};const SyntaxError$1=SyntaxError;const RangeError$1=RangeError;const TypeError$1=TypeError;const Error$1={if:Error}.if;const undefined$1=void null;const BigInt$1=typeof BigInt==='undefined'?undefined$1:BigInt;const RegExp$1=RegExp;const WeakMap$1=WeakMap;const get=WeakMap.prototype.get;const set=WeakMap.prototype.set;const create$1=Object.create;const isSafeInteger=Number.isSafeInteger;const getOwnPropertyNames=Object.getOwnPropertyNames;const freeze=Object.freeze;const isPrototypeOf=Object.prototype.isPrototypeOf;const NULL=Object.seal?Object.preventExtensions(Object.create(null)):null;const bind=Function.prototype.bind;const test=RegExp.prototype.test;const exec=RegExp.prototype.exec;const apply$1=Reflect.apply;const Proxy$1=Proxy;const Object_defineProperty=Object.defineProperty;const assign$1=Object.assign;const Object$1=Object;const floor=Math.floor;const isArray$1=Array.isArray;const Infinity$1=1/0;const fromCharCode=String.fromCharCode;const Array$1=Array;const hasOwnProperty=Object.prototype.hasOwnProperty;const propertyIsEnumerable=Object.prototype.propertyIsEnumerable;const apply=Function.prototype.apply;var isEnum=propertyIsEnumerable.call.bind(propertyIsEnumerable);var hasOwn=Object$1.hasOwn||function(){return hasOwnProperty.bind?hasOwnProperty.call.bind(hasOwnProperty):function hasOwn(object,key){return hasOwnProperty.call(object,key)}}();var create=Object$1.create;function Descriptor(source){var target=create(NULL);if(hasOwn(source,'value')){target.value=source.value}if(hasOwn(source,'writable')){target.writable=source.writable}if(hasOwn(source,'get')){target.get=source.get}if(hasOwn(source,'set')){target.set=source.set}if(hasOwn(source,'enumerable')){target.enumerable=source.enumerable}if(hasOwn(source,'configurable')){target.configurable=source.configurable}return target}
/*!@preserve@license
	 * j-regexp
	 * 
	   More readable way for creating RegExp. Belong to "Plan J".
	 * 8.2.0
	 * LGPL-3.0
	 *  <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
	 * https://GitHub.com/LongTengDao/j-regexp/issues
	 * https://GitHub.com/LongTengDao/j-regexp/
	 */var Test=bind?bind.bind(test):function(re){return function(string){return test.call(re,string)}};var Exec=bind?bind.bind(exec):function(re){return function(string){return exec.call(re,string)}};function __PURE__(re){var test=re.test=Test(re);var exec=re.exec=Exec(re);var source=test.source=exec.source=re.source;test.unicode=exec.unicode=re.unicode;test.ignoreCase=exec.ignoreCase=re.ignoreCase;test.multiline=exec.multiline=source.indexOf('^')<0&&source.indexOf('$')<0?null:re.multiline;test.dotAll=exec.dotAll=source.indexOf('.')<0?null:re.dotAll;return re}function theRegExp(re){return __PURE__(re)}var NT=/[\n\t]+/g;var ESCAPE=/\\./g;function graveAccentReplacer($$){return $$==='\\`'?'`':$$}var includes=''.includes?function(that,searchString){return that.includes(searchString)}:function(that,searchString){return that.indexOf(searchString)>-1};function RE(template){var U=this.U;var I=this.I;var M=this.M;var S=this.S;var raw=template.raw;var source=raw[0].replace(NT,'');var index=1;var length=arguments.length;while(index!==length){var value=arguments[index];if(typeof value==='string'){source+=value}else{var value_source=value.source;if(typeof value_source!=='string'){throw TypeError$1('source')}if(value.unicode===U){throw SyntaxError$1('unicode')}if(value.ignoreCase===I){throw SyntaxError$1('ignoreCase')}if(value.multiline===M&&(includes(value_source,'^')||includes(value_source,'$'))){throw SyntaxError$1('multiline')}if(value.dotAll===S&&includes(value_source,'.')){throw SyntaxError$1('dotAll')}source+=value_source}source+=raw[index++].replace(NT,'')}var re=RegExp$1(U?source=source.replace(ESCAPE,graveAccentReplacer):source,this.flags);var test=re.test=Test(re);var exec=re.exec=Exec(re);test.source=exec.source=source;test.unicode=exec.unicode=!U;test.ignoreCase=exec.ignoreCase=!I;test.multiline=exec.multiline=includes(source,'^')||includes(source,'$')?!M:null;test.dotAll=exec.dotAll=includes(source,'.')?!S:null;return re}var RE_bind=bind&&bind.bind(RE);function Context(flags){return{U:!includes(flags,'u'),I:!includes(flags,'i'),M:!includes(flags,'m'),S:!includes(flags,'s'),flags}}var CONTEXT=Context('');var newRegExp=Proxy$1?new Proxy$1(RE,{apply:function(RE,thisArg,args){return apply$1(RE,CONTEXT,args)},get:function(RE,flags){return RE_bind(Context(flags))},defineProperty:function(){return false},preventExtensions:function(){return false}}):function(){RE.apply=RE.apply;var newRegExp=function(){return RE.apply(CONTEXT,arguments)};var d=1;var g=d*2;var i=g*2;var m=i*2;var s=i*2;var u=s*2;var y=u*2;var flags=y*2-1;while(flags--){(function(context){newRegExp[context.flags]=function(){return RE.apply(context,arguments)}})(Context((flags&d?'':'d')+(flags&g?'':'g')+(flags&i?'':'i')+(flags&m?'':'m')+(flags&s?'':'s')+(flags&u?'':'u')+(flags&y?'':'y')))}return freeze?freeze(newRegExp):newRegExp}();var clearRegExp='$_'in RegExp$1?function(){var REGEXP=/^/;REGEXP.test=REGEXP.test;return function clearRegExp(value){REGEXP.test('');return value}}():function clearRegExp(value){return value};var clearRegExp$1=clearRegExp;var NEED_TO_ESCAPE_IN_REGEXP=/^[$()*+\-.?[\\\]^{|]/;var SURROGATE_PAIR=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/;var GROUP=create$1(NULL);function groupify(branches,uFlag,noEscape){var group=create$1(NULL);var appendBranch=uFlag?appendPointBranch:appendCodeBranch;for(var length=branches.length,index=0;index<length;++index){appendBranch(group,branches[index])}return sourcify(group,!noEscape)}function appendPointBranch(group,branch){if(branch){var character=SURROGATE_PAIR.test(branch)?branch.slice(0,2):branch.charAt(0);appendPointBranch(group[character]||(group[character]=create$1(NULL)),branch.slice(character.length))}else{group['']=GROUP}}function appendCodeBranch(group,branch){if(branch){var character=branch.charAt(0);appendCodeBranch(group[character]||(group[character]=create$1(NULL)),branch.slice(1))}else{group['']=GROUP}}function sourcify(group,needEscape){var branches=[];var singleCharactersBranch=[];var noEmptyBranch=true;for(var character in group){if(character){var sub_branches=sourcify(group[character],needEscape);if(needEscape&&NEED_TO_ESCAPE_IN_REGEXP.test(character)){character='\\'+character}sub_branches?branches.push(character+sub_branches):singleCharactersBranch.push(character)}else{noEmptyBranch=false}}singleCharactersBranch.length&&branches.unshift(singleCharactersBranch.length===1?singleCharactersBranch[0]:'['+singleCharactersBranch.join('')+']');return branches.length===0?'':(branches.length===1&&(singleCharactersBranch.length||noEmptyBranch)?branches[0]:'(?:'+branches.join('|')+')')+(noEmptyBranch?'':'?')}const WeakSet$1=WeakSet;const has=WeakSet.prototype.has;const add=WeakSet.prototype.add;const del=WeakSet.prototype['delete'];const keys=Object.keys;const getOwnPropertySymbols=Object.getOwnPropertySymbols;const Null$1=function(){var assign=Object.assign||function assign(target,source){var keys$1,index,key;for(keys$1=keys(source),index=0;index<keys$1.length;++index){key=keys$1[index];target[key]=source[key]}if(getOwnPropertySymbols){for(keys$1=getOwnPropertySymbols(source),index=0;index<keys$1.length;++index){key=keys$1[index];if(isEnum(source,key)){target[key]=source[key]}}}return target};function Nullify(constructor){delete constructor.prototype.constructor;freeze(constructor.prototype);return constructor}function Null(origin){return origin===undefined$1?this:typeof origin==='function'?Nullify(origin):assign(create(NULL),origin)}delete Null.name;Null.prototype=null;freeze(Null);return Null}();const is=Object.is;const Object_defineProperties=Object.defineProperties;const fromEntries=Object.fromEntries;const Reflect_construct=Reflect.construct;const Reflect_defineProperty=Reflect.defineProperty;const Reflect_deleteProperty=Reflect.deleteProperty;const ownKeys=Reflect.ownKeys;
/*!@preserve@license
	 * j-orderify
	 *  proxy symbol string
	   Return a proxy for given object, which can guarantee own keys are in setting order, even if the key name is symbol or int string. Belong to "Plan J".
	 * 7.0.1
	 * LGPL-3.0
	 *  <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
	 * https://GitHub.com/LongTengDao/j-orderify/issues
	 * https://GitHub.com/LongTengDao/j-orderify/
	 */const Keeper=()=>[];const newWeakMap=()=>{const weakMap=new WeakMap$1;weakMap.has=weakMap.has;weakMap.get=weakMap.get;weakMap.set=weakMap.set;return weakMap};const target2keeper=newWeakMap();const proxy2target=newWeakMap();const target2proxy=newWeakMap();const handlers=assign$1(create$1(NULL),{defineProperty:(target,key,descriptor)=>{if(hasOwn(target,key)){return Reflect_defineProperty(target,key,assign$1(create$1(NULL),descriptor))}if(Reflect_defineProperty(target,key,assign$1(create$1(NULL),descriptor))){const keeper=target2keeper.get(target);keeper[keeper.length]=key;return true}return false},deleteProperty:(target,key)=>{if(Reflect_deleteProperty(target,key)){const keeper=target2keeper.get(target);const index=keeper.indexOf(key);index<0||--keeper.copyWithin(index,index+1).length;return true}return false},ownKeys:target=>target2keeper.get(target),construct:(target,args,newTarget)=>orderify(Reflect_construct(target,args,newTarget)),apply:(target,thisArg,args)=>orderify(apply$1(target,thisArg,args))});const newProxy=(target,keeper)=>{target2keeper.set(target,keeper);const proxy=new Proxy$1(target,handlers);proxy2target.set(proxy,target);return proxy};const orderify=object=>{if(proxy2target.has(object)){return object}let proxy=target2proxy.get(object);if(proxy){return proxy}proxy=newProxy(object,assign$1(Keeper(),ownKeys(object)));target2proxy.set(object,proxy);return proxy};const Null=function(){function throwConstructing(){throw TypeError$1(`Super constructor Null cannot be invoked with 'new'`)}function throwApplying(){throw TypeError$1(`Super constructor Null cannot be invoked without 'new'`)}const Nullify=constructor=>{delete constructor.prototype.constructor;freeze(constructor.prototype);return constructor};function Null(constructor){return new.target?new.target===Null?throwConstructing():newProxy(this,Keeper()):typeof constructor==='function'?Nullify(constructor):throwApplying()}Null.prototype=null;Object_defineProperty(Null,'name',assign$1(create$1(NULL),{value:'',configurable:false}));freeze(Null);return Null}();const map_has=WeakMap.prototype.has;const INLINES=new WeakMap$1;const SECTIONS=new WeakSet$1;const isInline=map_has.bind(INLINES);const beInline=set.bind(INLINES);const beSection=add.bind(SECTIONS);const INLINE=true;const tables=new WeakSet$1;const tables_add=add.bind(tables);const isTable=has.bind(tables);const implicitTables=new WeakSet$1;const implicitTables_add=add.bind(implicitTables);const implicitTables_del=del.bind(implicitTables);const directlyIfNot=table=>{if(implicitTables_del(table)){beSection(table);return true}return false};const DIRECTLY=true;const IMPLICITLY=false;const pairs=new WeakSet$1;const pairs_add=add.bind(pairs);const fromPair=has.bind(pairs);const PAIR=true;const PlainTable=Null$1(class Table extends Null$1{constructor(isDirect,isInline$fromPair){super();tables_add(this);isDirect?isInline$fromPair?beInline(this,true):beSection(this):(isInline$fromPair?pairs_add:implicitTables_add)(this);return this}});const OrderedTable=Null$1(class Table extends Null{constructor(isDirect,isInline$fromPair){super();tables_add(this);isDirect?isInline$fromPair?beInline(this,true):beSection(this):(isInline$fromPair?pairs_add:implicitTables_add)(this);return this}});const NONE=[];let sourcePath='';let sourceLines=NONE;let lastLineIndex=-1;let lineIndex=-1;const throws=error=>{throw error};const EOL=/\r?\n/;const todo=(source,path)=>{if(typeof path!=='string'){throw TypeError$1(`TOML.parse({ path })`)}sourcePath=path;sourceLines=source.split(EOL);lastLineIndex=sourceLines.length-1;lineIndex=-1};const next=()=>sourceLines[++lineIndex];const rest=()=>lineIndex!==lastLineIndex;class mark{lineIndex=lineIndex;type;restColumn;constructor(type,restColumn){this.type=type;this.restColumn=restColumn;return this}must(){lineIndex===lastLineIndex&&throws(SyntaxError$1(`${this.type} is not close until the end of the file`+where(', which started from ',this.lineIndex,sourceLines[this.lineIndex].length-this.restColumn+1)));return sourceLines[++lineIndex]}nowrap(argsMode){throw throws(Error$1(`TOML.parse(${argsMode?`${argsMode}multilineStringJoiner`:`,{ joiner }`}) must be passed, while the source including multi-line string`+where(', which started from ',this.lineIndex,sourceLines[this.lineIndex].length-this.restColumn+1)))}}const where=(pre,rowIndex=lineIndex,columnNumber=0)=>sourceLines===NONE?'':sourcePath?`\n    at (${sourcePath}:${rowIndex+1}:${columnNumber})`:`${pre}line ${rowIndex+1}: ${sourceLines[rowIndex]}`;const done=()=>{sourcePath='';sourceLines=NONE};const Whitespace=/[ \t]/;const PRE_WHITESPACE=newRegExp`
	^${Whitespace}+`.valueOf();const{exec:VALUE_REST_exec}=newRegExp.s`
	^
	(
		(?:\d\d\d\d-\d\d-\d\d \d)?
		[\w\-+.:]+
	)
	${Whitespace}*
	(.*)
	$`.valueOf();const{exec:LITERAL_STRING_exec}=newRegExp.s`
	^
	'([^']*)'
	${Whitespace}*
	(.*)`.valueOf();const{exec:MULTI_LINE_LITERAL_STRING_0_1_2}=newRegExp.s`
	^
	(.*?)
	'''('{0,2})
	${Whitespace}*
	(.*)`.valueOf();const{exec:MULTI_LINE_LITERAL_STRING_0}=newRegExp.s`
	^
	(.*?)
	'''()
	${Whitespace}*
	(.*)`.valueOf();let __MULTI_LINE_LITERAL_STRING_exec=MULTI_LINE_LITERAL_STRING_0;const SYM_WHITESPACE=newRegExp.s`
	^
	.
	${Whitespace}*`.valueOf();const Tag=/[^\x00-\x1F"#'()<>[\\\]`{}\x7F]+/;const{exec:KEY_VALUE_PAIR_exec}=newRegExp.s`
	^
	${Whitespace}*
	=
	${Whitespace}*
	(?:
		<(${Tag})>
		${Whitespace}*
	)?
	(.*)
	$`.valueOf();const{exec:_VALUE_PAIR_exec}=newRegExp.s`
	^
	<(${Tag})>
	${Whitespace}*
	(.*)
	$`.valueOf();const{exec:TAG_REST_exec}=newRegExp.s`
	^
	<(${Tag})>
	${Whitespace}*
	(.*)
	$`.valueOf();const MULTI_LINE_BASIC_STRING=theRegExp(/[^\\"]+|\\.?|"(?!"")"?/sy);const MULTI_LINE_BASIC_STRING_exec_0_length=_=>{let lastIndex=0;while(MULTI_LINE_BASIC_STRING.test(_)){lastIndex=MULTI_LINE_BASIC_STRING.lastIndex}return lastIndex};const ESCAPED_EXCLUDE_CONTROL_CHARACTER_TAB______=/[^\\\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;const ESCAPED_EXCLUDE_CONTROL_CHARACTER__________=/[^\\\x00-\x09\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;const ESCAPED_EXCLUDE_CONTROL_CHARACTER_DEL______=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;const ESCAPED_EXCLUDE_CONTROL_CHARACTER_DEL_SLASH=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\/]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;let __ESCAPED_EXCLUDE_CONTROL_CHARACTER=ESCAPED_EXCLUDE_CONTROL_CHARACTER_TAB______;const ESCAPED_EXCLUDE_CONTROL_CHARACTER_test=_=>!_.replace(__ESCAPED_EXCLUDE_CONTROL_CHARACTER,'');const BASIC_STRING_TAB______=theRegExp(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);const BASIC_STRING__________=theRegExp(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);const BASIC_STRING_DEL______=theRegExp(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);const BASIC_STRING_DEL_SLASH=theRegExp(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\/]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);let __BASIC_STRING=BASIC_STRING_DEL_SLASH;const BASIC_STRING_exec_1_endIndex=line=>{let lastIndex=__BASIC_STRING.lastIndex=1;while(__BASIC_STRING.test(line)){lastIndex=__BASIC_STRING.lastIndex}lastIndex!==line.length&&line[lastIndex]==='"'||throws(SyntaxError$1(`Bad basic string`+where(' at ')));return lastIndex};const{test:IS_DOT_KEY}=theRegExp(/^[ \t]*\./);const DOT_KEY=/^[ \t]*\.[ \t]*/;const{exec:BARE_KEY_STRICT}=theRegExp(/^[\w-]+/);const{exec:BARE_KEY_FREE}=theRegExp(/^[^ \t#=[\]'".]+(?:[ \t]+[^ \t#=[\]'".]+)*/);let __BARE_KEY_exec=BARE_KEY_FREE;const{exec:LITERAL_KEY____}=theRegExp(/^'[^'\x00-\x08\x0B-\x1F\x7F]*'/);const{exec:LITERAL_KEY_DEL}=theRegExp(/^'[^'\x00-\x08\x0B-\x1F]*'/);let __LITERAL_KEY_exec=LITERAL_KEY_DEL;let supportArrayOfTables=true;const TABLE_DEFINITION_exec_groups=(lineRest,parseKeys)=>{const asArrayItem=lineRest[1]==='[';if(asArrayItem){supportArrayOfTables||throws(SyntaxError$1(`Array of Tables is not allowed before TOML v0.2`+where(', which at ')));lineRest=lineRest.slice(2)}else{lineRest=lineRest.slice(1)}lineRest=lineRest.replace(PRE_WHITESPACE,'');const{leadingKeys,finalKey}=({lineRest}=parseKeys(lineRest));lineRest=lineRest.replace(PRE_WHITESPACE,'');lineRest&&lineRest[0]===']'||throws(SyntaxError$1(`Table header is not closed`+where(', which is found at ')));(lineRest.length>1?lineRest[1]===']'===asArrayItem:!asArrayItem)||throws(SyntaxError$1(`Square brackets of Table definition statement not match`+where(' at ')));lineRest=lineRest.slice(asArrayItem?2:1).replace(PRE_WHITESPACE,'');let tag;if(lineRest&&lineRest[0]==='<'){({1:tag,2:lineRest}=TAG_REST_exec(lineRest)||throws(SyntaxError$1(`Bad tag`+where(' at '))))}else{tag=''}return{leadingKeys,finalKey,asArrayItem,tag,lineRest}};const KEY_VALUE_PAIR_exec_groups=({leadingKeys,finalKey,lineRest})=>{const{1:tag=''}=({2:lineRest}=KEY_VALUE_PAIR_exec(lineRest)||throws(SyntaxError$1(`Keys must equal something`+where(', but missing at '))));tag||lineRest&&lineRest[0]!=='#'||throws(SyntaxError$1(`Value can not be missing after euqal sign`+where(', which is found at ')));return{leadingKeys,finalKey,tag,lineRest}};const{test:CONTROL_CHARACTER_EXCLUDE_TAB____}=theRegExp(/[\x00-\x08\x0B-\x1F\x7F]/);const{test:CONTROL_CHARACTER_EXCLUDE_TAB_DEL}=theRegExp(/[\x00-\x08\x0B-\x1F]/);let __CONTROL_CHARACTER_EXCLUDE_test=CONTROL_CHARACTER_EXCLUDE_TAB____;const switchRegExp=specificationVersion=>{switch(specificationVersion){case 1.0:__MULTI_LINE_LITERAL_STRING_exec=MULTI_LINE_LITERAL_STRING_0_1_2;__LITERAL_KEY_exec=LITERAL_KEY____;__CONTROL_CHARACTER_EXCLUDE_test=CONTROL_CHARACTER_EXCLUDE_TAB____;__ESCAPED_EXCLUDE_CONTROL_CHARACTER=ESCAPED_EXCLUDE_CONTROL_CHARACTER_TAB______;__BASIC_STRING=BASIC_STRING_TAB______;__BARE_KEY_exec=BARE_KEY_STRICT;supportArrayOfTables=true;break;case 0.5:__MULTI_LINE_LITERAL_STRING_exec=MULTI_LINE_LITERAL_STRING_0;__LITERAL_KEY_exec=LITERAL_KEY____;__CONTROL_CHARACTER_EXCLUDE_test=CONTROL_CHARACTER_EXCLUDE_TAB____;__ESCAPED_EXCLUDE_CONTROL_CHARACTER=ESCAPED_EXCLUDE_CONTROL_CHARACTER__________;__BASIC_STRING=BASIC_STRING__________;__BARE_KEY_exec=BARE_KEY_STRICT;supportArrayOfTables=true;break;case 0.4:__MULTI_LINE_LITERAL_STRING_exec=MULTI_LINE_LITERAL_STRING_0;__LITERAL_KEY_exec=LITERAL_KEY_DEL;__CONTROL_CHARACTER_EXCLUDE_test=CONTROL_CHARACTER_EXCLUDE_TAB_DEL;__ESCAPED_EXCLUDE_CONTROL_CHARACTER=ESCAPED_EXCLUDE_CONTROL_CHARACTER_DEL______;__BASIC_STRING=BASIC_STRING_DEL______;__BARE_KEY_exec=BARE_KEY_STRICT;supportArrayOfTables=true;break;default:__MULTI_LINE_LITERAL_STRING_exec=MULTI_LINE_LITERAL_STRING_0;__LITERAL_KEY_exec=LITERAL_KEY_DEL;__CONTROL_CHARACTER_EXCLUDE_test=CONTROL_CHARACTER_EXCLUDE_TAB_DEL;__ESCAPED_EXCLUDE_CONTROL_CHARACTER=ESCAPED_EXCLUDE_CONTROL_CHARACTER_DEL_SLASH;__BASIC_STRING=BASIC_STRING_DEL_SLASH;__BARE_KEY_exec=BARE_KEY_FREE;supportArrayOfTables=false}};const NUM=newRegExp`
	(?:
		0
		(?:
			b[01][_01]*
		|
			o[0-7][_0-7]*
		|
			x[\dA-Fa-f][_\dA-Fa-f]*
		|
			(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
		)
	|
		[1-9][_\d]*
		(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
	|
		inf
	|
		nan
	)
`.valueOf();const{test:IS_AMAZING}=newRegExp`
	^(?:
		-?${NUM}
		(?:-${NUM})*
	|
		true
	|
		false
	)$
`.valueOf();const{test:BAD_DXOB}=newRegExp`_(?![\dA-Fa-f])`.valueOf();const isAmazing=keys=>IS_AMAZING(keys)&&!BAD_DXOB(keys);let mustScalar=true;let ARGS_MODE='';let useWhatToJoinMultilineString=null;let usingBigInt=true;let IntegerMinNumber=0;let IntegerMaxNumber=0;const ANY={test:()=>true};const Keys=class KeysRegExp extends RegExp$1{constructor(keys){super(`^${groupify(keys)}$`);let maxLength=-1;for(let index=keys.length;index;){const{length}=keys[--index];if(length>maxLength){maxLength=length}}this.lastIndex=maxLength+1;return this}test(key){return key.length<this.lastIndex&&super.test(key)}};const isKeys=isPrototypeOf.bind(freeze(Keys.prototype));let KEYS$1=ANY;let preserveLiteral;let zeroDatetime;let inlineTable;let moreDatetime;let disallowEmptyKey;let sError;let sFloat;let Table;let allowLonger;let enableNull;let allowInlineTableMultilineAndTrailingCommaEvenNoComma;let preserveComment;let disableDigit;const arrayTypes=new WeakMap$1;const arrayTypes_get=get.bind(arrayTypes);const arrayTypes_set=set.bind(arrayTypes);const As=()=>{const as=array=>{const got=arrayTypes_get(array);got?got===as||throws(TypeError$1(`Types in Array must be same`+where('. Check '))):arrayTypes_set(array,as);return array};return as};const AS_TYPED={asNulls:As(),asStrings:As(),asTables:As(),asArrays:As(),asBooleans:As(),asFloats:As(),asIntegers:As(),asOffsetDateTimes:As(),asLocalDateTimes:As(),asLocalDates:As(),asLocalTimes:As()};const asMixed=array=>array;let asNulls,asStrings,asTables,asArrays,asBooleans,asFloats,asIntegers,asOffsetDateTimes,asLocalDateTimes,asLocalDates,asLocalTimes;let processor=null;let each=null;const collect_on=(tag,array,table,key)=>{const _each=create$1(NULL);_each._linked=each;_each.tag=tag;if(table){_each.table=table;_each.key=key}if(array){_each.array=array;_each.index=array.length}each=_each};const collect_off=()=>{throw throws(SyntaxError$1(`xOptions.tag is not enabled, but found tag syntax`+where(' at ')))};let collect=collect_off;const Process=()=>{if(each){const _processor=processor;let _each=each;each=null;return()=>{const processor=_processor;let each=_each;_each=null;do{processor(each)}while(each=each._linked)}}return null};const clear=()=>{KEYS$1=ANY;useWhatToJoinMultilineString=processor=each=null;zeroDatetime=false};const use=(specificationVersion,multilineStringJoiner,useBigInt,keys,xOptions,argsMode)=>{ARGS_MODE=argsMode;let mixed;switch(specificationVersion){case 1.0:mustScalar=mixed=moreDatetime=sFloat=inlineTable=true;zeroDatetime=disallowEmptyKey=false;break;case 0.5:mustScalar=moreDatetime=sFloat=inlineTable=true;mixed=zeroDatetime=disallowEmptyKey=false;break;case 0.4:mustScalar=disallowEmptyKey=inlineTable=true;mixed=zeroDatetime=moreDatetime=sFloat=false;break;case 0.3:mustScalar=disallowEmptyKey=true;mixed=zeroDatetime=moreDatetime=sFloat=inlineTable=false;break;case 0.2:zeroDatetime=disallowEmptyKey=true;mustScalar=mixed=moreDatetime=sFloat=inlineTable=false;break;case 0.1:zeroDatetime=disallowEmptyKey=true;mustScalar=mixed=moreDatetime=sFloat=inlineTable=false;break;default:throw RangeError$1(`TOML.parse(,specificationVersion)`)}switchRegExp(specificationVersion);if(typeof multilineStringJoiner==='string'){useWhatToJoinMultilineString=multilineStringJoiner}else if(multilineStringJoiner===undefined$1){useWhatToJoinMultilineString=null}else{throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE}multilineStringJoiner`:`,{ joiner }`})`)}if(useBigInt===undefined$1||useBigInt===true){usingBigInt=true}else if(useBigInt===false){usingBigInt=false}else{if(typeof useBigInt!=='number'){throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},useBigInt`:`,{ bigint }`})`)}if(!isSafeInteger(useBigInt)){throw RangeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},useBigInt`:`,{ bigint }`})`)}usingBigInt=null;useBigInt>=0?IntegerMinNumber=-(IntegerMaxNumber=useBigInt):IntegerMaxNumber=-(IntegerMinNumber=useBigInt)-1}if(!BigInt$1&&usingBigInt!==false){throw Error$1(`Can't work without TOML.parse(${ARGS_MODE?`${ARGS_MODE},useBigInt`:`,{ bigint }`}) being set to false, because the host doesn't have BigInt support`)}if(keys==null){KEYS$1=ANY}else{if(!isKeys(keys)){throw TypeError$1(`TOML.parse(,{ keys })`)}KEYS$1=keys}if(xOptions==null){Table=PlainTable;sError=allowLonger=enableNull=allowInlineTableMultilineAndTrailingCommaEvenNoComma=false;collect=collect_off}else if(typeof xOptions!=='object'){throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},,xOptions`:`,{ x }`})`)}else{const{order,longer,exact,null:_null,multi,comment,string,literal,tag,...unknown}=xOptions;const unknownNames=getOwnPropertyNames(unknown);if(unknownNames.length){throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},,{ ${unknownNames.join(', ')} }`:`,{ x: { ${unknownNames.join(', ')} } }`})`)}Table=order?OrderedTable:PlainTable;allowLonger=!longer;sError=!!exact;enableNull=!!_null;allowInlineTableMultilineAndTrailingCommaEvenNoComma=!!multi;preserveComment=!!comment;disableDigit=!!string;preserveLiteral=!!literal;if(tag){if(typeof tag!=='function'){throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},,{ tag }`:`,{ x: { tag } }`})`)}if(!mixed){throw TypeError$1(`TOML.parse(${ARGS_MODE?`${ARGS_MODE},,xOptions`:`,{ x }`}) xOptions.tag needs at least TOML 1.0 to support mixed type array`)}processor=tag;collect=collect_on}else{collect=collect_off}}mixed?asNulls=asStrings=asTables=asArrays=asBooleans=asFloats=asIntegers=asOffsetDateTimes=asLocalDateTimes=asLocalDates=asLocalTimes=asMixed:({asNulls,asStrings,asTables,asArrays,asBooleans,asFloats,asIntegers,asOffsetDateTimes,asLocalDateTimes,asLocalDates,asLocalTimes}=AS_TYPED)};const isView=ArrayBuffer.isView;const isArrayBuffer=function(){if(typeof ArrayBuffer==='function'){var byteLength_apply=apply.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,'byteLength').get);return function isArrayBuffer(value){try{byteLength_apply(value)}catch(error){return false}return true}}return function isArrayBuffer(){return false}}();const TextDecoder$1=TextDecoder;const Symbol$1=Symbol;const previous=Symbol$1('previous');const x=rootStack=>{let stack=rootStack;let result=stack.next();if(!result.done){result.value[previous]=stack;result=(stack=result.value).next();for(;;){if(result.done){if(stack===rootStack){break}stack=stack[previous];result=stack.next(result.value)}else{result.value[previous]=stack;result=(stack=result.value).next()}}}return result.value};const _literal=Symbol$1('_literal');const LiteralObject=(literal,value)=>{const object=Object$1(value);object[_literal]=literal;return object};const arrays=new WeakSet$1;const arrays_add=add.bind(arrays);const isArray=has.bind(arrays);const OF_TABLES=false;const STATICALLY=true;const staticalArrays=new WeakSet$1;const staticalArrays_add=add.bind(staticalArrays);const isStatic=has.bind(staticalArrays);const newArray=isStatic=>{const array=[];arrays_add(array);isStatic&&staticalArrays_add(array);return array};const NativeDate=Date;const parse$2=Date.parse;const preventExtensions=Object.preventExtensions;const getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors;const defineProperties=function defineProperties(object,descriptorMap){var created=create$1(NULL);var names=keys(descriptorMap);for(var length=names.length,index=0;index<length;++index){var name=names[index];created[name]=Descriptor(descriptorMap[name])}if(getOwnPropertySymbols){var symbols=getOwnPropertySymbols(descriptorMap);for(length=symbols.length,index=0;index<length;++index){var symbol=symbols[index];if(isEnum(descriptorMap,symbol)){created[symbol]=Descriptor(descriptorMap[symbol])}}}return Object_defineProperties(object,created)};const fpc=c=>{freeze(freeze(c).prototype);return c};const _29_=/(?:0[1-9]|1\d|2\d)/;const _30_=/(?:0[1-9]|[12]\d|30)/;const _31_=/(?:0[1-9]|[12]\d|3[01])/;const _23_=/(?:[01]\d|2[0-3])/;const _59_=/[0-5]\d/;const YMD=newRegExp`
	\d\d\d\d-
	(?:
		0
		(?:
			[13578]-${_31_}
			|
			[469]-${_30_}
			|
			2-${_29_}
		)
		|
		1
		(?:
			[02]-${_31_}
			|
			1-${_30_}
		)
	)
`.valueOf();const HMS=newRegExp`
	${_23_}:${_59_}:${_59_}
`.valueOf();const OFFSET$=/(?:[Zz]|[+-]\d\d:\d\d)$/;const{exec:Z_exec}=theRegExp(/(([+-])\d\d):(\d\d)$/);const{exec:OFFSET_DATETIME_exec}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	(?:\.\d{1,3}(\d*?)0*)?
	(?:[Zz]|[+-]${_23_}:${_59_})
	$`.valueOf();const{exec:OFFSET_DATETIME_ZERO_exec}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	()
	[Zz]
	$`.valueOf();const{test:IS_LOCAL_DATETIME}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	(?:\.\d+)?
	$`.valueOf();const{test:IS_LOCAL_DATE}=newRegExp`
	^
	${YMD}
	$`.valueOf();const{test:IS_LOCAL_TIME}=newRegExp`
	^
	${HMS}
	(?:\.\d+)?
	$`.valueOf();const T=/[ t]/;const DELIMITER_DOT=/[-T:.]/g;const DOT_ZERO=/\.?0+$/;const ZERO=/\.(\d*?)0+$/;const zeroReplacer=(match,p1)=>p1;const Datetime=(()=>{const Datetime=function(){return this};const descriptors=Null$1(null);{const descriptor=Null$1(null);for(const key of ownKeys(NativeDate.prototype)){key==='constructor'||key==='toJSON'||(descriptors[key]=descriptor)}}Datetime.prototype=preventExtensions(create$1(NativeDate.prototype,descriptors));return freeze(Datetime)})();const Value=ISOString=>ISOString.replace(ZERO,zeroReplacer).replace(DELIMITER_DOT,'');const d=/./gs;const d2u=d=>''[d];const ValueOFFSET=(time,more)=>time<0?(''+(time+62167305540000)).replace(d,d2u).padStart(14,'')+more.replace(d,d2u)+time:more?(time+'.').padStart(16,'0')+more:(''+time).padStart(15,'0');const validateLeap=literal=>{if(literal.startsWith('02-29',5)){const year=+literal.slice(0,4);return year&0b11?false:year%100?true:year%400?false:year%3200?true:false}return true};const{test:VALIDATE_LEAP}=newRegExp.s`^.....(?:06.30|12.31).23:59:59`.valueOf();const DATE$1=defineProperties(new NativeDate(0),getOwnPropertyDescriptors(NativeDate.prototype));const OffsetDateTime_ISOString=Symbol$1('OffsetDateTime_ISOString');const OffsetDateTime_value=Symbol$1('OffsetDateTime_value');const OffsetDateTime_use=(that,$=0)=>{DATE$1.setTime(+that[OffsetDateTime_value]+$);return DATE$1};const OffsetDateTime=fpc(class OffsetDateTime extends Datetime{[OffsetDateTime_ISOString];[OffsetDateTime_value];get[Symbol$1.toStringTag](){return'OffsetDateTime'}valueOf(){return this[OffsetDateTime_value]}toISOString(){return this[OffsetDateTime_ISOString]}constructor(literal){validateLeap(literal)||throws(SyntaxError$1(`Invalid Offset Date-Time ${literal}`+where(' at ')));const with60=literal.startsWith('60',17);let without60=with60?literal.slice(0,17)+'59'+literal.slice(19):literal;const{1:more=''}=(zeroDatetime?OFFSET_DATETIME_ZERO_exec(without60):OFFSET_DATETIME_exec(without60))||throws(SyntaxError$1(`Invalid Offset Date-Time ${literal}`+where(' at ')));const time=parse$2(without60=without60.replace(T,'T').replace('z','Z'));if(with60){DATE$1.setTime(time);VALIDATE_LEAP(DATE$1.toISOString())||throws(SyntaxError$1(`Invalid Offset Date-Time ${literal}`+where(' at ')))}super();this[OffsetDateTime_ISOString]=without60;this[OffsetDateTime_value]=ValueOFFSET(time,more);return this}getUTCFullYear(){return OffsetDateTime_use(this).getUTCFullYear()}getUTCMonth(){return OffsetDateTime_use(this).getUTCMonth()}getUTCDate(){return OffsetDateTime_use(this).getUTCDate()}getUTCHours(){return OffsetDateTime_use(this).getUTCHours()}getUTCMinutes(){return OffsetDateTime_use(this).getUTCMinutes()}getUTCSeconds(){return OffsetDateTime_use(this).getUTCSeconds()}getUTCMilliseconds(){return OffsetDateTime_use(this).getUTCMilliseconds()}getUTCDay(){return OffsetDateTime_use(this).getUTCDay()}getTimezoneOffset(){const z=Z_exec(this[OffsetDateTime_ISOString]);return z?+z[1]*60+ +(z[2]+z[3]):0}getTime(){return floor(+this[OffsetDateTime_value])}});const LocalDateTime_ISOString=Symbol$1('LocalDateTime_ISOString');const LocalDateTime_value=Symbol$1('LocalDateTime_value');const LocalDateTime_get=(that,start,end)=>+that[LocalDateTime_ISOString].slice(start,end);const LocalDateTime_set=(that,start,end,value)=>{const string=''+value;const size=end-start;if(string.length>size){throw RangeError$1()}that[LocalDateTime_value]=Value(that[LocalDateTime_ISOString]=that[LocalDateTime_ISOString].slice(0,start)+string.padStart(size,'0')+that[LocalDateTime_ISOString].slice(end))};const LocalDateTime=fpc(class LocalDateTime extends Datetime{[LocalDateTime_ISOString];[LocalDateTime_value];get[Symbol$1.toStringTag](){return'LocalDateTime'}valueOf(){return this[LocalDateTime_value]}toISOString(){return this[LocalDateTime_ISOString]}constructor(literal){IS_LOCAL_DATETIME(literal)&&validateLeap(literal)||throws(SyntaxError$1(`Invalid Local Date-Time ${literal}`+where(' at ')));super();this[LocalDateTime_value]=Value(this[LocalDateTime_ISOString]=literal.replace(T,'T'));return this}getFullYear(){return LocalDateTime_get(this,0,4)}setFullYear(value){LocalDateTime_set(this,0,4,value)}getMonth(){return LocalDateTime_get(this,5,7)-1}setMonth(value){LocalDateTime_set(this,5,7,value+1)}getDate(){return LocalDateTime_get(this,8,10)}setDate(value){LocalDateTime_set(this,8,10,value)}getHours(){return LocalDateTime_get(this,11,13)}setHours(value){LocalDateTime_set(this,11,13,value)}getMinutes(){return LocalDateTime_get(this,14,16)}setMinutes(value){LocalDateTime_set(this,14,16,value)}getSeconds(){return LocalDateTime_get(this,17,19)}setSeconds(value){LocalDateTime_set(this,17,19,value)}getMilliseconds(){return+this[LocalDateTime_value].slice(14,17).padEnd(3,'0')}setMilliseconds(value){this[LocalDateTime_value]=Value(this[LocalDateTime_ISOString]=this[LocalDateTime_ISOString].slice(0,19)+(value?('.'+(''+value).padStart(3,'0')).replace(DOT_ZERO,''):''))}});const LocalDate_ISOString=Symbol$1('LocalDate_ISOString');const LocalDate_value=Symbol$1('LocalDate_value');const LocalDate_get=(that,start,end)=>+that[LocalDate_ISOString].slice(start,end);const LocalDate_set=(that,start,end,value)=>{const string=''+value;const size=end-start;if(string.length>size){throw RangeError$1()}that[LocalDate_value]=Value(that[LocalDate_ISOString]=that[LocalDate_ISOString].slice(0,start)+string.padStart(size,'0')+that[LocalDate_ISOString].slice(end))};const LocalDate=fpc(class LocalDate extends Datetime{[LocalDate_ISOString];[LocalDate_value];get[Symbol$1.toStringTag](){return'LocalDate'}valueOf(){return this[LocalDate_value]}toISOString(){return this[LocalDate_ISOString]}constructor(literal){IS_LOCAL_DATE(literal)&&validateLeap(literal)||throws(SyntaxError$1(`Invalid Local Date ${literal}`+where(' at ')));super();this[LocalDate_value]=Value(this[LocalDate_ISOString]=literal);return this}getFullYear(){return LocalDate_get(this,0,4)}setFullYear(value){LocalDate_set(this,0,4,value)}getMonth(){return LocalDate_get(this,5,7)-1}setMonth(value){LocalDate_set(this,5,7,value+1)}getDate(){return LocalDate_get(this,8,10)}setDate(value){LocalDate_set(this,8,10,value)}});const LocalTime_ISOString=Symbol$1('LocalTime_ISOString');const LocalTime_value=Symbol$1('LocalTime_value');const LocalTime_get=(that,start,end)=>+that[LocalTime_ISOString].slice(start,end);const LocalTime_set=(that,start,end,value)=>{const string=''+value;const size=end-start;if(string.length>size){throw RangeError$1()}that[LocalTime_value]=Value(that[LocalTime_ISOString]=that[LocalTime_ISOString].slice(0,start)+string.padStart(2,'0')+that[LocalTime_ISOString].slice(end))};const LocalTime=fpc(class LocalTime extends Datetime{[LocalTime_ISOString];[LocalTime_value];get[Symbol$1.toStringTag](){return'LocalTime'}valueOf(){return this[LocalTime_value]}toISOString(){return this[LocalTime_ISOString]}constructor(literal){IS_LOCAL_TIME(literal)||throws(SyntaxError$1(`Invalid Local Time ${literal}`+where(' at ')));super();this[LocalTime_value]=Value(this[LocalTime_ISOString]=literal);return this}getHours(){return LocalTime_get(this,0,2)}setHours(value){LocalTime_set(this,0,2,value)}getMinutes(){return LocalTime_get(this,3,5)}setMinutes(value){LocalTime_set(this,3,5,value)}getSeconds(){return LocalTime_get(this,6,8)}setSeconds(value){LocalTime_set(this,6,8,value)}getMilliseconds(){return+this[LocalTime_value].slice(6,9).padEnd(3,'0')}setMilliseconds(value){this[LocalTime_value]=Value(this[LocalTime_ISOString]=this[LocalTime_ISOString].slice(0,8)+(value?('.'+(''+value).padStart(3,'0')).replace(DOT_ZERO,''):''))}});const parseInt$1=parseInt;const fromCodePoint=String.fromCodePoint;const ESCAPED_IN_SINGLE_LINE=/[^\\]+|\\(?:[\\"btnfr/]|u.{4}|U.{8})/gs;const ESCAPED_IN_MULTI_LINE=/[^\n\\]+|\n|\\(?:[\t ]*\n[\t\n ]*|[\\"btnfr/]|u.{4}|U.{8})/gs;const BasicString=literal=>{if(!literal){return''}const parts=literal.match(ESCAPED_IN_SINGLE_LINE);const{length}=parts;let index=0;do{const part=parts[index];if(part[0]==='\\'){switch(part[1]){case'\\':parts[index]='\\';break;case'"':parts[index]='"';break;case'b':parts[index]='\b';break;case't':parts[index]='\t';break;case'n':parts[index]='\n';break;case'f':parts[index]='\f';break;case'r':parts[index]='\r';break;case'u':const charCode=parseInt$1(part.slice(2),16);mustScalar&&0xD7FF<charCode&&charCode<0xE000&&throws(RangeError$1(`Invalid Unicode Scalar ${part}`+where(' at ')));parts[index]=fromCharCode(charCode);break;case'U':const codePoint=parseInt$1(part.slice(2),16);(mustScalar&&0xD7FF<codePoint&&codePoint<0xE000||0x10FFFF<codePoint)&&throws(RangeError$1(`Invalid Unicode Scalar ${part}`+where(' at ')));parts[index]=fromCodePoint(codePoint);break;case'/':parts[index]='/';break}}}while(++index!==length);return parts.join('')};const MultilineBasicString=(literal,useWhatToJoinMultilineString,n)=>{if(!literal){return''}const parts=literal.match(ESCAPED_IN_MULTI_LINE);const{length}=parts;let index=0;do{const part=parts[index];if(part==='\n'){++n;parts[index]=useWhatToJoinMultilineString}else if(part[0]==='\\'){switch(part[1]){case'\n':case' ':case'\t':for(let i=0;i=part.indexOf('\n',i)+1;){++n}parts[index]='';break;case'\\':parts[index]='\\';break;case'"':parts[index]='"';break;case'b':parts[index]='\b';break;case't':parts[index]='\t';break;case'n':parts[index]='\n';break;case'f':parts[index]='\f';break;case'r':parts[index]='\r';break;case'u':const charCode=parseInt$1(part.slice(2),16);mustScalar&&0xD7FF<charCode&&charCode<0xE000&&throws(RangeError$1(`Invalid Unicode Scalar ${part}`+where(' at ',lineIndex+n)));parts[index]=fromCharCode(charCode);break;case'U':const codePoint=parseInt$1(part.slice(2),16);(mustScalar&&0xD7FF<codePoint&&codePoint<0xE000||0x10FFFF<codePoint)&&throws(RangeError$1(`Invalid Unicode Scalar ${part}`+where(' at ',lineIndex+n)));parts[index]=fromCodePoint(codePoint);break;case'/':parts[index]='/';break}}}while(++index!==length);return parts.join('')};const INTEGER_D=/[-+]?(?:0|[1-9][_\d]*)/;const{test:BAD_D}=newRegExp`_(?!\d)`.valueOf();const{test:IS_D_INTEGER}=newRegExp`^${INTEGER_D}$`.valueOf();const{test:IS_XOB_INTEGER}=theRegExp(/^0(?:x[\dA-Fa-f][_\dA-Fa-f]*|o[0-7][_0-7]*|b[01][_01]*)$/);const{test:BAD_XOB}=newRegExp`_(?![\dA-Fa-f])`.valueOf();const UNDERSCORES$1=/_/g;const UNDERSCORES_SIGN=/_|^[-+]/g;const IS_INTEGER=literal=>(IS_D_INTEGER(literal)||IS_XOB_INTEGER(literal))&&!BAD_XOB(literal);const MIN=BigInt$1&&-BigInt$1('0x8000000000000000');const MAX=BigInt$1&&BigInt$1('0x7FFFFFFFFFFFFFFF');const BigIntInteger=literal=>{IS_INTEGER(literal)||throws(SyntaxError$1(`Invalid Integer ${literal}`+where(' at ')));const bigInt=literal[0]==='-'?-BigInt$1(literal.replace(UNDERSCORES_SIGN,'')):BigInt$1(literal.replace(UNDERSCORES_SIGN,''));allowLonger||MIN<=bigInt&&bigInt<=MAX||throws(RangeError$1(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${literal}`+where(' meet at ')));return bigInt};const NumberInteger=literal=>{IS_INTEGER(literal)||throws(SyntaxError$1(`Invalid Integer ${literal}`+where(' at ')));const number=parseInt$1(literal.replace(UNDERSCORES$1,''));isSafeInteger(number)||throws(RangeError$1(`Integer did not use BitInt must fit Number.isSafeInteger, not includes ${literal}`+where(' meet at ')));return number};const Integer=literal=>{if(usingBigInt===true){return BigIntInteger(literal)}if(usingBigInt===false){return NumberInteger(literal)}IS_INTEGER(literal)||throws(SyntaxError$1(`Invalid Integer ${literal}`+where(' at ')));const number=parseInt$1(literal.replace(UNDERSCORES$1,''));if(IntegerMinNumber<=number&&number<=IntegerMaxNumber){return number}const bigInt=literal[0]==='-'?-BigInt$1(literal.replace(UNDERSCORES_SIGN,'')):BigInt$1(literal.replace(UNDERSCORES_SIGN,''));allowLonger||MIN<=bigInt&&bigInt<=MAX||throws(RangeError$1(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${literal}`+where(' meet at ')));return bigInt};const isFinite$1=isFinite;const NaN$1=0/0;const _NaN=-NaN$1;const _Infinity$1=-Infinity$1;const{test:IS_FLOAT}=newRegExp`
	^
	${INTEGER_D}
	(?:
		\.\d[_\d]*
		(?:[eE][-+]?\d[_\d]*)?
	|
		[eE][-+]?\d[_\d]*
	)
	$`.valueOf();const UNDERSCORES=/_/g;const{test:IS_ZERO}=theRegExp(/^[-+]?0(?:\.0+)?(?:[eE][-+]?0+)?$/);const{exec:NORMALIZED}=theRegExp(/^[-0]?(\d*)(?:\.(\d+))?(?:e\+?(-?\d+))?$/);const{exec:ORIGINAL}=theRegExp(/^[-+]?0?(\d*)(?:\.(\d*?)0*)?(?:[eE]\+?(-?\d+))?$/);const Float=literal=>{if(!IS_FLOAT(literal)||BAD_D(literal)){if(sFloat){if(literal==='inf'||literal==='+inf'){return Infinity$1}if(literal==='-inf'){return _Infinity$1}if(literal==='nan'||literal==='+nan'){return NaN$1}if(literal==='-nan'){return _NaN}}else if(!sError){if(literal==='inf'||literal==='+inf'){return Infinity$1}if(literal==='-inf'){return _Infinity$1}}throw throws(SyntaxError$1(`Invalid Float ${literal}`+where(' at ')))}const withoutUnderscores=literal.replace(UNDERSCORES,'');const number=+withoutUnderscores;if(sError){isFinite$1(number)||throws(RangeError$1(`Float ${literal} has been as big as inf`+where(' at ')));number||IS_ZERO(withoutUnderscores)||throws(RangeError$1(`Float ${literal} has been as little as ${literal[0]==='-'?'-':''}0`+where(' at ')));const{1:normalized_integer,2:normalized_fractional='',3:normalized_exponent=''}=NORMALIZED(number);const{1:original_integer,2:original_fractional='',3:original_exponent=''}=ORIGINAL(withoutUnderscores);original_integer+original_fractional===normalized_integer+normalized_fractional&&original_exponent-original_fractional.length===normalized_exponent-normalized_fractional.length||throws(RangeError$1(`Float ${literal} has lost its exact and been ${number}`+where(' at ')))}return number};const prepareTable=(table,keys)=>{const{length}=keys;let index=0;while(index<length){const key=keys[index++];if(key in table){table=table[key];if(isTable(table)){isInline(table)&&throws(Error$1(`Trying to define Table under Inline Table`+where(' at ')))}else if(isArray(table)){isStatic(table)&&throws(Error$1(`Trying to append value to Static Array`+where(' at ')));table=table[table.length-1]}else{throw throws(Error$1(`Trying to define Table under non-Table value`+where(' at ')))}}else{table=table[key]=new Table(IMPLICITLY);while(index<length){table=table[keys[index++]]=new Table(IMPLICITLY)}return table}}return table};const appendTable=(table,finalKey,asArrayItem,tag)=>{let lastTable;if(asArrayItem){let arrayOfTables;if(finalKey in table){isArray(arrayOfTables=table[finalKey])&&!isStatic(arrayOfTables)||throws(Error$1(`Trying to push Table to non-ArrayOfTables value`+where(' at ')))}else{arrayOfTables=table[finalKey]=newArray(OF_TABLES)}tag&&collect(tag,arrayOfTables,table,finalKey);arrayOfTables[arrayOfTables.length]=lastTable=new Table(DIRECTLY)}else{if(finalKey in table){lastTable=table[finalKey];fromPair(lastTable)&&throws(Error$1(`A table defined implicitly via key/value pair can not be accessed to via []`+where(', which at ')));directlyIfNot(lastTable)||throws(Error$1(`Duplicate Table definition`+where(' at ')))}else{table[finalKey]=lastTable=new Table(DIRECTLY)}tag&&collect(tag,null,table,finalKey)}return lastTable};const prepareInlineTable=(table,keys)=>{const{length}=keys;let index=0;while(index<length){const key=keys[index++];if(key in table){table=table[key];isTable(table)||throws(Error$1(`Trying to assign property through non-Table value`+where(' at ')));isInline(table)&&throws(Error$1(`Trying to assign property through static Inline Table`+where(' at ')));fromPair(table)||throws(Error$1(`A table defined implicitly via [] can not be accessed to via key/value pair`+where(', which at ')))}else{table=table[key]=new Table(IMPLICITLY,PAIR);while(index<length){table=table[keys[index++]]=new Table(IMPLICITLY,PAIR)}return table}}return table};const checkLiteralString=literal=>{__CONTROL_CHARACTER_EXCLUDE_test(literal)&&throws(SyntaxError$1(`Control characters other than Tab are not permitted in a Literal String`+where(', which was found at ')));return literal};const assignLiteralString=(table,finalKey,literal)=>{if(!literal.startsWith(`'''`)){const $=LITERAL_STRING_exec(literal)||throws(SyntaxError$1(`Bad literal string`+where(' at ')));const value=checkLiteralString($[1]);table[finalKey]=preserveLiteral?LiteralObject(literal.slice(0,value.length+2),value):value;return $[2]}const $=__MULTI_LINE_LITERAL_STRING_exec(literal.slice(3));if($){const value=checkLiteralString($[1])+$[2];table[finalKey]=preserveLiteral?LiteralObject(literal.slice(0,value.length+6),value):value;return $[3]}const start=new mark('Multi-line Literal String',literal.length);const leadingNewline=!(literal=literal.slice(3));if(leadingNewline){literal=start.must();const $=__MULTI_LINE_LITERAL_STRING_exec(literal);if($){const value=checkLiteralString($[1])+$[2];table[finalKey]=preserveLiteral?LiteralObject([`'''`,literal.slice(0,value.length+3)],value):value;return $[3]}}useWhatToJoinMultilineString===null&&start.nowrap(ARGS_MODE);for(const lines=[checkLiteralString(literal)];;){const line=start.must();const $=__MULTI_LINE_LITERAL_STRING_exec(line);if($){lines[lines.length]=checkLiteralString($[1])+$[2];const value=lines.join(useWhatToJoinMultilineString);if(preserveLiteral){lines[lines.length-1]+=`'''`;leadingNewline?lines.unshift(`'''`):lines[0]=`'''${literal}`;table[finalKey]=LiteralObject(lines,value)}else{table[finalKey]=value}return $[3]}lines[lines.length]=checkLiteralString(line)}};const assignBasicString=(table,finalKey,literal)=>{if(!literal.startsWith('"""')){const index=BASIC_STRING_exec_1_endIndex(literal);const value=BasicString(literal.slice(1,index));table[finalKey]=preserveLiteral?LiteralObject(literal.slice(0,index+1),value):value;return literal.slice(index+1).replace(PRE_WHITESPACE,'')}let length=3+MULTI_LINE_BASIC_STRING_exec_0_length(literal.slice(3));if(literal.length!==length){const $=literal.slice(3,length);ESCAPED_EXCLUDE_CONTROL_CHARACTER_test($)||throws(SyntaxError$1(`Bad multi-line basic string`+where(' at ')));const value=BasicString($)+(literal.startsWith('"',length+=3)?literal.startsWith('"',++length)?(++length,'""'):'"':'');table[finalKey]=preserveLiteral?LiteralObject(literal.slice(0,length),value):value;return literal.slice(length).replace(PRE_WHITESPACE,'')}const start=new mark('Multi-line Basic String',length);const skipped=(literal=literal.slice(3))?0:1;if(skipped){literal=start.must();let length=MULTI_LINE_BASIC_STRING_exec_0_length(literal);if(literal.length!==length){const $=literal.slice(0,length);ESCAPED_EXCLUDE_CONTROL_CHARACTER_test($)||throws(SyntaxError$1(`Bad multi-line basic string`+where(' at ')));const value=MultilineBasicString($,useWhatToJoinMultilineString,skipped)+(literal.startsWith('"',length+=3)?literal.startsWith('"',++length)?(++length,'""'):'"':'');table[finalKey]=preserveLiteral?LiteralObject(['"""',literal.slice(0,length)],value):value;return literal.slice(length).replace(PRE_WHITESPACE,'')}}useWhatToJoinMultilineString===null&&start.nowrap(ARGS_MODE);ESCAPED_EXCLUDE_CONTROL_CHARACTER_test(literal+'\n')||throws(SyntaxError$1(`Bad multi-line basic string`+where(' at ')));for(const lines=[literal];;){const line=start.must();let length=MULTI_LINE_BASIC_STRING_exec_0_length(line);if(line.length!==length){const $=line.slice(0,length);ESCAPED_EXCLUDE_CONTROL_CHARACTER_test($)||throws(SyntaxError$1(`Bad multi-line basic string`+where(' at ')));const value=MultilineBasicString(lines.join('\n')+'\n'+$,useWhatToJoinMultilineString,skipped)+(line.startsWith('"',length+=3)?line.startsWith('"',++length)?(++length,'""'):'"':'');if(preserveLiteral){skipped?lines.unshift('"""'):lines[0]=`"""${literal}`;lines[lines.length]=`${$}"""`;table[finalKey]=LiteralObject(lines,value)}else{table[finalKey]=value}return line.slice(length).replace(PRE_WHITESPACE,'')}ESCAPED_EXCLUDE_CONTROL_CHARACTER_test(line+'\n')||throws(SyntaxError$1(`Bad multi-line basic string`+where(' at ')));lines[lines.length]=line}};const KEYS=Null$1(null);const commentFor=key=>KEYS[key]||(KEYS[key]=Symbol$1(key));const commentForThis=Symbol$1('this');const{test:IS_OFFSET$}=theRegExp(OFFSET$);const{test:IS_EMPTY}=theRegExp(/^\[[\t ]*]/);const parseKeys=rest=>{let lineRest=rest;const leadingKeys=[];let lastIndex=-1;for(;;){lineRest||throws(SyntaxError$1(`Empty bare key`+where(' at ')));if(lineRest[0]==='"'){const index=BASIC_STRING_exec_1_endIndex(lineRest);KEYS$1.test(leadingKeys[++lastIndex]=BasicString(lineRest.slice(1,index)))||throws(Error$1(`Key not allowed`+where(' at ')));lineRest=lineRest.slice(index+1)}else{const isQuoted=lineRest[0]==='\'';const key=((isQuoted?__LITERAL_KEY_exec:__BARE_KEY_exec)(lineRest)||throws(SyntaxError$1(`Bad ${isQuoted?'literal string':'bare'} key`+where(' at '))))[0];lineRest=lineRest.slice(key.length);KEYS$1.test(leadingKeys[++lastIndex]=isQuoted?key.slice(1,-1):key)||throws(Error$1(`Key not allowed`+where(' at ')))}if(IS_DOT_KEY(lineRest)){lineRest=lineRest.replace(DOT_KEY,'')}else{break}}if(disableDigit){const keys=rest.slice(0,-lineRest.length);(isAmazing(keys)||enableNull&&keys==='null')&&throws(SyntaxError$1(`Bad bare key disabled by xOptions.string`+where(' at ')))}if(disallowEmptyKey){let index=lastIndex;do{leadingKeys[index]||throws(SyntaxError$1(`Empty key is not allowed before TOML v0.5`+where(', which at ')))}while(index--)}const finalKey=leadingKeys[lastIndex];leadingKeys.length=lastIndex;return{leadingKeys,finalKey,lineRest}};const push=(lastArray,lineRest)=>{if(lineRest[0]==='<'){const{1:tag}=({2:lineRest}=_VALUE_PAIR_exec(lineRest)||throws(SyntaxError$1(`Bad tag `+where(' at '))));collect(tag,lastArray,null);switch(lineRest&&lineRest[0]){case',':case']':case'':case'#':lastArray[lastArray.length]=undefined$1;return lineRest}}switch(lineRest[0]){case'\'':return assignLiteralString(asStrings(lastArray),lastArray.length,lineRest);case'"':return assignBasicString(asStrings(lastArray),lastArray.length,lineRest);case'{':inlineTable||throws(SyntaxError$1(`Inline Table is not allowed before TOML v0.4`+where(', which at ')));return equalInlineTable(asTables(lastArray),lastArray.length,lineRest);case'[':return equalStaticArray(asArrays(lastArray),lastArray.length,lineRest)}const{1:literal}=({2:lineRest}=VALUE_REST_exec(lineRest)||throws(SyntaxError$1(`Bad atom value`+where(' at '))));if(literal==='true'){asBooleans(lastArray)[lastArray.length]=true}else if(literal==='false'){asBooleans(lastArray)[lastArray.length]=false}else if(enableNull&&literal==='null'){asNulls(lastArray)[lastArray.length]=null}else if(literal.includes(':')){if(literal.includes('-')){if(IS_OFFSET$(literal)){asOffsetDateTimes(lastArray)[lastArray.length]=new OffsetDateTime(literal)}else{moreDatetime||throws(SyntaxError$1(`Local Date-Time is not allowed before TOML v0.5`+where(', which at ')));asLocalDateTimes(lastArray)[lastArray.length]=new LocalDateTime(literal)}}else{moreDatetime||throws(SyntaxError$1(`Local Time is not allowed before TOML v0.5`+where(', which at ')));asLocalTimes(lastArray)[lastArray.length]=new LocalTime(literal)}}else if(literal.indexOf('-')!==literal.lastIndexOf('-')&&literal[0]!=='-'){moreDatetime||throws(SyntaxError$1(`Local Date is not allowed before TOML v0.5`+where(', which at ')));asLocalDates(lastArray)[lastArray.length]=new LocalDate(literal)}else{literal.includes('.')||literal.includes('n')||(literal.includes('e')||literal.includes('E'))&&!literal.startsWith('0x')?asFloats(lastArray)[lastArray.length]=preserveLiteral?LiteralObject(literal,Float(literal)):Float(literal):asIntegers(lastArray)[lastArray.length]=preserveLiteral?LiteralObject(literal,Integer(literal)):Integer(literal)}return lineRest};const equalStaticArray=function*(table,finalKey,lineRest){const staticArray=table[finalKey]=newArray(STATICALLY);if(IS_EMPTY(lineRest)){beInline(staticArray,lineRest[1]===']'?0:3);return lineRest.slice(lineRest.indexOf(']')).replace(SYM_WHITESPACE,'')}const start=new mark('Static Array',lineRest.length);let inline=lineRest.startsWith('[ ')||lineRest.startsWith('[\t')?3:0;lineRest=lineRest.replace(SYM_WHITESPACE,'');while(!lineRest||lineRest[0]==='#'){inline=null;lineRest=start.must().replace(PRE_WHITESPACE,'')}if(lineRest[0]===']'){inline===null||beInline(staticArray,inline);return lineRest.replace(SYM_WHITESPACE,'')}for(;;){const rest=push(staticArray,lineRest);lineRest=typeof rest==='string'?rest:yield rest;while(!lineRest||lineRest[0]==='#'){inline=null;lineRest=start.must().replace(PRE_WHITESPACE,'')}if(lineRest[0]===','){lineRest=lineRest.replace(SYM_WHITESPACE,'');while(!lineRest||lineRest[0]==='#'){inline=null;lineRest=start.must().replace(PRE_WHITESPACE,'')}if(lineRest[0]===']'){break}}else{if(lineRest[0]===']'){break}throw throws(SyntaxError$1(`Unexpect character in static array item value`+where(', which is found at ')))}}inline===null||beInline(staticArray,inline);return lineRest.replace(SYM_WHITESPACE,'')};const equalInlineTable=function*(table,finalKey,lineRest){const inlineTable=table[finalKey]=new Table(DIRECTLY,INLINE);if(allowInlineTableMultilineAndTrailingCommaEvenNoComma){const start=new mark('Inline Table',lineRest.length);lineRest=lineRest.replace(SYM_WHITESPACE,'');let inline=true;for(;;){while(!lineRest||lineRest[0]==='#'){inline=false;lineRest=start.must().replace(PRE_WHITESPACE,'')}if(lineRest[0]==='}'){break}const forComment=ForComment(inlineTable,lineRest);const rest=assign(forComment);lineRest=typeof rest==='string'?rest:yield rest;if(lineRest){if(lineRest[0]==='#'){if(preserveComment){forComment.table[commentFor(forComment.finalKey)]=lineRest.slice(1)}inline=false;do{lineRest=start.must().replace(PRE_WHITESPACE,'')}while(!lineRest||lineRest[0]==='#')}}else{inline=false;do{lineRest=start.must().replace(PRE_WHITESPACE,'')}while(!lineRest||lineRest[0]==='#')}if(lineRest[0]===','){lineRest=lineRest.replace(SYM_WHITESPACE,'')}}inline||beInline(inlineTable,false)}else{lineRest=lineRest.replace(SYM_WHITESPACE,'')||throws(SyntaxError$1(`Inline Table is intended to appear on a single line`+where(', which broken at ')));if(lineRest[0]!=='}'){for(;;){lineRest[0]==='#'&&throws(SyntaxError$1(`Inline Table is intended to appear on a single line`+where(', which broken at ')));const rest=assign(ForComment(inlineTable,lineRest));lineRest=(typeof rest==='string'?rest:yield rest)||throws(SyntaxError$1(`Inline Table is intended to appear on a single line`+where(', which broken at ')));if(lineRest[0]==='}'){break}if(lineRest[0]===','){lineRest=lineRest.replace(SYM_WHITESPACE,'')||throws(SyntaxError$1(`Inline Table is intended to appear on a single line`+where(', which broken at ')));lineRest[0]==='}'&&throws(SyntaxError$1(`The last property of an Inline Table can not have a trailing comma`+where(', which was found at ')))}}}}return lineRest.replace(SYM_WHITESPACE,'')};const ForComment=(lastInlineTable,lineRest)=>{const{leadingKeys,finalKey,tag}=({lineRest}=KEY_VALUE_PAIR_exec_groups(parseKeys(lineRest)));return{table:prepareInlineTable(lastInlineTable,leadingKeys),finalKey,tag,lineRest}};const assign=({finalKey,tag,lineRest,table})=>{finalKey in table&&throws(Error$1(`Duplicate property definition`+where(' at ')));if(tag){collect(tag,null,table,finalKey);switch(lineRest&&lineRest[0]){case',':case'}':case'':case'#':table[finalKey]=undefined$1;return lineRest}}switch(lineRest&&lineRest[0]){case'\'':return assignLiteralString(table,finalKey,lineRest);case'"':return assignBasicString(table,finalKey,lineRest);case'{':inlineTable||throws(SyntaxError$1(`Inline Table is not allowed before TOML v0.4`+where(', which at ')));return equalInlineTable(table,finalKey,lineRest);case'[':return equalStaticArray(table,finalKey,lineRest)}const{1:literal}=({2:lineRest}=VALUE_REST_exec(lineRest)||throws(SyntaxError$1(`Bad atom value`+where(' at '))));if(literal==='true'){table[finalKey]=true}else if(literal==='false'){table[finalKey]=false}else if(enableNull&&literal==='null'){table[finalKey]=null}else if(literal.includes(':')){if(literal.includes('-')){if(IS_OFFSET$(literal)){table[finalKey]=new OffsetDateTime(literal)}else{moreDatetime||throws(SyntaxError$1(`Local Date-Time is not allowed before TOML v0.5`+where(', which at ')));table[finalKey]=new LocalDateTime(literal)}}else{moreDatetime||throws(SyntaxError$1(`Local Time is not allowed before TOML v0.5`+where(', which at ')));table[finalKey]=new LocalTime(literal)}}else if(literal.indexOf('-')!==literal.lastIndexOf('-')&&literal[0]!=='-'){moreDatetime||throws(SyntaxError$1(`Local Date is not allowed before TOML v0.5`+where(', which at ')));table[finalKey]=new LocalDate(literal)}else{table[finalKey]=literal.includes('.')||literal.includes('n')||(literal.includes('e')||literal.includes('E'))&&!literal.startsWith('0x')?preserveLiteral?LiteralObject(literal,Float(literal)):Float(literal):preserveLiteral?LiteralObject(literal,Integer(literal)):Integer(literal)}return lineRest};const Root=()=>{const rootTable=new Table;let lastSectionTable=rootTable;while(rest()){const line=next().replace(PRE_WHITESPACE,'');if(line){if(line[0]==='['){const{leadingKeys,finalKey,asArrayItem,tag,lineRest}=TABLE_DEFINITION_exec_groups(line,parseKeys);const table=prepareTable(rootTable,leadingKeys);if(lineRest){lineRest[0]==='#'||throws(SyntaxError$1(`Unexpect charachtor after table header`+where(' at ')))}lastSectionTable=appendTable(table,finalKey,asArrayItem,tag);preserveComment&&lineRest&&(lastSectionTable[commentForThis]=asArrayItem?lineRest.slice(1):table[commentFor(finalKey)]=lineRest.slice(1))}else if(line[0]==='#'){__CONTROL_CHARACTER_EXCLUDE_test(line)&&throws(SyntaxError$1(`Control characters other than Tab are not permitted in comments`+where(', which was found at ')))}else{const forComment=ForComment(lastSectionTable,line);let rest=assign(forComment);typeof rest==='string'||(rest=x(rest));if(rest){rest[0]==='#'||throws(SyntaxError$1(`Unexpect charachtor after key/value pair`+where(' at ')));if(preserveComment){forComment.table[commentFor(forComment.finalKey)]=rest.slice(1)}}}}}return rootTable};Null$1({...fromEntries([...Array$1(0x20)].map(((_,charCode)=>[fromCharCode(charCode),'\\u'+charCode.toString(16).toUpperCase().padStart(4,'0')]))),'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','"""':'""\\"','\\':'\\\\','':'\\u007F'});const Float64Array$1=Float64Array;const Uint8Array$1=Uint8Array;const _Infinity=-Infinity$1;const{test:INTEGER_LIKE}=theRegExp(/^-?\d+$/);const ensureFloat=literal=>INTEGER_LIKE(literal)?literal+'.0':literal;const float64Array=new Float64Array$1([NaN$1]);const uint8Array=new Uint8Array$1(float64Array.buffer);const NaN_7=uint8Array[7];NaN_7===new Uint8Array$1(new Float64Array$1([-NaN$1]).buffer)[7]?value=>value?value===Infinity$1?'inf':value===_Infinity?'-inf':ensureFloat(''+value):value===value?is(value,0)?'0.0':'-0.0':'nan':value=>value?value===Infinity$1?'inf':value===_Infinity?'-inf':ensureFloat(''+value):value===value?is(value,0)?'0.0':'-0.0':(float64Array[0]=value,uint8Array[7])===NaN_7?'nan':'-nan';const linesFromStringify=new WeakSet$1;const isLinesFromStringify=has.bind(linesFromStringify);const textDecoder=new TextDecoder$1('utf-8',Null$1({fatal:true,ignoreBOM:false}));const binary2string=arrayBufferLike=>{if(isView(arrayBufferLike)?arrayBufferLike.length!==arrayBufferLike.byteLength:!isArrayBuffer(arrayBufferLike)){throw TypeError$1(`only Uint8Array or ArrayBuffer is acceptable`)}try{return textDecoder.decode(arrayBufferLike)}catch{throw Error$1(`A TOML doc must be a (ful-scalar) valid UTF-8 file, without any unknown code point.`)}};const isBinaryLike=value=>'byteLength'in value;const{test:includesNonScalar}=theRegExp(/[\uD800-\uDFFF]/u);const assertFulScalar=string=>{if(clearRegExp$1(includesNonScalar(string))){throw Error$1(`A TOML doc must be a (ful-scalar) valid UTF-8 file, without any uncoupled UCS-4 character code.`)}};let holding=false;const parse=(source,specificationVersion,multilineStringJoiner,bigint,x,argsMode)=>{let sourcePath='';if(typeof source==='object'&&source){if(isArray$1(source)){throw TypeError$1(isLinesFromStringify(source)?`TOML.parse(array from TOML.stringify(,{newline?}))`:`TOML.parse(array)`)}else if(isBinaryLike(source)){source=binary2string(source)}else{sourcePath=source.path;if(typeof sourcePath!=='string'){throw TypeError$1(`TOML.parse(source.path)`)}const{data,require:req=(typeof require==='function'?require:undefined$1)}=source;if(req){const{resolve}=req;if(resolve!=null){const{paths}=resolve;if(paths!=null){const ret=apply$1(paths,resolve,['']);if(ret!=null){const val=ret[0];if(val!=null){const dirname_=val.replace(/node_modules$/,'');if(dirname_){sourcePath=req('path').resolve(dirname_,sourcePath);if(typeof sourcePath!=='string'){throw TypeError$1(`TOML.parse(source.require('path').resolve)`)}}}}}}if(data===undefined$1){const data=req('fs').readFileSync(sourcePath);if(typeof data==='object'&&data&&isBinaryLike(data)){source=binary2string(data)}else{throw TypeError$1(`TOML.parse(source.require('fs').readFileSync)`)}}else if(typeof data==='string'){assertFulScalar(source=data)}else if(typeof data==='object'&&data&&isBinaryLike(data)){source=binary2string(data)}else{throw TypeError$1(`TOML.parse(source.data)`)}}else{if(data===undefined$1){throw TypeError$1(`TOML.parse(source.data|source.require)`)}else if(typeof data==='string'){assertFulScalar(source=data)}else if(typeof data==='object'&&data&&isBinaryLike(data)){source=binary2string(data)}else{throw TypeError$1(`TOML.parse(source.data)`)}}}}else if(typeof source==='string'){assertFulScalar(source)}else{throw TypeError$1(`TOML.parse(source)`)}let joiner;let keys;if(typeof multilineStringJoiner==='object'&&multilineStringJoiner){if(bigint!==undefined$1||x!==undefined$1){throw TypeError$1(`options mode ? args mode`)}joiner=multilineStringJoiner.joiner;bigint=multilineStringJoiner.bigint;keys=multilineStringJoiner.keys;x=multilineStringJoiner.x;argsMode=''}else{joiner=multilineStringJoiner}let rootTable;let process;if(holding){throw Error$1(`parsing during parsing.`)}holding=true;try{use(specificationVersion,joiner,bigint,keys,x,argsMode);todo(source,sourcePath);source&&source[0]==='\ufeff'&&throws(TypeError$1(`TOML content (string) should not start with BOM (U+FEFF)`+where(' at ')));rootTable=Root();process=Process()}finally{done();clear();holding=false;clearRegExp$1()}process&&process();return rootTable};const parse$1=assign$1(((source,specificationVersion,multilineStringJoiner,useBigInt,xOptions)=>typeof specificationVersion==='number'?parse(source,specificationVersion,multilineStringJoiner,useBigInt,xOptions,',,'):parse(source,1.0,specificationVersion,multilineStringJoiner,useBigInt,',')),{'1.0':(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.1,multilineStringJoiner,useBigInt,xOptions,','),1:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,1.0,multilineStringJoiner,useBigInt,xOptions,','),0.5:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.5,multilineStringJoiner,useBigInt,xOptions,','),0.4:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.4,multilineStringJoiner,useBigInt,xOptions,','),0.3:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.3,multilineStringJoiner,useBigInt,xOptions,','),0.2:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.2,multilineStringJoiner,useBigInt,xOptions,','),0.1:(source,multilineStringJoiner,useBigInt,xOptions)=>parse(source,0.1,multilineStringJoiner,useBigInt,xOptions,',')});const ROOT_DIR$3=closestPath(path$2.resolve(),"content");const PACKAGE_ROOT_DIR=closestPath();const getVariables=contentFileName=>{const{document}=parseHTML(path$2.readFileSync(path$2.join(ROOT_DIR$3,"dist","intermediate","render",`${contentFileName}.html`),{encoding:"utf8"}));return{...parse$1(path$2.readFileSync(path$2.join(PACKAGE_ROOT_DIR,"variables.toml"),{encoding:"utf8"})),...path$2.existsSync(path$2.join(ROOT_DIR$3,"content",".toml"))?parse$1(path$2.readFileSync(path$2.join(ROOT_DIR$3,"content",".toml"),{encoding:"utf8"})):{},...[...document.body.querySelectorAll(":scope h1")].length===1?{title:document.body.querySelector(":scope h1").textContent}:{},...path$2.existsSync(path$2.join(ROOT_DIR$3,"content",`${contentFileName}.toml`))?parse$1(path$2.readFileSync(path$2.join(ROOT_DIR$3,"content",`${contentFileName}.toml`))):{},...parseHTML(path$2.readFileSync(path$2.join(ROOT_DIR$3,"dist","intermediate","render",`${contentFileName}.html`),{encoding:"utf8"})).document.body.querySelector(":scope x-variables")?parse$1(parseHTML(path$2.readFileSync(path$2.join(ROOT_DIR$3,"dist","intermediate","render",`${contentFileName}.html`),{encoding:"utf8"})).document.body.querySelector(":scope x-variables").innerHTML):{}}};const setVariables=(variables,document)=>{{const{colors}=variables;colors.light&&document.documentElement.style.setProperty("--light",colors.light);colors.dark&&document.documentElement.style.setProperty("--dark",colors.dark)}const{title}=variables;document.title=title;document.body.querySelector(":scope header > hgroup > h1").textContent=title};const wrapWith=(document,wrapperTagName,separatorTagName="",parentSelectors="")=>{(parentSelectors?[...document.body.querySelectorAll(`:scope ${parentSelectors}`)]:[document.body]).forEach((parentElement=>{parentElement.innerHTML=separatorTagName?[...parentElement.querySelectorAll(":scope > *")].reduce(((html,htmlElement)=>{const trimmedHtml=html.trim();if(trimmedHtml){if(htmlElement.localName===separatorTagName){return`\n${trimmedHtml}\n</${wrapperTagName}>\n\n<${wrapperTagName}>\n${htmlElement.outerHTML}\n`}return`\n${trimmedHtml}\n${htmlElement.outerHTML}\n`}if(htmlElement.localName===separatorTagName){return`\n<${wrapperTagName}>\n${htmlElement.outerHTML}\n`}return htmlElement.outerHTML}),""):`\n<${wrapperTagName}>\n${parentElement.innerHTML}\n</${wrapperTagName}>\n`}))};const insertHeaderStructureOnly=document=>{document.body.innerHTML=`\n<header>\n<hgroup>\n<h1>\n</h1>\n</hgroup>\n</header>\n\n${document.body.innerHTML}\n    `};const insertFooter=document=>{document.body.innerHTML=`\n${document.body.innerHTML}\n\n<footer id="footer">\n<section id="#Powered_By">\n<h1>\n  Powered By:\n</h1>\n\n<ul>\n  <li>\n    <a href="https://monochromatic.dev/">Monochromatic</a> @ <a href="https://aquati.cat/">Aquaticat</a>\n  </li>\n</ul>\n</section>\n\n<section id="#Copyright">\n<h1>\n  Copyright:\n</h1>\n\n<ul>\n  <li>\n    <a href="https://anonymous.invalid">d</a> \n    <address>\n      <a href="https://anonymous.invalid/">e</a>\n      <a href="mailto:anonymous@anonymous.invalid"></a>\n    </address>\n  </li>\n</ul>\n</section>\n</footer>\n`};const insertNavArticlesOrH2s=document=>{const navDetailsWrapperBlock=document.body.querySelector(":scope > nav > details > wrapper-block");if(document.body.querySelectorAll(":scope > wrapper-block > main > article").length>=2){navDetailsWrapperBlock.innerHTML=`\n${navDetailsWrapperBlock.innerHTML}\n\n<section>\n<h2>\nOn this page:\n</h2>\n\n<ol>\n${[...document.body.querySelectorAll(":scope > wrapper-block > main > article")].map((article=>`\n<li>\n<a href="#${article.id||"1"}">${article.querySelector(":scope > wrapper-block > h1").textContent}</a>\n</li>\n`)).join("")}\n</ol>\n</section>\n    `}else if(document.body.querySelectorAll(":scope > wrapper-block > main > article > wrapper-block > section > h2").length>=2){navDetailsWrapperBlock.innerHTML=`\n${navDetailsWrapperBlock.innerHTML}\n\n<section>\n<h2>\nOn this page:\n</h2>\n\n<ol>\n${[...document.body.querySelectorAll(":scope > wrapper-block > main > article > wrapper-block > section:has(> h2)")].map((h2Section=>`\n<li>\n<a href="#${h2Section.id||"1"}">${h2Section.querySelector(":scope > h2").textContent}</a>\n</li>\n`)).join("")}\n</ol>\n</section>\n      `}};const insertNavFooter=document=>{const navDetailsWrapperBlock=document.body.querySelector(":scope > nav > details > wrapper-block");navDetailsWrapperBlock.innerHTML=`\n${navDetailsWrapperBlock.innerHTML}\n\n<section id="Jump_to_footer">\n  <a href="#footer">Jump to bottom</a>\n</section>\n  `};const ROOT_DIR$2=closestPath(path$2.resolve(),"content");const insertNavPages=document=>{const navDetailsWrapperBlock=document.body.querySelector(":scope > nav > details > wrapper-block");navDetailsWrapperBlock.innerHTML=`\n${navDetailsWrapperBlock.innerHTML}\n\n<section id="nav__pages">\n  <ul>\n    ${path$2.readdirSync(path$2.join(ROOT_DIR$2,"dist","intermediate","render")).filter((renderedFileNameWithExtension=>renderedFileNameWithExtension.split(".").at(-1)==="html")).map((renderedFileNameWithExtension=>renderedFileNameWithExtension.slice(0,-".html".length))).map((renderedFileName=>`\n  <li>\n  <a href="/${renderedFileName}">${parseHTML(path$2.readFileSync(path$2.join(ROOT_DIR$2,"dist","intermediate","render",`${renderedFileName}.html`),{encoding:"utf8"})).document.body.querySelector(":scope h1")?.textContent??renderedFileName.replaceAll("_"," ")}</a>\n  </li>\n`)).join("")}\n  </ul>\n  </section>\n  `};const insertNavStructureOnly=document=>{document.body.innerHTML=`\n<nav id="nav">\n  \x3c!-- Set it to open in JavaScript,\n  because we don't want the navbar to be expanded on mobile devices without JavaScript. --\x3e\n  <details>\n  <summary>\n    <h1>\n      <a href="/index.html/#title">Home</a>\n    </h1>\n  </summary>\n\n  <wrapper-block>\n  <a href="#title" id="Skip_to_content">Skip to content</a>\n\n  </wrapper-block>\n  </details>\n</nav>\n\n${document.body.innerHTML}\n`};const ROOT_DIR$1=closestPath(path$2.resolve(),"content");const PATH_PREFIX=path$2.join(ROOT_DIR$1,"dist","intermediate","layout");const MAX_PATH=250;let i=1;const wDF=(f,c,d)=>{if(!path$2.existsSync(path$2.join(PATH_PREFIX,`${i}.  ${sanitize(f,MAX_PATH)}`))){path$2.mkdirSync(path$2.join(PATH_PREFIX,`${i}.  ${sanitize(f,MAX_PATH)}`));path$2.writeFileSync(path$2.join(PATH_PREFIX,`${i}.  ${sanitize(f,MAX_PATH)}`,".gitkeep"),"")}path$2.writeFileSync(path$2.join(PATH_PREFIX,`${i}.  ${sanitize(f,MAX_PATH)}`,`${c}.html`),documentString(d));i++};const layout=(file,contentFileName)=>{i=1;const c=contentFileName;const{document}=parseHTML(file);const d=document;wrapWith(d,"wrapper-block","h1");wDF("wrapWith(d, 'wrapper-block', 'h1');",c,d);wrapWith(d,"section","h2","> wrapper-block:has(> h2)");wDF("wrapWith(d, 'section', 'h2', '> wrapper-block:has(> h2)');",c,d);[...d.body.querySelectorAll(":scope > wrapper-block > section:has(> h2)")].forEach((h2Section=>{const h2SectionH2=h2Section.querySelector(":scope > h2");h2Section.id=uniqueId(d,potentialId(h2SectionH2))}));wDF("[...d.body.querySelectorAll(':scope > wrapper-block > section:has(> h2)')].forEach((h2Section) => {\n    const h2SectionH2 = h2Section.querySelector(':scope > h2')! as HTMLHeadingElement;\n\n    h2Section.id = uniqueId(d, potentialId(h2SectionH2));\n  });",c,d);wrapWith(d,"section","h3","> wrapper-block > section:has(> h2):has(> h3)");wDF("wrapWith(d, 'section', 'h3', '> wrapper-block > section:has(> h2):has(> h3)')",c,d);[...d.body.querySelectorAll(":scope > wrapper-block > section:has(> h2) > section:has(h3)")].forEach((h3Section=>{const h3SectionH3=h3Section.querySelector(":scope > h3");h3Section.id=uniqueId(d,potentialId(h3SectionH3))}));wDF("[...d.body.querySelectorAll(':scope > wrapper-block > section:has(> h2) > section:has(h3)')].forEach(\n    (h3Section) => {\n      const h3SectionH3 = h3Section.querySelector(':scope > h3')! as HTMLHeadingElement;\n\n      h3Section.id = uniqueId(d, potentialId(h3SectionH3));\n    },\n  );",c,d);wrapWith(d,"section","h4","> wrapper-block > section:has(>h2) > section:has(> h3):has(> h4)");wDF("wrapWith(d, 'section', 'h4', '> wrapper-block > section:has(>h2) > section:has(> h3):has(> h4)')",c,d);[...d.body.querySelectorAll(":scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4)")].forEach((h4Section=>{const h4SectionH4=h4Section.querySelector(":scope > h4");h4Section.id=uniqueId(d,potentialId(h4SectionH4))}));wDF("[\n    ...d.body.querySelectorAll(\n      ':scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4)',\n    ),\n  ].forEach((h4Section) => {\n    const h4SectionH4 = h4Section.querySelector(':scope > h4')! as HTMLHeadingElement;\n\n    h4Section.id = uniqueId(d, potentialId(h4SectionH4));\n  });",c,d);wrapWith(d,"section","h4","> wrapper-block > section:has(>h2) > section:has(> h3):has(> h4)");wDF("wrapWith(d, 'section', 'h4', '> wrapper-block > section:has(>h2) > section:has(> h3):has(> h4)');",c,d);wrapWith(d,"section","h5","> wrapper-block > section:has(>h2) > section:has(> h3) > section:has(> h4):has(> h5)");wDF("wrapWith(\n    d,\n    'section',\n    'h5',\n    '> wrapper-block > section:has(>h2) > section:has(> h3) > section:has(> h4):has(> h5)',\n  );",c,d);[...d.body.querySelectorAll(":scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4) > section:has(> h5)")].forEach((h5Section=>{const h5SectionH5=h5Section.querySelector(":scope > h5");h5Section.id=uniqueId(d,potentialId(h5SectionH5))}));wDF("[\n    ...d.body.querySelectorAll(\n      ':scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4) > section:has(> h5)',\n    ),\n  ].forEach((h5Section) => {\n    const h5SectionH5 = h5Section.querySelector(':scope > h5')! as HTMLHeadingElement;\n\n    h5Section.id = uniqueId(d, potentialId(h5SectionH5));\n  });",c,d);wrapWith(d,"section","h6","> wrapper-block > section:has(>h2) > section:has(> h3) > section:has(> h4) > section:has(> h5):has(> h6)");wDF("wrapWith(\n    d,\n    'section',\n    'h6',\n    '> wrapper-block > section:has(>h2) > section:has(> h3) > section:has(> h4) > section:has(> h5):has(> h6)',\n  );",c,d);[...d.body.querySelectorAll(":scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4) > section:has(> h5) > section:has(> h6)")].forEach((h6Section=>{const h6SectionH6=h6Section.querySelector(":scope > h6");h6Section.id=uniqueId(d,potentialId(h6SectionH6))}));wDF("[\n    ...d.body.querySelectorAll(\n      ':scope > wrapper-block > section:has(> h2) > section:has(h3) > section:has(> h4) > section:has(> h5) > section:has(> h6)',\n    ),\n  ].forEach((h6Section) => {\n    const h6SectionH6 = h6Section.querySelector(':scope > h6')! as HTMLHeadingElement;\n\n    h6Section.id = uniqueId(d, potentialId(h6SectionH6));\n  });",c,d);wrapWith(d,"article","wrapper-block");wDF("wrapWith(d, 'article', 'wrapper-block')",c,d);d.body.querySelectorAll(":scope > article").forEach((article=>{article.id=uniqueId(d,potentialId(article.querySelector(":scope > wrapper-block > h1")))}));wDF("d.body.querySelectorAll(':scope > article').forEach((article) => {\n    article.id = uniqueId(d, potentialId(article.querySelector(':scope > wrapper-block > h1')!));\n  })",c,d);d.body.querySelectorAll(":scope > article:has(> wrapper-block > section > h2)").forEach((article=>{article.innerHTML=`\n${article.innerHTML}\n\n<aside>\n<h1>\nIn this article:\n</h1>\n\n<ol>\n\x3c!-- TODO: Add section wrappers first! Because we are only selecting child elements in queryselector.\n           Done adding section wrapper. Now working on this. --\x3e\n${[...article.querySelectorAll(":scope > wrapper-block > section:has(h2)")].reduce(((html2,h2Section)=>`\n${html2}\n<li>\n<a href="#${h2Section.id}">${h2Section.querySelector(":scope > h2").textContent}</a>\n\n${h2Section.querySelector(":scope > section:has(h3)")?`\n<ol>\n${[...h2Section.querySelectorAll(":scope > section:has(h3)")].reduce(((html3,h3Section)=>`\n${html3}\n<li>\n<a href="#${h3Section.id}">${h3Section.querySelector(":scope > h3").textContent}</a>\n</li>\n`),"")}\n</ol>\n`:""}\n</li>\n`),"")}\n</ol>\n</aside>\n`}));wDF("d.body.querySelectorAll(':scope > article:has(> wrapper-block > section > h2)')\n    .forEach((article) => {\n      article.innerHTML = `\n${article.innerHTML}\n\n<aside>\n<h1>\nIn this article:\n</h1>\n\n<ol>\n\x3c!-- TODO: Add section wrappers first! Because we are only selecting child elements in queryselector.\n           Done adding section wrapper. Now working on this. --\x3e\n${\n        [...article.querySelectorAll(':scope > wrapper-block > section:has(h2)')]\n          .reduce((html2, h2Section) => `\n${html2}\n<li>\n<a href=\"#${h2Section.id}\">${h2Section.querySelector(':scope > h2')!.textContent}</a>\n\n${\n            h2Section.querySelector(':scope > section:has(h3)')\n              ? `\n<ol>\n${\n                [...h2Section.querySelectorAll(':scope > section:has(h3)')]\n                  .reduce((html3, h3Section) => `\n${html3}\n<li>\n<a href=\"#${h3Section.id}\">${h3Section.querySelector(':scope > h3')!.textContent}</a>\n</li>\n`, '')\n              }\n</ol>\n`\n              : ''\n          }\n</li>\n`, '')\n      }\n</ol>\n</aside>\n`;\n    });",c,d);wrapWith(d,"main");wDF("wrapWith(d, 'main');",c,d);insertHeaderStructureOnly(d);wDF("insertHeaderStructureOnly(d);",c,d);insertFooter(d);wDF("insertFooter(d);",c,d);wrapWith(d,"wrapper-block");wDF("wrapWith(d, 'wrapper-block');",c,d);insertNavStructureOnly(d);wDF("insertNavStructureOnly(d);",c,d);insertNavPages(d);wDF("insertNavPages(d);",c,d);insertNavArticlesOrH2s(d);wDF("insertNavArticlesOrH2s(d);",c,d);insertNavFooter(d);wDF("insertNavFooter(d);",c,d);setVariables(getVariables(c),d);wDF("setVariables(getVariables(c), d);",c,d);removeXVariables(d);wDF("removeXVariables(d);",c,d);return documentString(d)};var jsExports={};var js={get exports(){return jsExports},set exports(v){jsExports=v}};var src={};var javascriptExports={};var javascript={get exports(){return javascriptExports},set exports(v){javascriptExports=v}};var beautifier$2={};var output={};var hasRequiredOutput;function requireOutput(){if(hasRequiredOutput)return output;hasRequiredOutput=1;function OutputLine(parent){this.__parent=parent;this.__character_count=0;this.__indent_count=-1;this.__alignment_count=0;this.__wrap_point_index=0;this.__wrap_point_character_count=0;this.__wrap_point_indent_count=-1;this.__wrap_point_alignment_count=0;this.__items=[]}OutputLine.prototype.clone_empty=function(){var line=new OutputLine(this.__parent);line.set_indent(this.__indent_count,this.__alignment_count);return line};OutputLine.prototype.item=function(index){if(index<0){return this.__items[this.__items.length+index]}else{return this.__items[index]}};OutputLine.prototype.has_match=function(pattern){for(var lastCheckedOutput=this.__items.length-1;lastCheckedOutput>=0;lastCheckedOutput--){if(this.__items[lastCheckedOutput].match(pattern)){return true}}return false};OutputLine.prototype.set_indent=function(indent,alignment){if(this.is_empty()){this.__indent_count=indent||0;this.__alignment_count=alignment||0;this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count)}};OutputLine.prototype._set_wrap_point=function(){if(this.__parent.wrap_line_length){this.__wrap_point_index=this.__items.length;this.__wrap_point_character_count=this.__character_count;this.__wrap_point_indent_count=this.__parent.next_line.__indent_count;this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count}};OutputLine.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};OutputLine.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var next=this.__parent.current_line;next.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count);next.__items=this.__items.slice(this.__wrap_point_index);this.__items=this.__items.slice(0,this.__wrap_point_index);next.__character_count+=this.__character_count-this.__wrap_point_character_count;this.__character_count=this.__wrap_point_character_count;if(next.__items[0]===" "){next.__items.splice(0,1);next.__character_count-=1}return true}return false};OutputLine.prototype.is_empty=function(){return this.__items.length===0};OutputLine.prototype.last=function(){if(!this.is_empty()){return this.__items[this.__items.length-1]}else{return null}};OutputLine.prototype.push=function(item){this.__items.push(item);var last_newline_index=item.lastIndexOf('\n');if(last_newline_index!==-1){this.__character_count=item.length-last_newline_index}else{this.__character_count+=item.length}};OutputLine.prototype.pop=function(){var item=null;if(!this.is_empty()){item=this.__items.pop();this.__character_count-=item.length}return item};OutputLine.prototype._remove_indent=function(){if(this.__indent_count>0){this.__indent_count-=1;this.__character_count-=this.__parent.indent_size}};OutputLine.prototype._remove_wrap_indent=function(){if(this.__wrap_point_indent_count>0){this.__wrap_point_indent_count-=1}};OutputLine.prototype.trim=function(){while(this.last()===' '){this.__items.pop();this.__character_count-=1}};OutputLine.prototype.toString=function(){var result='';if(this.is_empty()){if(this.__parent.indent_empty_lines){result=this.__parent.get_indent_string(this.__indent_count)}}else{result=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count);result+=this.__items.join('')}return result};function IndentStringCache(options,baseIndentString){this.__cache=[''];this.__indent_size=options.indent_size;this.__indent_string=options.indent_char;if(!options.indent_with_tabs){this.__indent_string=new Array(options.indent_size+1).join(options.indent_char)}baseIndentString=baseIndentString||'';if(options.indent_level>0){baseIndentString=new Array(options.indent_level+1).join(this.__indent_string)}this.__base_string=baseIndentString;this.__base_string_length=baseIndentString.length}IndentStringCache.prototype.get_indent_size=function(indent,column){var result=this.__base_string_length;column=column||0;if(indent<0){result=0}result+=indent*this.__indent_size;result+=column;return result};IndentStringCache.prototype.get_indent_string=function(indent_level,column){var result=this.__base_string;column=column||0;if(indent_level<0){indent_level=0;result=''}column+=indent_level*this.__indent_size;this.__ensure_cache(column);result+=this.__cache[column];return result};IndentStringCache.prototype.__ensure_cache=function(column){while(column>=this.__cache.length){this.__add_column()}};IndentStringCache.prototype.__add_column=function(){var column=this.__cache.length;var indent=0;var result='';if(this.__indent_size&&column>=this.__indent_size){indent=Math.floor(column/this.__indent_size);column-=indent*this.__indent_size;result=new Array(indent+1).join(this.__indent_string)}if(column){result+=new Array(column+1).join(' ')}this.__cache.push(result)};function Output(options,baseIndentString){this.__indent_cache=new IndentStringCache(options,baseIndentString);this.raw=false;this._end_with_newline=options.end_with_newline;this.indent_size=options.indent_size;this.wrap_line_length=options.wrap_line_length;this.indent_empty_lines=options.indent_empty_lines;this.__lines=[];this.previous_line=null;this.current_line=null;this.next_line=new OutputLine(this);this.space_before_token=false;this.non_breaking_space=false;this.previous_token_wrapped=false;this.__add_outputline()}Output.prototype.__add_outputline=function(){this.previous_line=this.current_line;this.current_line=this.next_line.clone_empty();this.__lines.push(this.current_line)};Output.prototype.get_line_number=function(){return this.__lines.length};Output.prototype.get_indent_string=function(indent,column){return this.__indent_cache.get_indent_string(indent,column)};Output.prototype.get_indent_size=function(indent,column){return this.__indent_cache.get_indent_size(indent,column)};Output.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};Output.prototype.add_new_line=function(force_newline){if(this.is_empty()||!force_newline&&this.just_added_newline()){return false}if(!this.raw){this.__add_outputline()}return true};Output.prototype.get_code=function(eol){this.trim(true);var last_item=this.current_line.pop();if(last_item){if(last_item[last_item.length-1]==='\n'){last_item=last_item.replace(/\n+$/g,'')}this.current_line.push(last_item)}if(this._end_with_newline){this.__add_outputline()}var sweet_code=this.__lines.join('\n');if(eol!=='\n'){sweet_code=sweet_code.replace(/[\n]/g,eol)}return sweet_code};Output.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};Output.prototype.set_indent=function(indent,alignment){indent=indent||0;alignment=alignment||0;this.next_line.set_indent(indent,alignment);if(this.__lines.length>1){this.current_line.set_indent(indent,alignment);return true}this.current_line.set_indent();return false};Output.prototype.add_raw_token=function(token){for(var x=0;x<token.newlines;x++){this.__add_outputline()}this.current_line.set_indent(-1);this.current_line.push(token.whitespace_before);this.current_line.push(token.text);this.space_before_token=false;this.non_breaking_space=false;this.previous_token_wrapped=false};Output.prototype.add_token=function(printable_token){this.__add_space_before_token();this.current_line.push(printable_token);this.space_before_token=false;this.non_breaking_space=false;this.previous_token_wrapped=this.current_line._allow_wrap()};Output.prototype.__add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){if(!this.non_breaking_space){this.set_wrap_point()}this.current_line.push(' ')}};Output.prototype.remove_indent=function(index){var output_length=this.__lines.length;while(index<output_length){this.__lines[index]._remove_indent();index++}this.current_line._remove_wrap_indent()};Output.prototype.trim=function(eat_newlines){eat_newlines=eat_newlines===undefined?false:eat_newlines;this.current_line.trim();while(eat_newlines&&this.__lines.length>1&&this.current_line.is_empty()){this.__lines.pop();this.current_line=this.__lines[this.__lines.length-1];this.current_line.trim()}this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};Output.prototype.just_added_newline=function(){return this.current_line.is_empty()};Output.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};Output.prototype.ensure_empty_line_above=function(starts_with,ends_with){var index=this.__lines.length-2;while(index>=0){var potentialEmptyLine=this.__lines[index];if(potentialEmptyLine.is_empty()){break}else if(potentialEmptyLine.item(0).indexOf(starts_with)!==0&&potentialEmptyLine.item(-1)!==ends_with){this.__lines.splice(index+1,0,new OutputLine(this));this.previous_line=this.__lines[this.__lines.length-2];break}index--}};output.Output=Output;return output}var token={};var hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function Token(type,text,newlines,whitespace_before){this.type=type;this.text=text;this.comments_before=null;this.newlines=newlines||0;this.whitespace_before=whitespace_before||'';this.parent=null;this.next=null;this.previous=null;this.opened=null;this.closed=null;this.directives=null}token.Token=Token;return token}var acorn={};var hasRequiredAcorn;function requireAcorn(){if(hasRequiredAcorn)return acorn;hasRequiredAcorn=1;(function(exports){var baseASCIIidentifierStartChars="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a";var baseASCIIidentifierChars="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a";var nonASCIIidentifierStartChars="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc";var nonASCIIidentifierChars="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f";var identifierStart="(?:\\\\u[0-9a-fA-F]{4}|["+baseASCIIidentifierStartChars+nonASCIIidentifierStartChars+"])";var identifierChars="(?:\\\\u[0-9a-fA-F]{4}|["+baseASCIIidentifierChars+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"])*";exports.identifier=new RegExp(identifierStart+identifierChars,'g');exports.identifierStart=new RegExp(identifierStart);exports.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+baseASCIIidentifierChars+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"])+");exports.newline=/[\n\r\u2028\u2029]/;exports.lineBreak=new RegExp('\r\n|'+exports.newline.source);exports.allLineBreaks=new RegExp(exports.lineBreak.source,'g')})(acorn);return acorn}var options$3={};var options$2={};var hasRequiredOptions$3;function requireOptions$3(){if(hasRequiredOptions$3)return options$2;hasRequiredOptions$3=1;function Options(options,merge_child_field){this.raw_options=_mergeOpts(options,merge_child_field);this.disabled=this._get_boolean('disabled');this.eol=this._get_characters('eol','auto');this.end_with_newline=this._get_boolean('end_with_newline');this.indent_size=this._get_number('indent_size',4);this.indent_char=this._get_characters('indent_char',' ');this.indent_level=this._get_number('indent_level');this.preserve_newlines=this._get_boolean('preserve_newlines',true);this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786);if(!this.preserve_newlines){this.max_preserve_newlines=0}this.indent_with_tabs=this._get_boolean('indent_with_tabs',this.indent_char==='\t');if(this.indent_with_tabs){this.indent_char='\t';if(this.indent_size===1){this.indent_size=4}}this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char'));this.indent_empty_lines=this._get_boolean('indent_empty_lines');this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}Options.prototype._get_array=function(name,default_value){var option_value=this.raw_options[name];var result=default_value||[];if(typeof option_value==='object'){if(option_value!==null&&typeof option_value.concat==='function'){result=option_value.concat()}}else if(typeof option_value==='string'){result=option_value.split(/[^a-zA-Z0-9_\/\-]+/)}return result};Options.prototype._get_boolean=function(name,default_value){var option_value=this.raw_options[name];var result=option_value===undefined?!!default_value:!!option_value;return result};Options.prototype._get_characters=function(name,default_value){var option_value=this.raw_options[name];var result=default_value||'';if(typeof option_value==='string'){result=option_value.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')}return result};Options.prototype._get_number=function(name,default_value){var option_value=this.raw_options[name];default_value=parseInt(default_value,10);if(isNaN(default_value)){default_value=0}var result=parseInt(option_value,10);if(isNaN(result)){result=default_value}return result};Options.prototype._get_selection=function(name,selection_list,default_value){var result=this._get_selection_list(name,selection_list,default_value);if(result.length!==1){throw new Error("Invalid Option Value: The option '"+name+"' can only be one of the following values:\n"+selection_list+"\nYou passed in: '"+this.raw_options[name]+"'")}return result[0]};Options.prototype._get_selection_list=function(name,selection_list,default_value){if(!selection_list||selection_list.length===0){throw new Error("Selection list cannot be empty.")}default_value=default_value||[selection_list[0]];if(!this._is_valid_selection(default_value,selection_list)){throw new Error("Invalid Default Value!")}var result=this._get_array(name,default_value);if(!this._is_valid_selection(result,selection_list)){throw new Error("Invalid Option Value: The option '"+name+"' can contain only the following values:\n"+selection_list+"\nYou passed in: '"+this.raw_options[name]+"'")}return result};Options.prototype._is_valid_selection=function(result,selection_list){return result.length&&selection_list.length&&!result.some((function(item){return selection_list.indexOf(item)===-1}))};function _mergeOpts(allOptions,childFieldName){var finalOpts={};allOptions=_normalizeOpts(allOptions);var name;for(name in allOptions){if(name!==childFieldName){finalOpts[name]=allOptions[name]}}if(childFieldName&&allOptions[childFieldName]){for(name in allOptions[childFieldName]){finalOpts[name]=allOptions[childFieldName][name]}}return finalOpts}function _normalizeOpts(options){var convertedOpts={};var key;for(key in options){var newKey=key.replace(/-/g,"_");convertedOpts[newKey]=options[key]}return convertedOpts}options$2.Options=Options;options$2.normalizeOpts=_normalizeOpts;options$2.mergeOpts=_mergeOpts;return options$2}var hasRequiredOptions$2;function requireOptions$2(){if(hasRequiredOptions$2)return options$3;hasRequiredOptions$2=1;var BaseOptions=requireOptions$3().Options;var validPositionValues=['before-newline','after-newline','preserve-newline'];function Options(options){BaseOptions.call(this,options,'js');var raw_brace_style=this.raw_options.brace_style||null;if(raw_brace_style==="expand-strict"){this.raw_options.brace_style="expand"}else if(raw_brace_style==="collapse-preserve-inline"){this.raw_options.brace_style="collapse,preserve-inline"}else if(this.raw_options.braces_on_own_line!==undefined){this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse"}var brace_style_split=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_preserve_inline=false;this.brace_style="collapse";for(var bs=0;bs<brace_style_split.length;bs++){if(brace_style_split[bs]==="preserve-inline"){this.brace_preserve_inline=true}else{this.brace_style=brace_style_split[bs]}}this.unindent_chained_methods=this._get_boolean('unindent_chained_methods');this.break_chained_methods=this._get_boolean('break_chained_methods');this.space_in_paren=this._get_boolean('space_in_paren');this.space_in_empty_paren=this._get_boolean('space_in_empty_paren');this.jslint_happy=this._get_boolean('jslint_happy');this.space_after_anon_function=this._get_boolean('space_after_anon_function');this.space_after_named_function=this._get_boolean('space_after_named_function');this.keep_array_indentation=this._get_boolean('keep_array_indentation');this.space_before_conditional=this._get_boolean('space_before_conditional',true);this.unescape_strings=this._get_boolean('unescape_strings');this.e4x=this._get_boolean('e4x');this.comma_first=this._get_boolean('comma_first');this.operator_position=this._get_selection('operator_position',validPositionValues);this.test_output_raw=this._get_boolean('test_output_raw');if(this.jslint_happy){this.space_after_anon_function=true}}Options.prototype=new BaseOptions;options$3.Options=Options;return options$3}var tokenizer$2={};var inputscanner={};var hasRequiredInputscanner;function requireInputscanner(){if(hasRequiredInputscanner)return inputscanner;hasRequiredInputscanner=1;var regexp_has_sticky=RegExp.prototype.hasOwnProperty('sticky');function InputScanner(input_string){this.__input=input_string||'';this.__input_length=this.__input.length;this.__position=0}InputScanner.prototype.restart=function(){this.__position=0};InputScanner.prototype.back=function(){if(this.__position>0){this.__position-=1}};InputScanner.prototype.hasNext=function(){return this.__position<this.__input_length};InputScanner.prototype.next=function(){var val=null;if(this.hasNext()){val=this.__input.charAt(this.__position);this.__position+=1}return val};InputScanner.prototype.peek=function(index){var val=null;index=index||0;index+=this.__position;if(index>=0&&index<this.__input_length){val=this.__input.charAt(index)}return val};InputScanner.prototype.__match=function(pattern,index){pattern.lastIndex=index;var pattern_match=pattern.exec(this.__input);if(pattern_match&&!(regexp_has_sticky&&pattern.sticky)){if(pattern_match.index!==index){pattern_match=null}}return pattern_match};InputScanner.prototype.test=function(pattern,index){index=index||0;index+=this.__position;if(index>=0&&index<this.__input_length){return!!this.__match(pattern,index)}else{return false}};InputScanner.prototype.testChar=function(pattern,index){var val=this.peek(index);pattern.lastIndex=0;return val!==null&&pattern.test(val)};InputScanner.prototype.match=function(pattern){var pattern_match=this.__match(pattern,this.__position);if(pattern_match){this.__position+=pattern_match[0].length}else{pattern_match=null}return pattern_match};InputScanner.prototype.read=function(starting_pattern,until_pattern,until_after){var val='';var match;if(starting_pattern){match=this.match(starting_pattern);if(match){val+=match[0]}}if(until_pattern&&(match||!starting_pattern)){val+=this.readUntil(until_pattern,until_after)}return val};InputScanner.prototype.readUntil=function(pattern,until_after){var val='';var match_index=this.__position;pattern.lastIndex=this.__position;var pattern_match=pattern.exec(this.__input);if(pattern_match){match_index=pattern_match.index;if(until_after){match_index+=pattern_match[0].length}}else{match_index=this.__input_length}val=this.__input.substring(this.__position,match_index);this.__position=match_index;return val};InputScanner.prototype.readUntilAfter=function(pattern){return this.readUntil(pattern,true)};InputScanner.prototype.get_regexp=function(pattern,match_from){var result=null;var flags='g';if(match_from&&regexp_has_sticky){flags='y'}if(typeof pattern==="string"&&pattern!==''){result=new RegExp(pattern,flags)}else if(pattern){result=new RegExp(pattern.source,flags)}return result};InputScanner.prototype.get_literal_regexp=function(literal_string){return RegExp(literal_string.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))};InputScanner.prototype.peekUntilAfter=function(pattern){var start=this.__position;var val=this.readUntilAfter(pattern);this.__position=start;return val};InputScanner.prototype.lookBack=function(testVal){var start=this.__position-1;return start>=testVal.length&&this.__input.substring(start-testVal.length,start).toLowerCase()===testVal};inputscanner.InputScanner=InputScanner;return inputscanner}var tokenizer$1={};var tokenstream={};var hasRequiredTokenstream;function requireTokenstream(){if(hasRequiredTokenstream)return tokenstream;hasRequiredTokenstream=1;function TokenStream(parent_token){this.__tokens=[];this.__tokens_length=this.__tokens.length;this.__position=0;this.__parent_token=parent_token}TokenStream.prototype.restart=function(){this.__position=0};TokenStream.prototype.isEmpty=function(){return this.__tokens_length===0};TokenStream.prototype.hasNext=function(){return this.__position<this.__tokens_length};TokenStream.prototype.next=function(){var val=null;if(this.hasNext()){val=this.__tokens[this.__position];this.__position+=1}return val};TokenStream.prototype.peek=function(index){var val=null;index=index||0;index+=this.__position;if(index>=0&&index<this.__tokens_length){val=this.__tokens[index]}return val};TokenStream.prototype.add=function(token){if(this.__parent_token){token.parent=this.__parent_token}this.__tokens.push(token);this.__tokens_length+=1};tokenstream.TokenStream=TokenStream;return tokenstream}var whitespacepattern={};var pattern={};var hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1;function Pattern(input_scanner,parent){this._input=input_scanner;this._starting_pattern=null;this._match_pattern=null;this._until_pattern=null;this._until_after=false;if(parent){this._starting_pattern=this._input.get_regexp(parent._starting_pattern,true);this._match_pattern=this._input.get_regexp(parent._match_pattern,true);this._until_pattern=this._input.get_regexp(parent._until_pattern);this._until_after=parent._until_after}}Pattern.prototype.read=function(){var result=this._input.read(this._starting_pattern);if(!this._starting_pattern||result){result+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)}return result};Pattern.prototype.read_match=function(){return this._input.match(this._match_pattern)};Pattern.prototype.until_after=function(pattern){var result=this._create();result._until_after=true;result._until_pattern=this._input.get_regexp(pattern);result._update();return result};Pattern.prototype.until=function(pattern){var result=this._create();result._until_after=false;result._until_pattern=this._input.get_regexp(pattern);result._update();return result};Pattern.prototype.starting_with=function(pattern){var result=this._create();result._starting_pattern=this._input.get_regexp(pattern,true);result._update();return result};Pattern.prototype.matching=function(pattern){var result=this._create();result._match_pattern=this._input.get_regexp(pattern,true);result._update();return result};Pattern.prototype._create=function(){return new Pattern(this._input,this)};Pattern.prototype._update=function(){};pattern.Pattern=Pattern;return pattern}var hasRequiredWhitespacepattern;function requireWhitespacepattern(){if(hasRequiredWhitespacepattern)return whitespacepattern;hasRequiredWhitespacepattern=1;var Pattern=requirePattern().Pattern;function WhitespacePattern(input_scanner,parent){Pattern.call(this,input_scanner,parent);if(parent){this._line_regexp=this._input.get_regexp(parent._line_regexp)}else{this.__set_whitespace_patterns('','')}this.newline_count=0;this.whitespace_before_token=''}WhitespacePattern.prototype=new Pattern;WhitespacePattern.prototype.__set_whitespace_patterns=function(whitespace_chars,newline_chars){whitespace_chars+='\\t ';newline_chars+='\\n\\r';this._match_pattern=this._input.get_regexp('['+whitespace_chars+newline_chars+']+',true);this._newline_regexp=this._input.get_regexp('\\r\\n|['+newline_chars+']')};WhitespacePattern.prototype.read=function(){this.newline_count=0;this.whitespace_before_token='';var resulting_string=this._input.read(this._match_pattern);if(resulting_string===' '){this.whitespace_before_token=' '}else if(resulting_string){var matches=this.__split(this._newline_regexp,resulting_string);this.newline_count=matches.length-1;this.whitespace_before_token=matches[this.newline_count]}return resulting_string};WhitespacePattern.prototype.matching=function(whitespace_chars,newline_chars){var result=this._create();result.__set_whitespace_patterns(whitespace_chars,newline_chars);result._update();return result};WhitespacePattern.prototype._create=function(){return new WhitespacePattern(this._input,this)};WhitespacePattern.prototype.__split=function(regexp,input_string){regexp.lastIndex=0;var start_index=0;var result=[];var next_match=regexp.exec(input_string);while(next_match){result.push(input_string.substring(start_index,next_match.index));start_index=next_match.index+next_match[0].length;next_match=regexp.exec(input_string)}if(start_index<input_string.length){result.push(input_string.substring(start_index,input_string.length))}else{result.push('')}return result};whitespacepattern.WhitespacePattern=WhitespacePattern;return whitespacepattern}var hasRequiredTokenizer$2;function requireTokenizer$2(){if(hasRequiredTokenizer$2)return tokenizer$1;hasRequiredTokenizer$2=1;var InputScanner=requireInputscanner().InputScanner;var Token=requireToken().Token;var TokenStream=requireTokenstream().TokenStream;var WhitespacePattern=requireWhitespacepattern().WhitespacePattern;var TOKEN={START:'TK_START',RAW:'TK_RAW',EOF:'TK_EOF'};var Tokenizer=function(input_string,options){this._input=new InputScanner(input_string);this._options=options||{};this.__tokens=null;this._patterns={};this._patterns.whitespace=new WhitespacePattern(this._input)};Tokenizer.prototype.tokenize=function(){this._input.restart();this.__tokens=new TokenStream;this._reset();var current;var previous=new Token(TOKEN.START,'');var open_token=null;var open_stack=[];var comments=new TokenStream;while(previous.type!==TOKEN.EOF){current=this._get_next_token(previous,open_token);while(this._is_comment(current)){comments.add(current);current=this._get_next_token(previous,open_token)}if(!comments.isEmpty()){current.comments_before=comments;comments=new TokenStream}current.parent=open_token;if(this._is_opening(current)){open_stack.push(open_token);open_token=current}else if(open_token&&this._is_closing(current,open_token)){current.opened=open_token;open_token.closed=current;open_token=open_stack.pop();current.parent=open_token}current.previous=previous;previous.next=current;this.__tokens.add(current);previous=current}return this.__tokens};Tokenizer.prototype._is_first_token=function(){return this.__tokens.isEmpty()};Tokenizer.prototype._reset=function(){};Tokenizer.prototype._get_next_token=function(previous_token,open_token){this._readWhitespace();var resulting_string=this._input.read(/.+/g);if(resulting_string){return this._create_token(TOKEN.RAW,resulting_string)}else{return this._create_token(TOKEN.EOF,'')}};Tokenizer.prototype._is_comment=function(current_token){return false};Tokenizer.prototype._is_opening=function(current_token){return false};Tokenizer.prototype._is_closing=function(current_token,open_token){return false};Tokenizer.prototype._create_token=function(type,text){var token=new Token(type,text,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return token};Tokenizer.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};tokenizer$1.Tokenizer=Tokenizer;tokenizer$1.TOKEN=TOKEN;return tokenizer$1}var directives={};var hasRequiredDirectives;function requireDirectives(){if(hasRequiredDirectives)return directives;hasRequiredDirectives=1;function Directives(start_block_pattern,end_block_pattern){start_block_pattern=typeof start_block_pattern==='string'?start_block_pattern:start_block_pattern.source;end_block_pattern=typeof end_block_pattern==='string'?end_block_pattern:end_block_pattern.source;this.__directives_block_pattern=new RegExp(start_block_pattern+/ beautify( \w+[:]\w+)+ /.source+end_block_pattern,'g');this.__directive_pattern=/ (\w+)[:](\w+)/g;this.__directives_end_ignore_pattern=new RegExp(start_block_pattern+/\sbeautify\signore:end\s/.source+end_block_pattern,'g')}Directives.prototype.get_directives=function(text){if(!text.match(this.__directives_block_pattern)){return null}var directives={};this.__directive_pattern.lastIndex=0;var directive_match=this.__directive_pattern.exec(text);while(directive_match){directives[directive_match[1]]=directive_match[2];directive_match=this.__directive_pattern.exec(text)}return directives};Directives.prototype.readIgnored=function(input){return input.readUntilAfter(this.__directives_end_ignore_pattern)};directives.Directives=Directives;return directives}var templatablepattern={};var hasRequiredTemplatablepattern;function requireTemplatablepattern(){if(hasRequiredTemplatablepattern)return templatablepattern;hasRequiredTemplatablepattern=1;var Pattern=requirePattern().Pattern;var template_names={django:false,erb:false,handlebars:false,php:false,smarty:false};function TemplatablePattern(input_scanner,parent){Pattern.call(this,input_scanner,parent);this.__template_pattern=null;this._disabled=Object.assign({},template_names);this._excluded=Object.assign({},template_names);if(parent){this.__template_pattern=this._input.get_regexp(parent.__template_pattern);this._excluded=Object.assign(this._excluded,parent._excluded);this._disabled=Object.assign(this._disabled,parent._disabled)}var pattern=new Pattern(input_scanner);this.__patterns={handlebars_comment:pattern.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:pattern.starting_with(/{{{/).until_after(/}}}/),handlebars:pattern.starting_with(/{{/).until_after(/}}/),php:pattern.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:pattern.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:pattern.starting_with(/{%/).until_after(/%}/),django_value:pattern.starting_with(/{{/).until_after(/}}/),django_comment:pattern.starting_with(/{#/).until_after(/#}/),smarty:pattern.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:pattern.starting_with(/{\*/).until_after(/\*}/),smarty_literal:pattern.starting_with(/{literal}/).until_after(/{\/literal}/)}}TemplatablePattern.prototype=new Pattern;TemplatablePattern.prototype._create=function(){return new TemplatablePattern(this._input,this)};TemplatablePattern.prototype._update=function(){this.__set_templated_pattern()};TemplatablePattern.prototype.disable=function(language){var result=this._create();result._disabled[language]=true;result._update();return result};TemplatablePattern.prototype.read_options=function(options){var result=this._create();for(var language in template_names){result._disabled[language]=options.templating.indexOf(language)===-1}result._update();return result};TemplatablePattern.prototype.exclude=function(language){var result=this._create();result._excluded[language]=true;result._update();return result};TemplatablePattern.prototype.read=function(){var result='';if(this._match_pattern){result=this._input.read(this._starting_pattern)}else{result=this._input.read(this._starting_pattern,this.__template_pattern)}var next=this._read_template();while(next){if(this._match_pattern){next+=this._input.read(this._match_pattern)}else{next+=this._input.readUntil(this.__template_pattern)}result+=next;next=this._read_template()}if(this._until_after){result+=this._input.readUntilAfter(this._until_pattern)}return result};TemplatablePattern.prototype.__set_templated_pattern=function(){var items=[];if(!this._disabled.php){items.push(this.__patterns.php._starting_pattern.source)}if(!this._disabled.handlebars){items.push(this.__patterns.handlebars._starting_pattern.source)}if(!this._disabled.erb){items.push(this.__patterns.erb._starting_pattern.source)}if(!this._disabled.django){items.push(this.__patterns.django._starting_pattern.source);items.push(this.__patterns.django_value._starting_pattern.source);items.push(this.__patterns.django_comment._starting_pattern.source)}if(!this._disabled.smarty){items.push(this.__patterns.smarty._starting_pattern.source)}if(this._until_pattern){items.push(this._until_pattern.source)}this.__template_pattern=this._input.get_regexp('(?:'+items.join('|')+')')};TemplatablePattern.prototype._read_template=function(){var resulting_string='';var c=this._input.peek();if(c==='<'){var peek1=this._input.peek(1);if(!this._disabled.php&&!this._excluded.php&&peek1==='?'){resulting_string=resulting_string||this.__patterns.php.read()}if(!this._disabled.erb&&!this._excluded.erb&&peek1==='%'){resulting_string=resulting_string||this.__patterns.erb.read()}}else if(c==='{'){if(!this._disabled.handlebars&&!this._excluded.handlebars){resulting_string=resulting_string||this.__patterns.handlebars_comment.read();resulting_string=resulting_string||this.__patterns.handlebars_unescaped.read();resulting_string=resulting_string||this.__patterns.handlebars.read()}if(!this._disabled.django){if(!this._excluded.django&&!this._excluded.handlebars){resulting_string=resulting_string||this.__patterns.django_value.read()}if(!this._excluded.django){resulting_string=resulting_string||this.__patterns.django_comment.read();resulting_string=resulting_string||this.__patterns.django.read()}}if(!this._disabled.smarty){if(this._disabled.django&&this._disabled.handlebars){resulting_string=resulting_string||this.__patterns.smarty_comment.read();resulting_string=resulting_string||this.__patterns.smarty_literal.read();resulting_string=resulting_string||this.__patterns.smarty.read()}}}return resulting_string};templatablepattern.TemplatablePattern=TemplatablePattern;return templatablepattern}var hasRequiredTokenizer$1;function requireTokenizer$1(){if(hasRequiredTokenizer$1)return tokenizer$2;hasRequiredTokenizer$1=1;var InputScanner=requireInputscanner().InputScanner;var BaseTokenizer=requireTokenizer$2().Tokenizer;var BASETOKEN=requireTokenizer$2().TOKEN;var Directives=requireDirectives().Directives;var acorn=requireAcorn();var Pattern=requirePattern().Pattern;var TemplatablePattern=requireTemplatablepattern().TemplatablePattern;function in_array(what,arr){return arr.indexOf(what)!==-1}var TOKEN={START_EXPR:'TK_START_EXPR',END_EXPR:'TK_END_EXPR',START_BLOCK:'TK_START_BLOCK',END_BLOCK:'TK_END_BLOCK',WORD:'TK_WORD',RESERVED:'TK_RESERVED',SEMICOLON:'TK_SEMICOLON',STRING:'TK_STRING',EQUALS:'TK_EQUALS',OPERATOR:'TK_OPERATOR',COMMA:'TK_COMMA',BLOCK_COMMENT:'TK_BLOCK_COMMENT',COMMENT:'TK_COMMENT',DOT:'TK_DOT',UNKNOWN:'TK_UNKNOWN',START:BASETOKEN.START,RAW:BASETOKEN.RAW,EOF:BASETOKEN.EOF};var directives_core=new Directives(/\/\*/,/\*\//);var number_pattern=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/;var digit=/[0-9]/;var dot_pattern=/[^\d\.]/;var positionable_operators=(">>> === !== &&= ??= ||= "+"<< && >= ** != == <= >> || ?? |> "+"< / - + > : & % ? ^ | *").split(' ');var punct=">>>= "+"... >>= <<= === >>> !== **= &&= ??= ||= "+"=> ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> "+"= ! ? > < : / ^ - + * & % ~ |";punct=punct.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");punct='\\?\\.(?!\\d) '+punct;punct=punct.replace(/ /g,'|');var punct_pattern=new RegExp(punct);var line_starters='continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');var reserved_words=line_starters.concat(['do','in','of','else','get','set','new','catch','finally','typeof','yield','async','await','from','as','class','extends']);var reserved_word_pattern=new RegExp('^(?:'+reserved_words.join('|')+')$');var in_html_comment;var Tokenizer=function(input_string,options){BaseTokenizer.call(this,input_string,options);this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var pattern_reader=new Pattern(this._input);var templatable=new TemplatablePattern(this._input).read_options(this._options);this.__patterns={template:templatable,identifier:templatable.starting_with(acorn.identifier).matching(acorn.identifierMatch),number:pattern_reader.matching(number_pattern),punct:pattern_reader.matching(punct_pattern),comment:pattern_reader.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:pattern_reader.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:pattern_reader.matching(/<!--/),html_comment_end:pattern_reader.matching(/-->/),include:pattern_reader.starting_with(/#include/).until_after(acorn.lineBreak),shebang:pattern_reader.starting_with(/#!/).until_after(acorn.lineBreak),xml:pattern_reader.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:templatable.until(/['\\\n\r\u2028\u2029]/),double_quote:templatable.until(/["\\\n\r\u2028\u2029]/),template_text:templatable.until(/[`\\$]/),template_expression:templatable.until(/[`}\\]/)}};Tokenizer.prototype=new BaseTokenizer;Tokenizer.prototype._is_comment=function(current_token){return current_token.type===TOKEN.COMMENT||current_token.type===TOKEN.BLOCK_COMMENT||current_token.type===TOKEN.UNKNOWN};Tokenizer.prototype._is_opening=function(current_token){return current_token.type===TOKEN.START_BLOCK||current_token.type===TOKEN.START_EXPR};Tokenizer.prototype._is_closing=function(current_token,open_token){return(current_token.type===TOKEN.END_BLOCK||current_token.type===TOKEN.END_EXPR)&&(open_token&&(current_token.text===']'&&open_token.text==='['||current_token.text===')'&&open_token.text==='('||current_token.text==='}'&&open_token.text==='{'))};Tokenizer.prototype._reset=function(){in_html_comment=false};Tokenizer.prototype._get_next_token=function(previous_token,open_token){var token=null;this._readWhitespace();var c=this._input.peek();if(c===null){return this._create_token(TOKEN.EOF,'')}token=token||this._read_non_javascript(c);token=token||this._read_string(c);token=token||this._read_word(previous_token);token=token||this._read_singles(c);token=token||this._read_comment(c);token=token||this._read_regexp(c,previous_token);token=token||this._read_xml(c,previous_token);token=token||this._read_punctuation();token=token||this._create_token(TOKEN.UNKNOWN,this._input.next());return token};Tokenizer.prototype._read_word=function(previous_token){var resulting_string;resulting_string=this.__patterns.identifier.read();if(resulting_string!==''){resulting_string=resulting_string.replace(acorn.allLineBreaks,'\n');if(!(previous_token.type===TOKEN.DOT||previous_token.type===TOKEN.RESERVED&&(previous_token.text==='set'||previous_token.text==='get'))&&reserved_word_pattern.test(resulting_string)){if((resulting_string==='in'||resulting_string==='of')&&(previous_token.type===TOKEN.WORD||previous_token.type===TOKEN.STRING)){return this._create_token(TOKEN.OPERATOR,resulting_string)}return this._create_token(TOKEN.RESERVED,resulting_string)}return this._create_token(TOKEN.WORD,resulting_string)}resulting_string=this.__patterns.number.read();if(resulting_string!==''){return this._create_token(TOKEN.WORD,resulting_string)}};Tokenizer.prototype._read_singles=function(c){var token=null;if(c==='('||c==='['){token=this._create_token(TOKEN.START_EXPR,c)}else if(c===')'||c===']'){token=this._create_token(TOKEN.END_EXPR,c)}else if(c==='{'){token=this._create_token(TOKEN.START_BLOCK,c)}else if(c==='}'){token=this._create_token(TOKEN.END_BLOCK,c)}else if(c===';'){token=this._create_token(TOKEN.SEMICOLON,c)}else if(c==='.'&&dot_pattern.test(this._input.peek(1))){token=this._create_token(TOKEN.DOT,c)}else if(c===','){token=this._create_token(TOKEN.COMMA,c)}if(token){this._input.next()}return token};Tokenizer.prototype._read_punctuation=function(){var resulting_string=this.__patterns.punct.read();if(resulting_string!==''){if(resulting_string==='='){return this._create_token(TOKEN.EQUALS,resulting_string)}else if(resulting_string==='?.'){return this._create_token(TOKEN.DOT,resulting_string)}else{return this._create_token(TOKEN.OPERATOR,resulting_string)}}};Tokenizer.prototype._read_non_javascript=function(c){var resulting_string='';if(c==='#'){if(this._is_first_token()){resulting_string=this.__patterns.shebang.read();if(resulting_string){return this._create_token(TOKEN.UNKNOWN,resulting_string.trim()+'\n')}}resulting_string=this.__patterns.include.read();if(resulting_string){return this._create_token(TOKEN.UNKNOWN,resulting_string.trim()+'\n')}c=this._input.next();var sharp='#';if(this._input.hasNext()&&this._input.testChar(digit)){do{c=this._input.next();sharp+=c}while(this._input.hasNext()&&c!=='#'&&c!=='=');if(c==='#');else if(this._input.peek()==='['&&this._input.peek(1)===']'){sharp+='[]';this._input.next();this._input.next()}else if(this._input.peek()==='{'&&this._input.peek(1)==='}'){sharp+='{}';this._input.next();this._input.next()}return this._create_token(TOKEN.WORD,sharp)}this._input.back()}else if(c==='<'&&this._is_first_token()){resulting_string=this.__patterns.html_comment_start.read();if(resulting_string){while(this._input.hasNext()&&!this._input.testChar(acorn.newline)){resulting_string+=this._input.next()}in_html_comment=true;return this._create_token(TOKEN.COMMENT,resulting_string)}}else if(in_html_comment&&c==='-'){resulting_string=this.__patterns.html_comment_end.read();if(resulting_string){in_html_comment=false;return this._create_token(TOKEN.COMMENT,resulting_string)}}return null};Tokenizer.prototype._read_comment=function(c){var token=null;if(c==='/'){var comment='';if(this._input.peek(1)==='*'){comment=this.__patterns.block_comment.read();var directives=directives_core.get_directives(comment);if(directives&&directives.ignore==='start'){comment+=directives_core.readIgnored(this._input)}comment=comment.replace(acorn.allLineBreaks,'\n');token=this._create_token(TOKEN.BLOCK_COMMENT,comment);token.directives=directives}else if(this._input.peek(1)==='/'){comment=this.__patterns.comment.read();token=this._create_token(TOKEN.COMMENT,comment)}}return token};Tokenizer.prototype._read_string=function(c){if(c==='`'||c==="'"||c==='"'){var resulting_string=this._input.next();this.has_char_escapes=false;if(c==='`'){resulting_string+=this._read_string_recursive('`',true,'${')}else{resulting_string+=this._read_string_recursive(c)}if(this.has_char_escapes&&this._options.unescape_strings){resulting_string=unescape_string(resulting_string)}if(this._input.peek()===c){resulting_string+=this._input.next()}resulting_string=resulting_string.replace(acorn.allLineBreaks,'\n');return this._create_token(TOKEN.STRING,resulting_string)}return null};Tokenizer.prototype._allow_regexp_or_xml=function(previous_token){return previous_token.type===TOKEN.RESERVED&&in_array(previous_token.text,['return','case','throw','else','do','typeof','yield'])||previous_token.type===TOKEN.END_EXPR&&previous_token.text===')'&&previous_token.opened.previous.type===TOKEN.RESERVED&&in_array(previous_token.opened.previous.text,['if','while','for'])||in_array(previous_token.type,[TOKEN.COMMENT,TOKEN.START_EXPR,TOKEN.START_BLOCK,TOKEN.START,TOKEN.END_BLOCK,TOKEN.OPERATOR,TOKEN.EQUALS,TOKEN.EOF,TOKEN.SEMICOLON,TOKEN.COMMA])};Tokenizer.prototype._read_regexp=function(c,previous_token){if(c==='/'&&this._allow_regexp_or_xml(previous_token)){var resulting_string=this._input.next();var esc=false;var in_char_class=false;while(this._input.hasNext()&&((esc||in_char_class||this._input.peek()!==c)&&!this._input.testChar(acorn.newline))){resulting_string+=this._input.peek();if(!esc){esc=this._input.peek()==='\\';if(this._input.peek()==='['){in_char_class=true}else if(this._input.peek()===']'){in_char_class=false}}else{esc=false}this._input.next()}if(this._input.peek()===c){resulting_string+=this._input.next();resulting_string+=this._input.read(acorn.identifier)}return this._create_token(TOKEN.STRING,resulting_string)}return null};Tokenizer.prototype._read_xml=function(c,previous_token){if(this._options.e4x&&c==="<"&&this._allow_regexp_or_xml(previous_token)){var xmlStr='';var match=this.__patterns.xml.read_match();if(match){var rootTag=match[2].replace(/^{\s+/,'{').replace(/\s+}$/,'}');var isCurlyRoot=rootTag.indexOf('{')===0;var depth=0;while(match){var isEndTag=!!match[1];var tagName=match[2];var isSingletonTag=!!match[match.length-1]||tagName.slice(0,8)==="![CDATA[";if(!isSingletonTag&&(tagName===rootTag||isCurlyRoot&&tagName.replace(/^{\s+/,'{').replace(/\s+}$/,'}'))){if(isEndTag){--depth}else{++depth}}xmlStr+=match[0];if(depth<=0){break}match=this.__patterns.xml.read_match()}if(!match){xmlStr+=this._input.match(/[\s\S]*/g)[0]}xmlStr=xmlStr.replace(acorn.allLineBreaks,'\n');return this._create_token(TOKEN.STRING,xmlStr)}}return null};function unescape_string(s){var out='',escaped=0;var input_scan=new InputScanner(s);var matched=null;while(input_scan.hasNext()){matched=input_scan.match(/([\s]|[^\\]|\\\\)+/g);if(matched){out+=matched[0]}if(input_scan.peek()==='\\'){input_scan.next();if(input_scan.peek()==='x'){matched=input_scan.match(/x([0-9A-Fa-f]{2})/g)}else if(input_scan.peek()==='u'){matched=input_scan.match(/u([0-9A-Fa-f]{4})/g)}else{out+='\\';if(input_scan.hasNext()){out+=input_scan.next()}continue}if(!matched){return s}escaped=parseInt(matched[1],16);if(escaped>0x7e&&escaped<=0xff&&matched[0].indexOf('x')===0){return s}else if(escaped>=0x00&&escaped<0x20){out+='\\'+matched[0];continue}else if(escaped===0x22||escaped===0x27||escaped===0x5c){out+='\\'+String.fromCharCode(escaped)}else{out+=String.fromCharCode(escaped)}}}return out}Tokenizer.prototype._read_string_recursive=function(delimiter,allow_unescaped_newlines,start_sub){var current_char;var pattern;if(delimiter==='\''){pattern=this.__patterns.single_quote}else if(delimiter==='"'){pattern=this.__patterns.double_quote}else if(delimiter==='`'){pattern=this.__patterns.template_text}else if(delimiter==='}'){pattern=this.__patterns.template_expression}var resulting_string=pattern.read();var next='';while(this._input.hasNext()){next=this._input.next();if(next===delimiter||!allow_unescaped_newlines&&acorn.newline.test(next)){this._input.back();break}else if(next==='\\'&&this._input.hasNext()){current_char=this._input.peek();if(current_char==='x'||current_char==='u'){this.has_char_escapes=true}else if(current_char==='\r'&&this._input.peek(1)==='\n'){this._input.next()}next+=this._input.next()}else if(start_sub){if(start_sub==='${'&&next==='$'&&this._input.peek()==='{'){next+=this._input.next()}if(start_sub===next){if(delimiter==='`'){next+=this._read_string_recursive('}',allow_unescaped_newlines,'`')}else{next+=this._read_string_recursive('`',allow_unescaped_newlines,'${')}if(this._input.hasNext()){next+=this._input.next()}}}next+=pattern.read();resulting_string+=next}return resulting_string};tokenizer$2.Tokenizer=Tokenizer;tokenizer$2.TOKEN=TOKEN;tokenizer$2.positionable_operators=positionable_operators.slice();tokenizer$2.line_starters=line_starters.slice();return tokenizer$2}var hasRequiredBeautifier$2;function requireBeautifier$2(){if(hasRequiredBeautifier$2)return beautifier$2;hasRequiredBeautifier$2=1;var Output=requireOutput().Output;var Token=requireToken().Token;var acorn=requireAcorn();var Options=requireOptions$2().Options;var Tokenizer=requireTokenizer$1().Tokenizer;var line_starters=requireTokenizer$1().line_starters;var positionable_operators=requireTokenizer$1().positionable_operators;var TOKEN=requireTokenizer$1().TOKEN;function in_array(what,arr){return arr.indexOf(what)!==-1}function ltrim(s){return s.replace(/^\s+/g,'')}function generateMapFromStrings(list){var result={};for(var x=0;x<list.length;x++){result[list[x].replace(/-/g,'_')]=list[x]}return result}function reserved_word(token,word){return token&&token.type===TOKEN.RESERVED&&token.text===word}function reserved_array(token,words){return token&&token.type===TOKEN.RESERVED&&in_array(token.text,words)}var special_words=['case','return','do','if','throw','else','await','break','continue','async'];var validPositionValues=['before-newline','after-newline','preserve-newline'];var OPERATOR_POSITION=generateMapFromStrings(validPositionValues);var OPERATOR_POSITION_BEFORE_OR_PRESERVE=[OPERATOR_POSITION.before_newline,OPERATOR_POSITION.preserve_newline];var MODE={BlockStatement:'BlockStatement',Statement:'Statement',ObjectLiteral:'ObjectLiteral',ArrayLiteral:'ArrayLiteral',ForInitializer:'ForInitializer',Conditional:'Conditional',Expression:'Expression'};function remove_redundant_indentation(output,frame){if(frame.multiline_frame||frame.mode===MODE.ForInitializer||frame.mode===MODE.Conditional){return}output.remove_indent(frame.start_line_index)}function split_linebreaks(s){s=s.replace(acorn.allLineBreaks,'\n');var out=[],idx=s.indexOf("\n");while(idx!==-1){out.push(s.substring(0,idx));s=s.substring(idx+1);idx=s.indexOf("\n")}if(s.length){out.push(s)}return out}function is_array(mode){return mode===MODE.ArrayLiteral}function is_expression(mode){return in_array(mode,[MODE.Expression,MODE.ForInitializer,MODE.Conditional])}function all_lines_start_with(lines,c){for(var i=0;i<lines.length;i++){var line=lines[i].trim();if(line.charAt(0)!==c){return false}}return true}function each_line_matches_indent(lines,indent){var i=0,len=lines.length,line;for(;i<len;i++){line=lines[i];if(line&&line.indexOf(indent)!==0){return false}}return true}function Beautifier(source_text,options){options=options||{};this._source_text=source_text||'';this._output=null;this._tokens=null;this._last_last_text=null;this._flags=null;this._previous_flags=null;this._flag_store=null;this._options=new Options(options)}Beautifier.prototype.create_flags=function(flags_base,mode){var next_indent_level=0;if(flags_base){next_indent_level=flags_base.indentation_level;if(!this._output.just_added_newline()&&flags_base.line_indent_level>next_indent_level){next_indent_level=flags_base.line_indent_level}}var next_flags={mode,parent:flags_base,last_token:flags_base?flags_base.last_token:new Token(TOKEN.START_BLOCK,''),last_word:flags_base?flags_base.last_word:'',declaration_statement:false,declaration_assignment:false,multiline_frame:false,inline_frame:false,if_block:false,else_block:false,class_start_block:false,do_block:false,do_while:false,import_block:false,in_case_statement:false,in_case:false,case_body:false,case_block:false,indentation_level:next_indent_level,alignment:0,line_indent_level:flags_base?flags_base.line_indent_level:next_indent_level,start_line_index:this._output.get_line_number(),ternary_depth:0};return next_flags};Beautifier.prototype._reset=function(source_text){var baseIndentString=source_text.match(/^[\t ]*/)[0];this._last_last_text='';this._output=new Output(this._options,baseIndentString);this._output.raw=this._options.test_output_raw;this._flag_store=[];this.set_mode(MODE.BlockStatement);var tokenizer=new Tokenizer(source_text,this._options);this._tokens=tokenizer.tokenize();return source_text};Beautifier.prototype.beautify=function(){if(this._options.disabled){return this._source_text}var sweet_code;var source_text=this._reset(this._source_text);var eol=this._options.eol;if(this._options.eol==='auto'){eol='\n';if(source_text&&acorn.lineBreak.test(source_text||'')){eol=source_text.match(acorn.lineBreak)[0]}}var current_token=this._tokens.next();while(current_token){this.handle_token(current_token);this._last_last_text=this._flags.last_token.text;this._flags.last_token=current_token;current_token=this._tokens.next()}sweet_code=this._output.get_code(eol);return sweet_code};Beautifier.prototype.handle_token=function(current_token,preserve_statement_flags){if(current_token.type===TOKEN.START_EXPR){this.handle_start_expr(current_token)}else if(current_token.type===TOKEN.END_EXPR){this.handle_end_expr(current_token)}else if(current_token.type===TOKEN.START_BLOCK){this.handle_start_block(current_token)}else if(current_token.type===TOKEN.END_BLOCK){this.handle_end_block(current_token)}else if(current_token.type===TOKEN.WORD){this.handle_word(current_token)}else if(current_token.type===TOKEN.RESERVED){this.handle_word(current_token)}else if(current_token.type===TOKEN.SEMICOLON){this.handle_semicolon(current_token)}else if(current_token.type===TOKEN.STRING){this.handle_string(current_token)}else if(current_token.type===TOKEN.EQUALS){this.handle_equals(current_token)}else if(current_token.type===TOKEN.OPERATOR){this.handle_operator(current_token)}else if(current_token.type===TOKEN.COMMA){this.handle_comma(current_token)}else if(current_token.type===TOKEN.BLOCK_COMMENT){this.handle_block_comment(current_token,preserve_statement_flags)}else if(current_token.type===TOKEN.COMMENT){this.handle_comment(current_token,preserve_statement_flags)}else if(current_token.type===TOKEN.DOT){this.handle_dot(current_token)}else if(current_token.type===TOKEN.EOF){this.handle_eof(current_token)}else if(current_token.type===TOKEN.UNKNOWN){this.handle_unknown(current_token,preserve_statement_flags)}else{this.handle_unknown(current_token,preserve_statement_flags)}};Beautifier.prototype.handle_whitespace_and_comments=function(current_token,preserve_statement_flags){var newlines=current_token.newlines;var keep_whitespace=this._options.keep_array_indentation&&is_array(this._flags.mode);if(current_token.comments_before){var comment_token=current_token.comments_before.next();while(comment_token){this.handle_whitespace_and_comments(comment_token,preserve_statement_flags);this.handle_token(comment_token,preserve_statement_flags);comment_token=current_token.comments_before.next()}}if(keep_whitespace){for(var i=0;i<newlines;i+=1){this.print_newline(i>0,preserve_statement_flags)}}else{if(this._options.max_preserve_newlines&&newlines>this._options.max_preserve_newlines){newlines=this._options.max_preserve_newlines}if(this._options.preserve_newlines){if(newlines>1){this.print_newline(false,preserve_statement_flags);for(var j=1;j<newlines;j+=1){this.print_newline(true,preserve_statement_flags)}}}}};var newline_restricted_tokens=['async','break','continue','return','throw','yield'];Beautifier.prototype.allow_wrap_or_preserved_newline=function(current_token,force_linewrap){force_linewrap=force_linewrap===undefined?false:force_linewrap;if(this._output.just_added_newline()){return}var shouldPreserveOrForce=this._options.preserve_newlines&&current_token.newlines||force_linewrap;var operatorLogicApplies=in_array(this._flags.last_token.text,positionable_operators)||in_array(current_token.text,positionable_operators);if(operatorLogicApplies){var shouldPrintOperatorNewline=in_array(this._flags.last_token.text,positionable_operators)&&in_array(this._options.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)||in_array(current_token.text,positionable_operators);shouldPreserveOrForce=shouldPreserveOrForce&&shouldPrintOperatorNewline}if(shouldPreserveOrForce){this.print_newline(false,true)}else if(this._options.wrap_line_length){if(reserved_array(this._flags.last_token,newline_restricted_tokens)){return}this._output.set_wrap_point()}};Beautifier.prototype.print_newline=function(force_newline,preserve_statement_flags){if(!preserve_statement_flags){if(this._flags.last_token.text!==';'&&this._flags.last_token.text!==','&&this._flags.last_token.text!=='='&&(this._flags.last_token.type!==TOKEN.OPERATOR||this._flags.last_token.text==='--'||this._flags.last_token.text==='++')){var next_token=this._tokens.peek();while(this._flags.mode===MODE.Statement&&!(this._flags.if_block&&reserved_word(next_token,'else'))&&!this._flags.do_block){this.restore_mode()}}}if(this._output.add_new_line(force_newline)){this._flags.multiline_frame=true}};Beautifier.prototype.print_token_line_indentation=function(current_token){if(this._output.just_added_newline()){if(this._options.keep_array_indentation&&current_token.newlines&&(current_token.text==='['||is_array(this._flags.mode))){this._output.current_line.set_indent(-1);this._output.current_line.push(current_token.whitespace_before);this._output.space_before_token=false}else if(this._output.set_indent(this._flags.indentation_level,this._flags.alignment)){this._flags.line_indent_level=this._flags.indentation_level}}};Beautifier.prototype.print_token=function(current_token){if(this._output.raw){this._output.add_raw_token(current_token);return}if(this._options.comma_first&&current_token.previous&&current_token.previous.type===TOKEN.COMMA&&this._output.just_added_newline()){if(this._output.previous_line.last()===','){var popped=this._output.previous_line.pop();if(this._output.previous_line.is_empty()){this._output.previous_line.push(popped);this._output.trim(true);this._output.current_line.pop();this._output.trim()}this.print_token_line_indentation(current_token);this._output.add_token(',');this._output.space_before_token=true}}this.print_token_line_indentation(current_token);this._output.non_breaking_space=true;this._output.add_token(current_token.text);if(this._output.previous_token_wrapped){this._flags.multiline_frame=true}};Beautifier.prototype.indent=function(){this._flags.indentation_level+=1;this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};Beautifier.prototype.deindent=function(){if(this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)){this._flags.indentation_level-=1;this._output.set_indent(this._flags.indentation_level,this._flags.alignment)}};Beautifier.prototype.set_mode=function(mode){if(this._flags){this._flag_store.push(this._flags);this._previous_flags=this._flags}else{this._previous_flags=this.create_flags(null,mode)}this._flags=this.create_flags(this._previous_flags,mode);this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};Beautifier.prototype.restore_mode=function(){if(this._flag_store.length>0){this._previous_flags=this._flags;this._flags=this._flag_store.pop();if(this._previous_flags.mode===MODE.Statement){remove_redundant_indentation(this._output,this._previous_flags)}this._output.set_indent(this._flags.indentation_level,this._flags.alignment)}};Beautifier.prototype.start_of_object_property=function(){return this._flags.parent.mode===MODE.ObjectLiteral&&this._flags.mode===MODE.Statement&&(this._flags.last_token.text===':'&&this._flags.ternary_depth===0||reserved_array(this._flags.last_token,['get','set']))};Beautifier.prototype.start_of_statement=function(current_token){var start=false;start=start||reserved_array(this._flags.last_token,['var','let','const'])&&current_token.type===TOKEN.WORD;start=start||reserved_word(this._flags.last_token,'do');start=start||!(this._flags.parent.mode===MODE.ObjectLiteral&&this._flags.mode===MODE.Statement)&&reserved_array(this._flags.last_token,newline_restricted_tokens)&&!current_token.newlines;start=start||reserved_word(this._flags.last_token,'else')&&!(reserved_word(current_token,'if')&&!current_token.comments_before);start=start||this._flags.last_token.type===TOKEN.END_EXPR&&(this._previous_flags.mode===MODE.ForInitializer||this._previous_flags.mode===MODE.Conditional);start=start||this._flags.last_token.type===TOKEN.WORD&&this._flags.mode===MODE.BlockStatement&&!this._flags.in_case&&!(current_token.text==='--'||current_token.text==='++')&&this._last_last_text!=='function'&&current_token.type!==TOKEN.WORD&&current_token.type!==TOKEN.RESERVED;start=start||this._flags.mode===MODE.ObjectLiteral&&(this._flags.last_token.text===':'&&this._flags.ternary_depth===0||reserved_array(this._flags.last_token,['get','set']));if(start){this.set_mode(MODE.Statement);this.indent();this.handle_whitespace_and_comments(current_token,true);if(!this.start_of_object_property()){this.allow_wrap_or_preserved_newline(current_token,reserved_array(current_token,['do','for','if','while']))}return true}return false};Beautifier.prototype.handle_start_expr=function(current_token){if(!this.start_of_statement(current_token)){this.handle_whitespace_and_comments(current_token)}var next_mode=MODE.Expression;if(current_token.text==='['){if(this._flags.last_token.type===TOKEN.WORD||this._flags.last_token.text===')'){if(reserved_array(this._flags.last_token,line_starters)){this._output.space_before_token=true}this.print_token(current_token);this.set_mode(next_mode);this.indent();if(this._options.space_in_paren){this._output.space_before_token=true}return}next_mode=MODE.ArrayLiteral;if(is_array(this._flags.mode)){if(this._flags.last_token.text==='['||this._flags.last_token.text===','&&(this._last_last_text===']'||this._last_last_text==='}')){if(!this._options.keep_array_indentation){this.print_newline()}}}if(!in_array(this._flags.last_token.type,[TOKEN.START_EXPR,TOKEN.END_EXPR,TOKEN.WORD,TOKEN.OPERATOR,TOKEN.DOT])){this._output.space_before_token=true}}else{if(this._flags.last_token.type===TOKEN.RESERVED){if(this._flags.last_token.text==='for'){this._output.space_before_token=this._options.space_before_conditional;next_mode=MODE.ForInitializer}else if(in_array(this._flags.last_token.text,['if','while','switch'])){this._output.space_before_token=this._options.space_before_conditional;next_mode=MODE.Conditional}else if(in_array(this._flags.last_word,['await','async'])){this._output.space_before_token=true}else if(this._flags.last_token.text==='import'&&current_token.whitespace_before===''){this._output.space_before_token=false}else if(in_array(this._flags.last_token.text,line_starters)||this._flags.last_token.text==='catch'){this._output.space_before_token=true}}else if(this._flags.last_token.type===TOKEN.EQUALS||this._flags.last_token.type===TOKEN.OPERATOR){if(!this.start_of_object_property()){this.allow_wrap_or_preserved_newline(current_token)}}else if(this._flags.last_token.type===TOKEN.WORD){this._output.space_before_token=false;var peek_back_two=this._tokens.peek(-3);if(this._options.space_after_named_function&&peek_back_two){var peek_back_three=this._tokens.peek(-4);if(reserved_array(peek_back_two,['async','function'])||peek_back_two.text==='*'&&reserved_array(peek_back_three,['async','function'])){this._output.space_before_token=true}else if(this._flags.mode===MODE.ObjectLiteral){if(peek_back_two.text==='{'||peek_back_two.text===','||peek_back_two.text==='*'&&(peek_back_three.text==='{'||peek_back_three.text===',')){this._output.space_before_token=true}}else if(this._flags.parent&&this._flags.parent.class_start_block){this._output.space_before_token=true}}}else{this.allow_wrap_or_preserved_newline(current_token)}if(this._flags.last_token.type===TOKEN.RESERVED&&(this._flags.last_word==='function'||this._flags.last_word==='typeof')||this._flags.last_token.text==='*'&&(in_array(this._last_last_text,['function','yield'])||this._flags.mode===MODE.ObjectLiteral&&in_array(this._last_last_text,['{',',']))){this._output.space_before_token=this._options.space_after_anon_function}}if(this._flags.last_token.text===';'||this._flags.last_token.type===TOKEN.START_BLOCK){this.print_newline()}else if(this._flags.last_token.type===TOKEN.END_EXPR||this._flags.last_token.type===TOKEN.START_EXPR||this._flags.last_token.type===TOKEN.END_BLOCK||this._flags.last_token.text==='.'||this._flags.last_token.type===TOKEN.COMMA){this.allow_wrap_or_preserved_newline(current_token,current_token.newlines)}this.print_token(current_token);this.set_mode(next_mode);if(this._options.space_in_paren){this._output.space_before_token=true}this.indent()};Beautifier.prototype.handle_end_expr=function(current_token){while(this._flags.mode===MODE.Statement){this.restore_mode()}this.handle_whitespace_and_comments(current_token);if(this._flags.multiline_frame){this.allow_wrap_or_preserved_newline(current_token,current_token.text===']'&&is_array(this._flags.mode)&&!this._options.keep_array_indentation)}if(this._options.space_in_paren){if(this._flags.last_token.type===TOKEN.START_EXPR&&!this._options.space_in_empty_paren){this._output.trim();this._output.space_before_token=false}else{this._output.space_before_token=true}}this.deindent();this.print_token(current_token);this.restore_mode();remove_redundant_indentation(this._output,this._previous_flags);if(this._flags.do_while&&this._previous_flags.mode===MODE.Conditional){this._previous_flags.mode=MODE.Expression;this._flags.do_block=false;this._flags.do_while=false}};Beautifier.prototype.handle_start_block=function(current_token){this.handle_whitespace_and_comments(current_token);var next_token=this._tokens.peek();var second_token=this._tokens.peek(1);if(this._flags.last_word==='switch'&&this._flags.last_token.type===TOKEN.END_EXPR){this.set_mode(MODE.BlockStatement);this._flags.in_case_statement=true}else if(this._flags.case_body){this.set_mode(MODE.BlockStatement)}else if(second_token&&(in_array(second_token.text,[':',','])&&in_array(next_token.type,[TOKEN.STRING,TOKEN.WORD,TOKEN.RESERVED])||in_array(next_token.text,['get','set','...'])&&in_array(second_token.type,[TOKEN.WORD,TOKEN.RESERVED]))){if(in_array(this._last_last_text,['class','interface'])&&!in_array(second_token.text,[':',','])){this.set_mode(MODE.BlockStatement)}else{this.set_mode(MODE.ObjectLiteral)}}else if(this._flags.last_token.type===TOKEN.OPERATOR&&this._flags.last_token.text==='=>'){this.set_mode(MODE.BlockStatement)}else if(in_array(this._flags.last_token.type,[TOKEN.EQUALS,TOKEN.START_EXPR,TOKEN.COMMA,TOKEN.OPERATOR])||reserved_array(this._flags.last_token,['return','throw','import','default'])){this.set_mode(MODE.ObjectLiteral)}else{this.set_mode(MODE.BlockStatement)}if(this._flags.last_token){if(reserved_array(this._flags.last_token.previous,['class','extends'])){this._flags.class_start_block=true}}var empty_braces=!next_token.comments_before&&next_token.text==='}';var empty_anonymous_function=empty_braces&&this._flags.last_word==='function'&&this._flags.last_token.type===TOKEN.END_EXPR;if(this._options.brace_preserve_inline){var index=0;var check_token=null;this._flags.inline_frame=true;do{index+=1;check_token=this._tokens.peek(index-1);if(check_token.newlines){this._flags.inline_frame=false;break}}while(check_token.type!==TOKEN.EOF&&!(check_token.type===TOKEN.END_BLOCK&&check_token.opened===current_token))}if((this._options.brace_style==="expand"||this._options.brace_style==="none"&&current_token.newlines)&&!this._flags.inline_frame){if(this._flags.last_token.type!==TOKEN.OPERATOR&&(empty_anonymous_function||this._flags.last_token.type===TOKEN.EQUALS||reserved_array(this._flags.last_token,special_words)&&this._flags.last_token.text!=='else')){this._output.space_before_token=true}else{this.print_newline(false,true)}}else{if(is_array(this._previous_flags.mode)&&(this._flags.last_token.type===TOKEN.START_EXPR||this._flags.last_token.type===TOKEN.COMMA)){if(this._flags.last_token.type===TOKEN.COMMA||this._options.space_in_paren){this._output.space_before_token=true}if(this._flags.last_token.type===TOKEN.COMMA||this._flags.last_token.type===TOKEN.START_EXPR&&this._flags.inline_frame){this.allow_wrap_or_preserved_newline(current_token);this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame;this._flags.multiline_frame=false}}if(this._flags.last_token.type!==TOKEN.OPERATOR&&this._flags.last_token.type!==TOKEN.START_EXPR){if(this._flags.last_token.type===TOKEN.START_BLOCK&&!this._flags.inline_frame){this.print_newline()}else{this._output.space_before_token=true}}}this.print_token(current_token);this.indent();if(!empty_braces&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)){this.print_newline()}};Beautifier.prototype.handle_end_block=function(current_token){this.handle_whitespace_and_comments(current_token);while(this._flags.mode===MODE.Statement){this.restore_mode()}var empty_braces=this._flags.last_token.type===TOKEN.START_BLOCK;if(this._flags.inline_frame&&!empty_braces){this._output.space_before_token=true}else if(this._options.brace_style==="expand"){if(!empty_braces){this.print_newline()}}else{if(!empty_braces){if(is_array(this._flags.mode)&&this._options.keep_array_indentation){this._options.keep_array_indentation=false;this.print_newline();this._options.keep_array_indentation=true}else{this.print_newline()}}}this.restore_mode();this.print_token(current_token)};Beautifier.prototype.handle_word=function(current_token){if(current_token.type===TOKEN.RESERVED){if(in_array(current_token.text,['set','get'])&&this._flags.mode!==MODE.ObjectLiteral){current_token.type=TOKEN.WORD}else if(current_token.text==='import'&&in_array(this._tokens.peek().text,['(','.'])){current_token.type=TOKEN.WORD}else if(in_array(current_token.text,['as','from'])&&!this._flags.import_block){current_token.type=TOKEN.WORD}else if(this._flags.mode===MODE.ObjectLiteral){var next_token=this._tokens.peek();if(next_token.text===':'){current_token.type=TOKEN.WORD}}}if(this.start_of_statement(current_token)){if(reserved_array(this._flags.last_token,['var','let','const'])&&current_token.type===TOKEN.WORD){this._flags.declaration_statement=true}}else if(current_token.newlines&&!is_expression(this._flags.mode)&&(this._flags.last_token.type!==TOKEN.OPERATOR||(this._flags.last_token.text==='--'||this._flags.last_token.text==='++'))&&this._flags.last_token.type!==TOKEN.EQUALS&&(this._options.preserve_newlines||!reserved_array(this._flags.last_token,['var','let','const','set','get']))){this.handle_whitespace_and_comments(current_token);this.print_newline()}else{this.handle_whitespace_and_comments(current_token)}if(this._flags.do_block&&!this._flags.do_while){if(reserved_word(current_token,'while')){this._output.space_before_token=true;this.print_token(current_token);this._output.space_before_token=true;this._flags.do_while=true;return}else{this.print_newline();this._flags.do_block=false}}if(this._flags.if_block){if(!this._flags.else_block&&reserved_word(current_token,'else')){this._flags.else_block=true}else{while(this._flags.mode===MODE.Statement){this.restore_mode()}this._flags.if_block=false;this._flags.else_block=false}}if(this._flags.in_case_statement&&reserved_array(current_token,['case','default'])){this.print_newline();if(!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)){this.deindent()}this._flags.case_body=false;this.print_token(current_token);this._flags.in_case=true;return}if(this._flags.last_token.type===TOKEN.COMMA||this._flags.last_token.type===TOKEN.START_EXPR||this._flags.last_token.type===TOKEN.EQUALS||this._flags.last_token.type===TOKEN.OPERATOR){if(!this.start_of_object_property()){this.allow_wrap_or_preserved_newline(current_token)}}if(reserved_word(current_token,'function')){if(in_array(this._flags.last_token.text,['}',';'])||this._output.just_added_newline()&&!(in_array(this._flags.last_token.text,['(','[','{',':','=',','])||this._flags.last_token.type===TOKEN.OPERATOR)){if(!this._output.just_added_blankline()&&!current_token.comments_before){this.print_newline();this.print_newline(true)}}if(this._flags.last_token.type===TOKEN.RESERVED||this._flags.last_token.type===TOKEN.WORD){if(reserved_array(this._flags.last_token,['get','set','new','export'])||reserved_array(this._flags.last_token,newline_restricted_tokens)){this._output.space_before_token=true}else if(reserved_word(this._flags.last_token,'default')&&this._last_last_text==='export'){this._output.space_before_token=true}else if(this._flags.last_token.text==='declare'){this._output.space_before_token=true}else{this.print_newline()}}else if(this._flags.last_token.type===TOKEN.OPERATOR||this._flags.last_token.text==='='){this._output.space_before_token=true}else if(!this._flags.multiline_frame&&(is_expression(this._flags.mode)||is_array(this._flags.mode)));else{this.print_newline()}this.print_token(current_token);this._flags.last_word=current_token.text;return}var prefix='NONE';if(this._flags.last_token.type===TOKEN.END_BLOCK){if(this._previous_flags.inline_frame){prefix='SPACE'}else if(!reserved_array(current_token,['else','catch','finally','from'])){prefix='NEWLINE'}else{if(this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&current_token.newlines){prefix='NEWLINE'}else{prefix='SPACE';this._output.space_before_token=true}}}else if(this._flags.last_token.type===TOKEN.SEMICOLON&&this._flags.mode===MODE.BlockStatement){prefix='NEWLINE'}else if(this._flags.last_token.type===TOKEN.SEMICOLON&&is_expression(this._flags.mode)){prefix='SPACE'}else if(this._flags.last_token.type===TOKEN.STRING){prefix='NEWLINE'}else if(this._flags.last_token.type===TOKEN.RESERVED||this._flags.last_token.type===TOKEN.WORD||this._flags.last_token.text==='*'&&(in_array(this._last_last_text,['function','yield'])||this._flags.mode===MODE.ObjectLiteral&&in_array(this._last_last_text,['{',',']))){prefix='SPACE'}else if(this._flags.last_token.type===TOKEN.START_BLOCK){if(this._flags.inline_frame){prefix='SPACE'}else{prefix='NEWLINE'}}else if(this._flags.last_token.type===TOKEN.END_EXPR){this._output.space_before_token=true;prefix='NEWLINE'}if(reserved_array(current_token,line_starters)&&this._flags.last_token.text!==')'){if(this._flags.inline_frame||this._flags.last_token.text==='else'||this._flags.last_token.text==='export'){prefix='SPACE'}else{prefix='NEWLINE'}}if(reserved_array(current_token,['else','catch','finally'])){if((!(this._flags.last_token.type===TOKEN.END_BLOCK&&this._previous_flags.mode===MODE.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&current_token.newlines)&&!this._flags.inline_frame){this.print_newline()}else{this._output.trim(true);var line=this._output.current_line;if(line.last()!=='}'){this.print_newline()}this._output.space_before_token=true}}else if(prefix==='NEWLINE'){if(reserved_array(this._flags.last_token,special_words)){this._output.space_before_token=true}else if(this._flags.last_token.text==='declare'&&reserved_array(current_token,['var','let','const'])){this._output.space_before_token=true}else if(this._flags.last_token.type!==TOKEN.END_EXPR){if((this._flags.last_token.type!==TOKEN.START_EXPR||!reserved_array(current_token,['var','let','const']))&&this._flags.last_token.text!==':'){if(reserved_word(current_token,'if')&&reserved_word(current_token.previous,'else')){this._output.space_before_token=true}else{this.print_newline()}}}else if(reserved_array(current_token,line_starters)&&this._flags.last_token.text!==')'){this.print_newline()}}else if(this._flags.multiline_frame&&is_array(this._flags.mode)&&this._flags.last_token.text===','&&this._last_last_text==='}'){this.print_newline()}else if(prefix==='SPACE'){this._output.space_before_token=true}if(current_token.previous&&(current_token.previous.type===TOKEN.WORD||current_token.previous.type===TOKEN.RESERVED)){this._output.space_before_token=true}this.print_token(current_token);this._flags.last_word=current_token.text;if(current_token.type===TOKEN.RESERVED){if(current_token.text==='do'){this._flags.do_block=true}else if(current_token.text==='if'){this._flags.if_block=true}else if(current_token.text==='import'){this._flags.import_block=true}else if(this._flags.import_block&&reserved_word(current_token,'from')){this._flags.import_block=false}}};Beautifier.prototype.handle_semicolon=function(current_token){if(this.start_of_statement(current_token)){this._output.space_before_token=false}else{this.handle_whitespace_and_comments(current_token)}var next_token=this._tokens.peek();while(this._flags.mode===MODE.Statement&&!(this._flags.if_block&&reserved_word(next_token,'else'))&&!this._flags.do_block){this.restore_mode()}if(this._flags.import_block){this._flags.import_block=false}this.print_token(current_token)};Beautifier.prototype.handle_string=function(current_token){if(current_token.text.startsWith("`")&&current_token.newlines===0&&current_token.whitespace_before===''&&(current_token.previous.text===')'||this._flags.last_token.type===TOKEN.WORD));else if(this.start_of_statement(current_token)){this._output.space_before_token=true}else{this.handle_whitespace_and_comments(current_token);if(this._flags.last_token.type===TOKEN.RESERVED||this._flags.last_token.type===TOKEN.WORD||this._flags.inline_frame){this._output.space_before_token=true}else if(this._flags.last_token.type===TOKEN.COMMA||this._flags.last_token.type===TOKEN.START_EXPR||this._flags.last_token.type===TOKEN.EQUALS||this._flags.last_token.type===TOKEN.OPERATOR){if(!this.start_of_object_property()){this.allow_wrap_or_preserved_newline(current_token)}}else if(current_token.text.startsWith("`")&&this._flags.last_token.type===TOKEN.END_EXPR&&(current_token.previous.text===']'||current_token.previous.text===')')&&current_token.newlines===0){this._output.space_before_token=true}else{this.print_newline()}}this.print_token(current_token)};Beautifier.prototype.handle_equals=function(current_token){if(this.start_of_statement(current_token));else{this.handle_whitespace_and_comments(current_token)}if(this._flags.declaration_statement){this._flags.declaration_assignment=true}this._output.space_before_token=true;this.print_token(current_token);this._output.space_before_token=true};Beautifier.prototype.handle_comma=function(current_token){this.handle_whitespace_and_comments(current_token,true);this.print_token(current_token);this._output.space_before_token=true;if(this._flags.declaration_statement){if(is_expression(this._flags.parent.mode)){this._flags.declaration_assignment=false}if(this._flags.declaration_assignment){this._flags.declaration_assignment=false;this.print_newline(false,true)}else if(this._options.comma_first){this.allow_wrap_or_preserved_newline(current_token)}}else if(this._flags.mode===MODE.ObjectLiteral||this._flags.mode===MODE.Statement&&this._flags.parent.mode===MODE.ObjectLiteral){if(this._flags.mode===MODE.Statement){this.restore_mode()}if(!this._flags.inline_frame){this.print_newline()}}else if(this._options.comma_first){this.allow_wrap_or_preserved_newline(current_token)}};Beautifier.prototype.handle_operator=function(current_token){var isGeneratorAsterisk=current_token.text==='*'&&(reserved_array(this._flags.last_token,['function','yield'])||in_array(this._flags.last_token.type,[TOKEN.START_BLOCK,TOKEN.COMMA,TOKEN.END_BLOCK,TOKEN.SEMICOLON]));var isUnary=in_array(current_token.text,['-','+'])&&(in_array(this._flags.last_token.type,[TOKEN.START_BLOCK,TOKEN.START_EXPR,TOKEN.EQUALS,TOKEN.OPERATOR])||in_array(this._flags.last_token.text,line_starters)||this._flags.last_token.text===',');if(this.start_of_statement(current_token));else{var preserve_statement_flags=!isGeneratorAsterisk;this.handle_whitespace_and_comments(current_token,preserve_statement_flags)}if(current_token.text==='*'&&this._flags.last_token.type===TOKEN.DOT){this.print_token(current_token);return}if(current_token.text==='::'){this.print_token(current_token);return}if(this._flags.last_token.type===TOKEN.OPERATOR&&in_array(this._options.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)){this.allow_wrap_or_preserved_newline(current_token)}if(current_token.text===':'&&this._flags.in_case){this.print_token(current_token);this._flags.in_case=false;this._flags.case_body=true;if(this._tokens.peek().type!==TOKEN.START_BLOCK){this.indent();this.print_newline();this._flags.case_block=false}else{this._flags.case_block=true;this._output.space_before_token=true}return}var space_before=true;var space_after=true;var in_ternary=false;if(current_token.text===':'){if(this._flags.ternary_depth===0){space_before=false}else{this._flags.ternary_depth-=1;in_ternary=true}}else if(current_token.text==='?'){this._flags.ternary_depth+=1}if(!isUnary&&!isGeneratorAsterisk&&this._options.preserve_newlines&&in_array(current_token.text,positionable_operators)){var isColon=current_token.text===':';var isTernaryColon=isColon&&in_ternary;var isOtherColon=isColon&&!in_ternary;switch(this._options.operator_position){case OPERATOR_POSITION.before_newline:this._output.space_before_token=!isOtherColon;this.print_token(current_token);if(!isColon||isTernaryColon){this.allow_wrap_or_preserved_newline(current_token)}this._output.space_before_token=true;return;case OPERATOR_POSITION.after_newline:this._output.space_before_token=true;if(!isColon||isTernaryColon){if(this._tokens.peek().newlines){this.print_newline(false,true)}else{this.allow_wrap_or_preserved_newline(current_token)}}else{this._output.space_before_token=false}this.print_token(current_token);this._output.space_before_token=true;return;case OPERATOR_POSITION.preserve_newline:if(!isOtherColon){this.allow_wrap_or_preserved_newline(current_token)}space_before=!(this._output.just_added_newline()||isOtherColon);this._output.space_before_token=space_before;this.print_token(current_token);this._output.space_before_token=true;return}}if(isGeneratorAsterisk){this.allow_wrap_or_preserved_newline(current_token);space_before=false;var next_token=this._tokens.peek();space_after=next_token&&in_array(next_token.type,[TOKEN.WORD,TOKEN.RESERVED])}else if(current_token.text==='...'){this.allow_wrap_or_preserved_newline(current_token);space_before=this._flags.last_token.type===TOKEN.START_BLOCK;space_after=false}else if(in_array(current_token.text,['--','++','!','~'])||isUnary){if(this._flags.last_token.type===TOKEN.COMMA||this._flags.last_token.type===TOKEN.START_EXPR){this.allow_wrap_or_preserved_newline(current_token)}space_before=false;space_after=false;if(current_token.newlines&&(current_token.text==='--'||current_token.text==='++'||current_token.text==='~')){var new_line_needed=reserved_array(this._flags.last_token,special_words)&&current_token.newlines;if(new_line_needed&&(this._previous_flags.if_block||this._previous_flags.else_block)){this.restore_mode()}this.print_newline(new_line_needed,true)}if(this._flags.last_token.text===';'&&is_expression(this._flags.mode)){space_before=true}if(this._flags.last_token.type===TOKEN.RESERVED){space_before=true}else if(this._flags.last_token.type===TOKEN.END_EXPR){space_before=!(this._flags.last_token.text===']'&&(current_token.text==='--'||current_token.text==='++'))}else if(this._flags.last_token.type===TOKEN.OPERATOR){space_before=in_array(current_token.text,['--','-','++','+'])&&in_array(this._flags.last_token.text,['--','-','++','+']);if(in_array(current_token.text,['+','-'])&&in_array(this._flags.last_token.text,['--','++'])){space_after=true}}if((this._flags.mode===MODE.BlockStatement&&!this._flags.inline_frame||this._flags.mode===MODE.Statement)&&(this._flags.last_token.text==='{'||this._flags.last_token.text===';')){this.print_newline()}}this._output.space_before_token=this._output.space_before_token||space_before;this.print_token(current_token);this._output.space_before_token=space_after};Beautifier.prototype.handle_block_comment=function(current_token,preserve_statement_flags){if(this._output.raw){this._output.add_raw_token(current_token);if(current_token.directives&&current_token.directives.preserve==='end'){this._output.raw=this._options.test_output_raw}return}if(current_token.directives){this.print_newline(false,preserve_statement_flags);this.print_token(current_token);if(current_token.directives.preserve==='start'){this._output.raw=true}this.print_newline(false,true);return}if(!acorn.newline.test(current_token.text)&&!current_token.newlines){this._output.space_before_token=true;this.print_token(current_token);this._output.space_before_token=true;return}else{this.print_block_commment(current_token,preserve_statement_flags)}};Beautifier.prototype.print_block_commment=function(current_token,preserve_statement_flags){var lines=split_linebreaks(current_token.text);var j;var javadoc=false;var starless=false;var lastIndent=current_token.whitespace_before;var lastIndentLength=lastIndent.length;this.print_newline(false,preserve_statement_flags);this.print_token_line_indentation(current_token);this._output.add_token(lines[0]);this.print_newline(false,preserve_statement_flags);if(lines.length>1){lines=lines.slice(1);javadoc=all_lines_start_with(lines,'*');starless=each_line_matches_indent(lines,lastIndent);if(javadoc){this._flags.alignment=1}for(j=0;j<lines.length;j++){if(javadoc){this.print_token_line_indentation(current_token);this._output.add_token(ltrim(lines[j]))}else if(starless&&lines[j]){this.print_token_line_indentation(current_token);this._output.add_token(lines[j].substring(lastIndentLength))}else{this._output.current_line.set_indent(-1);this._output.add_token(lines[j])}this.print_newline(false,preserve_statement_flags)}this._flags.alignment=0}};Beautifier.prototype.handle_comment=function(current_token,preserve_statement_flags){if(current_token.newlines){this.print_newline(false,preserve_statement_flags)}else{this._output.trim(true)}this._output.space_before_token=true;this.print_token(current_token);this.print_newline(false,preserve_statement_flags)};Beautifier.prototype.handle_dot=function(current_token){if(this.start_of_statement(current_token));else{this.handle_whitespace_and_comments(current_token,true)}if(this._flags.last_token.text.match('^[0-9]+$')){this._output.space_before_token=true}if(reserved_array(this._flags.last_token,special_words)){this._output.space_before_token=false}else{this.allow_wrap_or_preserved_newline(current_token,this._flags.last_token.text===')'&&this._options.break_chained_methods)}if(this._options.unindent_chained_methods&&this._output.just_added_newline()){this.deindent()}this.print_token(current_token)};Beautifier.prototype.handle_unknown=function(current_token,preserve_statement_flags){this.print_token(current_token);if(current_token.text[current_token.text.length-1]==='\n'){this.print_newline(false,preserve_statement_flags)}};Beautifier.prototype.handle_eof=function(current_token){while(this._flags.mode===MODE.Statement){this.restore_mode()}this.handle_whitespace_and_comments(current_token)};beautifier$2.Beautifier=Beautifier;return beautifier$2}var hasRequiredJavascript;function requireJavascript(){if(hasRequiredJavascript)return javascriptExports;hasRequiredJavascript=1;var Beautifier=requireBeautifier$2().Beautifier,Options=requireOptions$2().Options;function js_beautify(js_source_text,options){var beautifier=new Beautifier(js_source_text,options);return beautifier.beautify()}javascript.exports=js_beautify;javascriptExports.defaultOptions=function(){return new Options};return javascriptExports}var cssExports={};var css={get exports(){return cssExports},set exports(v){cssExports=v}};var beautifier$1={};var options$1={};var hasRequiredOptions$1;function requireOptions$1(){if(hasRequiredOptions$1)return options$1;hasRequiredOptions$1=1;var BaseOptions=requireOptions$3().Options;function Options(options){BaseOptions.call(this,options,'css');this.selector_separator_newline=this._get_boolean('selector_separator_newline',true);this.newline_between_rules=this._get_boolean('newline_between_rules',true);var space_around_selector_separator=this._get_boolean('space_around_selector_separator');this.space_around_combinator=this._get_boolean('space_around_combinator')||space_around_selector_separator;var brace_style_split=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_style='collapse';for(var bs=0;bs<brace_style_split.length;bs++){if(brace_style_split[bs]!=='expand'){this.brace_style='collapse'}else{this.brace_style=brace_style_split[bs]}}}Options.prototype=new BaseOptions;options$1.Options=Options;return options$1}var hasRequiredBeautifier$1;function requireBeautifier$1(){if(hasRequiredBeautifier$1)return beautifier$1;hasRequiredBeautifier$1=1;var Options=requireOptions$1().Options;var Output=requireOutput().Output;var InputScanner=requireInputscanner().InputScanner;var Directives=requireDirectives().Directives;var directives_core=new Directives(/\/\*/,/\*\//);var lineBreak=/\r\n|[\r\n]/;var allLineBreaks=/\r\n|[\r\n]/g;var whitespaceChar=/\s/;var whitespacePattern=/(?:\s|\n)+/g;var block_comment_pattern=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g;var comment_pattern=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Beautifier(source_text,options){this._source_text=source_text||'';this._options=new Options(options);this._ch=null;this._input=null;this.NESTED_AT_RULE={"@page":true,"@font-face":true,"@keyframes":true,"@media":true,"@supports":true,"@document":true};this.CONDITIONAL_GROUP_RULE={"@media":true,"@supports":true,"@document":true};this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}Beautifier.prototype.eatString=function(endChars){var result='';this._ch=this._input.next();while(this._ch){result+=this._ch;if(this._ch==="\\"){result+=this._input.next()}else if(endChars.indexOf(this._ch)!==-1||this._ch==="\n"){break}this._ch=this._input.next()}return result};Beautifier.prototype.eatWhitespace=function(allowAtLeastOneNewLine){var result=whitespaceChar.test(this._input.peek());var newline_count=0;while(whitespaceChar.test(this._input.peek())){this._ch=this._input.next();if(allowAtLeastOneNewLine&&this._ch==='\n'){if(newline_count===0||newline_count<this._options.max_preserve_newlines){newline_count++;this._output.add_new_line(true)}}}return result};Beautifier.prototype.foundNestedPseudoClass=function(){var openParen=0;var i=1;var ch=this._input.peek(i);while(ch){if(ch==="{"){return true}else if(ch==='('){openParen+=1}else if(ch===')'){if(openParen===0){return false}openParen-=1}else if(ch===";"||ch==="}"){return false}i++;ch=this._input.peek(i)}return false};Beautifier.prototype.print_string=function(output_string){this._output.set_indent(this._indentLevel);this._output.non_breaking_space=true;this._output.add_token(output_string)};Beautifier.prototype.preserveSingleSpace=function(isAfterSpace){if(isAfterSpace){this._output.space_before_token=true}};Beautifier.prototype.indent=function(){this._indentLevel++};Beautifier.prototype.outdent=function(){if(this._indentLevel>0){this._indentLevel--}};Beautifier.prototype.beautify=function(){if(this._options.disabled){return this._source_text}var source_text=this._source_text;var eol=this._options.eol;if(eol==='auto'){eol='\n';if(source_text&&lineBreak.test(source_text||'')){eol=source_text.match(lineBreak)[0]}}source_text=source_text.replace(allLineBreaks,'\n');var baseIndentString=source_text.match(/^[\t ]*/)[0];this._output=new Output(this._options,baseIndentString);this._input=new InputScanner(source_text);this._indentLevel=0;this._nestedLevel=0;this._ch=null;var parenLevel=0;var insideRule=false;var insidePropertyValue=false;var enteringConditionalGroup=false;var insideAtExtend=false;var insideAtImport=false;var insideScssMap=false;var topCharacter=this._ch;var insideNonSemiColonValues=false;var whitespace;var isAfterSpace;var previous_ch;while(true){whitespace=this._input.read(whitespacePattern);isAfterSpace=whitespace!=='';previous_ch=topCharacter;this._ch=this._input.next();if(this._ch==='\\'&&this._input.hasNext()){this._ch+=this._input.next()}topCharacter=this._ch;if(!this._ch){break}else if(this._ch==='/'&&this._input.peek()==='*'){this._output.add_new_line();this._input.back();var comment=this._input.read(block_comment_pattern);var directives=directives_core.get_directives(comment);if(directives&&directives.ignore==='start'){comment+=directives_core.readIgnored(this._input)}this.print_string(comment);this.eatWhitespace(true);this._output.add_new_line()}else if(this._ch==='/'&&this._input.peek()==='/'){this._output.space_before_token=true;this._input.back();this.print_string(this._input.read(comment_pattern));this.eatWhitespace(true)}else if(this._ch==='@'||this._ch==='$'){this.preserveSingleSpace(isAfterSpace);if(this._input.peek()==='{'){this.print_string(this._ch+this.eatString('}'))}else{this.print_string(this._ch);var variableOrRule=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);if(variableOrRule.match(/[ :]$/)){variableOrRule=this.eatString(": ").replace(/\s$/,'');this.print_string(variableOrRule);this._output.space_before_token=true}variableOrRule=variableOrRule.replace(/\s$/,'');if(variableOrRule==='extend'){insideAtExtend=true}else if(variableOrRule==='import'){insideAtImport=true}if(variableOrRule in this.NESTED_AT_RULE){this._nestedLevel+=1;if(variableOrRule in this.CONDITIONAL_GROUP_RULE){enteringConditionalGroup=true}}else if(!insideRule&&parenLevel===0&&variableOrRule.indexOf(':')!==-1){insidePropertyValue=true;this.indent()}}}else if(this._ch==='#'&&this._input.peek()==='{'){this.preserveSingleSpace(isAfterSpace);this.print_string(this._ch+this.eatString('}'))}else if(this._ch==='{'){if(insidePropertyValue){insidePropertyValue=false;this.outdent()}if(enteringConditionalGroup){enteringConditionalGroup=false;insideRule=this._indentLevel>=this._nestedLevel}else{insideRule=this._indentLevel>=this._nestedLevel-1}if(this._options.newline_between_rules&&insideRule){if(this._output.previous_line&&this._output.previous_line.item(-1)!=='{'){this._output.ensure_empty_line_above('/',',')}}this._output.space_before_token=true;if(this._options.brace_style==='expand'){this._output.add_new_line();this.print_string(this._ch);this.indent();this._output.set_indent(this._indentLevel)}else{if(previous_ch==='('){this._output.space_before_token=false}else if(previous_ch!==','){this.indent()}this.print_string(this._ch)}this.eatWhitespace(true);this._output.add_new_line()}else if(this._ch==='}'){this.outdent();this._output.add_new_line();if(previous_ch==='{'){this._output.trim(true)}insideAtImport=false;insideAtExtend=false;if(insidePropertyValue){this.outdent();insidePropertyValue=false}this.print_string(this._ch);insideRule=false;if(this._nestedLevel){this._nestedLevel--}this.eatWhitespace(true);this._output.add_new_line();if(this._options.newline_between_rules&&!this._output.just_added_blankline()){if(this._input.peek()!=='}'){this._output.add_new_line(true)}}if(this._input.peek()===')'){this._output.trim(true);if(this._options.brace_style==="expand"){this._output.add_new_line(true)}}}else if(this._ch===":"){for(var i=0;i<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;i++){if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[i])){insideNonSemiColonValues=true;break}}if((insideRule||enteringConditionalGroup)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!insideAtExtend&&parenLevel===0){this.print_string(':');if(!insidePropertyValue){insidePropertyValue=true;this._output.space_before_token=true;this.eatWhitespace(true);this.indent()}}else{if(this._input.lookBack(" ")){this._output.space_before_token=true}if(this._input.peek()===":"){this._ch=this._input.next();this.print_string("::")}else{this.print_string(':')}}}else if(this._ch==='"'||this._ch==='\''){var preserveQuoteSpace=previous_ch==='"'||previous_ch==='\'';this.preserveSingleSpace(preserveQuoteSpace||isAfterSpace);this.print_string(this._ch+this.eatString(this._ch));this.eatWhitespace(true)}else if(this._ch===';'){insideNonSemiColonValues=false;if(parenLevel===0){if(insidePropertyValue){this.outdent();insidePropertyValue=false}insideAtExtend=false;insideAtImport=false;this.print_string(this._ch);this.eatWhitespace(true);if(this._input.peek()!=='/'){this._output.add_new_line()}}else{this.print_string(this._ch);this.eatWhitespace(true);this._output.space_before_token=true}}else if(this._ch==='('){if(this._input.lookBack("url")){this.print_string(this._ch);this.eatWhitespace();parenLevel++;this.indent();this._ch=this._input.next();if(this._ch===')'||this._ch==='"'||this._ch==='\''){this._input.back()}else if(this._ch){this.print_string(this._ch+this.eatString(')'));if(parenLevel){parenLevel--;this.outdent()}}}else{var space_needed=false;if(this._input.lookBack("with")){space_needed=true}this.preserveSingleSpace(isAfterSpace||space_needed);this.print_string(this._ch);if(insidePropertyValue&&previous_ch==="$"&&this._options.selector_separator_newline){this._output.add_new_line();insideScssMap=true}else{this.eatWhitespace();parenLevel++;this.indent()}}}else if(this._ch===')'){if(parenLevel){parenLevel--;this.outdent()}if(insideScssMap&&this._input.peek()===";"&&this._options.selector_separator_newline){insideScssMap=false;this.outdent();this._output.add_new_line()}this.print_string(this._ch)}else if(this._ch===','){this.print_string(this._ch);this.eatWhitespace(true);if(this._options.selector_separator_newline&&(!insidePropertyValue||insideScssMap)&&parenLevel===0&&!insideAtImport&&!insideAtExtend){this._output.add_new_line()}else{this._output.space_before_token=true}}else if((this._ch==='>'||this._ch==='+'||this._ch==='~')&&!insidePropertyValue&&parenLevel===0){if(this._options.space_around_combinator){this._output.space_before_token=true;this.print_string(this._ch);this._output.space_before_token=true}else{this.print_string(this._ch);this.eatWhitespace();if(this._ch&&whitespaceChar.test(this._ch)){this._ch=''}}}else if(this._ch===']'){this.print_string(this._ch)}else if(this._ch==='['){this.preserveSingleSpace(isAfterSpace);this.print_string(this._ch)}else if(this._ch==='='){this.eatWhitespace();this.print_string('=');if(whitespaceChar.test(this._ch)){this._ch=''}}else if(this._ch==='!'&&!this._input.lookBack("\\")){this._output.space_before_token=true;this.print_string(this._ch)}else{var preserveAfterSpace=previous_ch==='"'||previous_ch==='\'';this.preserveSingleSpace(preserveAfterSpace||isAfterSpace);this.print_string(this._ch);if(!this._output.just_added_newline()&&this._input.peek()==='\n'&&insideNonSemiColonValues){this._output.add_new_line()}}}var sweetCode=this._output.get_code(eol);return sweetCode};beautifier$1.Beautifier=Beautifier;return beautifier$1}var hasRequiredCss;function requireCss(){if(hasRequiredCss)return cssExports;hasRequiredCss=1;var Beautifier=requireBeautifier$1().Beautifier,Options=requireOptions$1().Options;function css_beautify(source_text,options){var beautifier=new Beautifier(source_text,options);return beautifier.beautify()}css.exports=css_beautify;cssExports.defaultOptions=function(){return new Options};return cssExports}var htmlExports={};var html={get exports(){return htmlExports},set exports(v){htmlExports=v}};var beautifier={};var options={};var hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options;hasRequiredOptions=1;var BaseOptions=requireOptions$3().Options;function Options(options){BaseOptions.call(this,options,'html');if(this.templating.length===1&&this.templating[0]==='auto'){this.templating=['django','erb','handlebars','php']}this.indent_inner_html=this._get_boolean('indent_inner_html');this.indent_body_inner_html=this._get_boolean('indent_body_inner_html',true);this.indent_head_inner_html=this._get_boolean('indent_head_inner_html',true);this.indent_handlebars=this._get_boolean('indent_handlebars',true);this.wrap_attributes=this._get_selection('wrap_attributes',['auto','force','force-aligned','force-expand-multiline','aligned-multiple','preserve','preserve-aligned']);this.wrap_attributes_indent_size=this._get_number('wrap_attributes_indent_size',this.indent_size);this.extra_liners=this._get_array('extra_liners',['head','body','/html']);this.inline=this._get_array('inline',['a','abbr','area','audio','b','bdi','bdo','br','button','canvas','cite','code','data','datalist','del','dfn','em','embed','i','iframe','img','input','ins','kbd','keygen','label','map','mark','math','meter','noscript','object','output','progress','q','ruby','s','samp','select','small','span','strong','sub','sup','svg','template','textarea','time','u','var','video','wbr','text','acronym','big','strike','tt']);this.void_elements=this._get_array('void_elements',['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr','!doctype','?xml','basefont','isindex']);this.unformatted=this._get_array('unformatted',[]);this.content_unformatted=this._get_array('content_unformatted',['pre','textarea']);this.unformatted_content_delimiter=this._get_characters('unformatted_content_delimiter');this.indent_scripts=this._get_selection('indent_scripts',['normal','keep','separate'])}Options.prototype=new BaseOptions;options.Options=Options;return options}var tokenizer={};var hasRequiredTokenizer;function requireTokenizer(){if(hasRequiredTokenizer)return tokenizer;hasRequiredTokenizer=1;var BaseTokenizer=requireTokenizer$2().Tokenizer;var BASETOKEN=requireTokenizer$2().TOKEN;var Directives=requireDirectives().Directives;var TemplatablePattern=requireTemplatablepattern().TemplatablePattern;var Pattern=requirePattern().Pattern;var TOKEN={TAG_OPEN:'TK_TAG_OPEN',TAG_CLOSE:'TK_TAG_CLOSE',ATTRIBUTE:'TK_ATTRIBUTE',EQUALS:'TK_EQUALS',VALUE:'TK_VALUE',COMMENT:'TK_COMMENT',TEXT:'TK_TEXT',UNKNOWN:'TK_UNKNOWN',START:BASETOKEN.START,RAW:BASETOKEN.RAW,EOF:BASETOKEN.EOF};var directives_core=new Directives(/<\!--/,/-->/);var Tokenizer=function(input_string,options){BaseTokenizer.call(this,input_string,options);this._current_tag_name='';var templatable_reader=new TemplatablePattern(this._input).read_options(this._options);var pattern_reader=new Pattern(this._input);this.__patterns={word:templatable_reader.until(/[\n\r\t <]/),single_quote:templatable_reader.until_after(/'/),double_quote:templatable_reader.until_after(/"/),attribute:templatable_reader.until(/[\n\r\t =>]|\/>/),element_name:templatable_reader.until(/[\n\r\t >\/]/),handlebars_comment:pattern_reader.starting_with(/{{!--/).until_after(/--}}/),handlebars:pattern_reader.starting_with(/{{/).until_after(/}}/),handlebars_open:pattern_reader.until(/[\n\r\t }]/),handlebars_raw_close:pattern_reader.until(/}}/),comment:pattern_reader.starting_with(/<!--/).until_after(/-->/),cdata:pattern_reader.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:pattern_reader.starting_with(/<!\[/).until_after(/]>/),processing:pattern_reader.starting_with(/<\?/).until_after(/\?>/)};if(this._options.indent_handlebars){this.__patterns.word=this.__patterns.word.exclude('handlebars')}this._unformatted_content_delimiter=null;if(this._options.unformatted_content_delimiter){var literal_regexp=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=pattern_reader.matching(literal_regexp).until_after(literal_regexp)}};Tokenizer.prototype=new BaseTokenizer;Tokenizer.prototype._is_comment=function(current_token){return false};Tokenizer.prototype._is_opening=function(current_token){return current_token.type===TOKEN.TAG_OPEN};Tokenizer.prototype._is_closing=function(current_token,open_token){return current_token.type===TOKEN.TAG_CLOSE&&(open_token&&((current_token.text==='>'||current_token.text==='/>')&&open_token.text[0]==='<'||current_token.text==='}}'&&open_token.text[0]==='{'&&open_token.text[1]==='{'))};Tokenizer.prototype._reset=function(){this._current_tag_name=''};Tokenizer.prototype._get_next_token=function(previous_token,open_token){var token=null;this._readWhitespace();var c=this._input.peek();if(c===null){return this._create_token(TOKEN.EOF,'')}token=token||this._read_open_handlebars(c,open_token);token=token||this._read_attribute(c,previous_token,open_token);token=token||this._read_close(c,open_token);token=token||this._read_raw_content(c,previous_token,open_token);token=token||this._read_content_word(c);token=token||this._read_comment_or_cdata(c);token=token||this._read_processing(c);token=token||this._read_open(c,open_token);token=token||this._create_token(TOKEN.UNKNOWN,this._input.next());return token};Tokenizer.prototype._read_comment_or_cdata=function(c){var token=null;var resulting_string=null;var directives=null;if(c==='<'){var peek1=this._input.peek(1);if(peek1==='!'){resulting_string=this.__patterns.comment.read();if(resulting_string){directives=directives_core.get_directives(resulting_string);if(directives&&directives.ignore==='start'){resulting_string+=directives_core.readIgnored(this._input)}}else{resulting_string=this.__patterns.cdata.read()}}if(resulting_string){token=this._create_token(TOKEN.COMMENT,resulting_string);token.directives=directives}}return token};Tokenizer.prototype._read_processing=function(c){var token=null;var resulting_string=null;var directives=null;if(c==='<'){var peek1=this._input.peek(1);if(peek1==='!'||peek1==='?'){resulting_string=this.__patterns.conditional_comment.read();resulting_string=resulting_string||this.__patterns.processing.read()}if(resulting_string){token=this._create_token(TOKEN.COMMENT,resulting_string);token.directives=directives}}return token};Tokenizer.prototype._read_open=function(c,open_token){var resulting_string=null;var token=null;if(!open_token){if(c==='<'){resulting_string=this._input.next();if(this._input.peek()==='/'){resulting_string+=this._input.next()}resulting_string+=this.__patterns.element_name.read();token=this._create_token(TOKEN.TAG_OPEN,resulting_string)}}return token};Tokenizer.prototype._read_open_handlebars=function(c,open_token){var resulting_string=null;var token=null;if(!open_token){if(this._options.indent_handlebars&&c==='{'&&this._input.peek(1)==='{'){if(this._input.peek(2)==='!'){resulting_string=this.__patterns.handlebars_comment.read();resulting_string=resulting_string||this.__patterns.handlebars.read();token=this._create_token(TOKEN.COMMENT,resulting_string)}else{resulting_string=this.__patterns.handlebars_open.read();token=this._create_token(TOKEN.TAG_OPEN,resulting_string)}}}return token};Tokenizer.prototype._read_close=function(c,open_token){var resulting_string=null;var token=null;if(open_token){if(open_token.text[0]==='<'&&(c==='>'||c==='/'&&this._input.peek(1)==='>')){resulting_string=this._input.next();if(c==='/'){resulting_string+=this._input.next()}token=this._create_token(TOKEN.TAG_CLOSE,resulting_string)}else if(open_token.text[0]==='{'&&c==='}'&&this._input.peek(1)==='}'){this._input.next();this._input.next();token=this._create_token(TOKEN.TAG_CLOSE,'}}')}}return token};Tokenizer.prototype._read_attribute=function(c,previous_token,open_token){var token=null;var resulting_string='';if(open_token&&open_token.text[0]==='<'){if(c==='='){token=this._create_token(TOKEN.EQUALS,this._input.next())}else if(c==='"'||c==="'"){var content=this._input.next();if(c==='"'){content+=this.__patterns.double_quote.read()}else{content+=this.__patterns.single_quote.read()}token=this._create_token(TOKEN.VALUE,content)}else{resulting_string=this.__patterns.attribute.read();if(resulting_string){if(previous_token.type===TOKEN.EQUALS){token=this._create_token(TOKEN.VALUE,resulting_string)}else{token=this._create_token(TOKEN.ATTRIBUTE,resulting_string)}}}}return token};Tokenizer.prototype._is_content_unformatted=function(tag_name){return this._options.void_elements.indexOf(tag_name)===-1&&(this._options.content_unformatted.indexOf(tag_name)!==-1||this._options.unformatted.indexOf(tag_name)!==-1)};Tokenizer.prototype._read_raw_content=function(c,previous_token,open_token){var resulting_string='';if(open_token&&open_token.text[0]==='{'){resulting_string=this.__patterns.handlebars_raw_close.read()}else if(previous_token.type===TOKEN.TAG_CLOSE&&previous_token.opened.text[0]==='<'&&previous_token.text[0]!=='/'){var tag_name=previous_token.opened.text.substr(1).toLowerCase();if(tag_name==='script'||tag_name==='style'){var token=this._read_comment_or_cdata(c);if(token){token.type=TOKEN.TEXT;return token}resulting_string=this._input.readUntil(new RegExp('</'+tag_name+'[\\n\\r\\t ]*?>','ig'))}else if(this._is_content_unformatted(tag_name)){resulting_string=this._input.readUntil(new RegExp('</'+tag_name+'[\\n\\r\\t ]*?>','ig'))}}if(resulting_string){return this._create_token(TOKEN.TEXT,resulting_string)}return null};Tokenizer.prototype._read_content_word=function(c){var resulting_string='';if(this._options.unformatted_content_delimiter){if(c===this._options.unformatted_content_delimiter[0]){resulting_string=this.__patterns.unformatted_content_delimiter.read()}}if(!resulting_string){resulting_string=this.__patterns.word.read()}if(resulting_string){return this._create_token(TOKEN.TEXT,resulting_string)}};tokenizer.Tokenizer=Tokenizer;tokenizer.TOKEN=TOKEN;return tokenizer}var hasRequiredBeautifier;function requireBeautifier(){if(hasRequiredBeautifier)return beautifier;hasRequiredBeautifier=1;var Options=requireOptions().Options;var Output=requireOutput().Output;var Tokenizer=requireTokenizer().Tokenizer;var TOKEN=requireTokenizer().TOKEN;var lineBreak=/\r\n|[\r\n]/;var allLineBreaks=/\r\n|[\r\n]/g;var Printer=function(options,base_indent_string){this.indent_level=0;this.alignment_size=0;this.max_preserve_newlines=options.max_preserve_newlines;this.preserve_newlines=options.preserve_newlines;this._output=new Output(options,base_indent_string)};Printer.prototype.current_line_has_match=function(pattern){return this._output.current_line.has_match(pattern)};Printer.prototype.set_space_before_token=function(value,non_breaking){this._output.space_before_token=value;this._output.non_breaking_space=non_breaking};Printer.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size);this._output.set_wrap_point()};Printer.prototype.add_raw_token=function(token){this._output.add_raw_token(token)};Printer.prototype.print_preserved_newlines=function(raw_token){var newlines=0;if(raw_token.type!==TOKEN.TEXT&&raw_token.previous.type!==TOKEN.TEXT){newlines=raw_token.newlines?1:0}if(this.preserve_newlines){newlines=raw_token.newlines<this.max_preserve_newlines+1?raw_token.newlines:this.max_preserve_newlines+1}for(var n=0;n<newlines;n++){this.print_newline(n>0)}return newlines!==0};Printer.prototype.traverse_whitespace=function(raw_token){if(raw_token.whitespace_before||raw_token.newlines){if(!this.print_preserved_newlines(raw_token)){this._output.space_before_token=true}return true}return false};Printer.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};Printer.prototype.print_newline=function(force){this._output.add_new_line(force)};Printer.prototype.print_token=function(token){if(token.text){this._output.set_indent(this.indent_level,this.alignment_size);this._output.add_token(token.text)}};Printer.prototype.indent=function(){this.indent_level++};Printer.prototype.get_full_indent=function(level){level=this.indent_level+(level||0);if(level<1){return''}return this._output.get_indent_string(level)};var get_type_attribute=function(start_token){var result=null;var raw_token=start_token.next;while(raw_token.type!==TOKEN.EOF&&start_token.closed!==raw_token){if(raw_token.type===TOKEN.ATTRIBUTE&&raw_token.text==='type'){if(raw_token.next&&raw_token.next.type===TOKEN.EQUALS&&raw_token.next.next&&raw_token.next.next.type===TOKEN.VALUE){result=raw_token.next.next.text}break}raw_token=raw_token.next}return result};var get_custom_beautifier_name=function(tag_check,raw_token){var typeAttribute=null;var result=null;if(!raw_token.closed){return null}if(tag_check==='script'){typeAttribute='text/javascript'}else if(tag_check==='style'){typeAttribute='text/css'}typeAttribute=get_type_attribute(raw_token)||typeAttribute;if(typeAttribute.search('text/css')>-1){result='css'}else if(typeAttribute.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1){result='javascript'}else if(typeAttribute.search(/(text|application|dojo)\/(x-)?(html)/)>-1){result='html'}else if(typeAttribute.search(/test\/null/)>-1){result='null'}return result};function in_array(what,arr){return arr.indexOf(what)!==-1}function TagFrame(parent,parser_token,indent_level){this.parent=parent||null;this.tag=parser_token?parser_token.tag_name:'';this.indent_level=indent_level||0;this.parser_token=parser_token||null}function TagStack(printer){this._printer=printer;this._current_frame=null}TagStack.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};TagStack.prototype.record_tag=function(parser_token){var new_frame=new TagFrame(this._current_frame,parser_token,this._printer.indent_level);this._current_frame=new_frame};TagStack.prototype._try_pop_frame=function(frame){var parser_token=null;if(frame){parser_token=frame.parser_token;this._printer.indent_level=frame.indent_level;this._current_frame=frame.parent}return parser_token};TagStack.prototype._get_frame=function(tag_list,stop_list){var frame=this._current_frame;while(frame){if(tag_list.indexOf(frame.tag)!==-1){break}else if(stop_list&&stop_list.indexOf(frame.tag)!==-1){frame=null;break}frame=frame.parent}return frame};TagStack.prototype.try_pop=function(tag,stop_list){var frame=this._get_frame([tag],stop_list);return this._try_pop_frame(frame)};TagStack.prototype.indent_to_tag=function(tag_list){var frame=this._get_frame(tag_list);if(frame){this._printer.indent_level=frame.indent_level}};function Beautifier(source_text,options,js_beautify,css_beautify){this._source_text=source_text||'';options=options||{};this._js_beautify=js_beautify;this._css_beautify=css_beautify;this._tag_stack=null;var optionHtml=new Options(options,'html');this._options=optionHtml;this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,'force'.length)==='force';this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==='force-expand-multiline';this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==='force-aligned';this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==='aligned-multiple';this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,'preserve'.length)==='preserve';this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==='preserve-aligned'}Beautifier.prototype.beautify=function(){if(this._options.disabled){return this._source_text}var source_text=this._source_text;var eol=this._options.eol;if(this._options.eol==='auto'){eol='\n';if(source_text&&lineBreak.test(source_text)){eol=source_text.match(lineBreak)[0]}}source_text=source_text.replace(allLineBreaks,'\n');var baseIndentString=source_text.match(/^[\t ]*/)[0];var last_token={text:'',type:''};var last_tag_token=new TagOpenParserToken;var printer=new Printer(this._options,baseIndentString);var tokens=new Tokenizer(source_text,this._options).tokenize();this._tag_stack=new TagStack(printer);var parser_token=null;var raw_token=tokens.next();while(raw_token.type!==TOKEN.EOF){if(raw_token.type===TOKEN.TAG_OPEN||raw_token.type===TOKEN.COMMENT){parser_token=this._handle_tag_open(printer,raw_token,last_tag_token,last_token);last_tag_token=parser_token}else if(raw_token.type===TOKEN.ATTRIBUTE||raw_token.type===TOKEN.EQUALS||raw_token.type===TOKEN.VALUE||raw_token.type===TOKEN.TEXT&&!last_tag_token.tag_complete){parser_token=this._handle_inside_tag(printer,raw_token,last_tag_token,tokens)}else if(raw_token.type===TOKEN.TAG_CLOSE){parser_token=this._handle_tag_close(printer,raw_token,last_tag_token)}else if(raw_token.type===TOKEN.TEXT){parser_token=this._handle_text(printer,raw_token,last_tag_token)}else{printer.add_raw_token(raw_token)}last_token=parser_token;raw_token=tokens.next()}var sweet_code=printer._output.get_code(eol);return sweet_code};Beautifier.prototype._handle_tag_close=function(printer,raw_token,last_tag_token){var parser_token={text:raw_token.text,type:raw_token.type};printer.alignment_size=0;last_tag_token.tag_complete=true;printer.set_space_before_token(raw_token.newlines||raw_token.whitespace_before!=='',true);if(last_tag_token.is_unformatted){printer.add_raw_token(raw_token)}else{if(last_tag_token.tag_start_char==='<'){printer.set_space_before_token(raw_token.text[0]==='/',true);if(this._is_wrap_attributes_force_expand_multiline&&last_tag_token.has_wrapped_attrs){printer.print_newline(false)}}printer.print_token(raw_token)}if(last_tag_token.indent_content&&!(last_tag_token.is_unformatted||last_tag_token.is_content_unformatted)){printer.indent();last_tag_token.indent_content=false}if(!last_tag_token.is_inline_element&&!(last_tag_token.is_unformatted||last_tag_token.is_content_unformatted)){printer.set_wrap_point()}return parser_token};Beautifier.prototype._handle_inside_tag=function(printer,raw_token,last_tag_token,tokens){var wrapped=last_tag_token.has_wrapped_attrs;var parser_token={text:raw_token.text,type:raw_token.type};printer.set_space_before_token(raw_token.newlines||raw_token.whitespace_before!=='',true);if(last_tag_token.is_unformatted){printer.add_raw_token(raw_token)}else if(last_tag_token.tag_start_char==='{'&&raw_token.type===TOKEN.TEXT){if(printer.print_preserved_newlines(raw_token)){raw_token.newlines=0;printer.add_raw_token(raw_token)}else{printer.print_token(raw_token)}}else{if(raw_token.type===TOKEN.ATTRIBUTE){printer.set_space_before_token(true);last_tag_token.attr_count+=1}else if(raw_token.type===TOKEN.EQUALS){printer.set_space_before_token(false)}else if(raw_token.type===TOKEN.VALUE&&raw_token.previous.type===TOKEN.EQUALS){printer.set_space_before_token(false)}if(raw_token.type===TOKEN.ATTRIBUTE&&last_tag_token.tag_start_char==='<'){if(this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned){printer.traverse_whitespace(raw_token);wrapped=wrapped||raw_token.newlines!==0}if(this._is_wrap_attributes_force){var force_attr_wrap=last_tag_token.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&last_tag_token.attr_count===1){var is_only_attribute=true;var peek_index=0;var peek_token;do{peek_token=tokens.peek(peek_index);if(peek_token.type===TOKEN.ATTRIBUTE){is_only_attribute=false;break}peek_index+=1}while(peek_index<4&&peek_token.type!==TOKEN.EOF&&peek_token.type!==TOKEN.TAG_CLOSE);force_attr_wrap=!is_only_attribute}if(force_attr_wrap){printer.print_newline(false);wrapped=true}}}printer.print_token(raw_token);wrapped=wrapped||printer.previous_token_wrapped();last_tag_token.has_wrapped_attrs=wrapped}return parser_token};Beautifier.prototype._handle_text=function(printer,raw_token,last_tag_token){var parser_token={text:raw_token.text,type:'TK_CONTENT'};if(last_tag_token.custom_beautifier_name){this._print_custom_beatifier_text(printer,raw_token,last_tag_token)}else if(last_tag_token.is_unformatted||last_tag_token.is_content_unformatted){printer.add_raw_token(raw_token)}else{printer.traverse_whitespace(raw_token);printer.print_token(raw_token)}return parser_token};Beautifier.prototype._print_custom_beatifier_text=function(printer,raw_token,last_tag_token){var local=this;if(raw_token.text!==''){var text=raw_token.text,_beautifier,script_indent_level=1,pre='',post='';if(last_tag_token.custom_beautifier_name==='javascript'&&typeof this._js_beautify==='function'){_beautifier=this._js_beautify}else if(last_tag_token.custom_beautifier_name==='css'&&typeof this._css_beautify==='function'){_beautifier=this._css_beautify}else if(last_tag_token.custom_beautifier_name==='html'){_beautifier=function(html_source,options){var beautifier=new Beautifier(html_source,options,local._js_beautify,local._css_beautify);return beautifier.beautify()}}if(this._options.indent_scripts==="keep"){script_indent_level=0}else if(this._options.indent_scripts==="separate"){script_indent_level=-printer.indent_level}var indentation=printer.get_full_indent(script_indent_level);text=text.replace(/\n[ \t]*$/,'');if(last_tag_token.custom_beautifier_name!=='html'&&text[0]==='<'&&text.match(/^(<!--|<!\[CDATA\[)/)){var matched=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(text);if(!matched){printer.add_raw_token(raw_token);return}pre=indentation+matched[1]+'\n';text=matched[4];if(matched[5]){post=indentation+matched[5]}text=text.replace(/\n[ \t]*$/,'');if(matched[2]||matched[3].indexOf('\n')!==-1){matched=matched[3].match(/[ \t]+$/);if(matched){raw_token.whitespace_before=matched[0]}}}if(text){if(_beautifier){var Child_options=function(){this.eol='\n'};Child_options.prototype=this._options.raw_options;var child_options=new Child_options;text=_beautifier(indentation+text,child_options)}else{var white=raw_token.whitespace_before;if(white){text=text.replace(new RegExp('\n('+white+')?','g'),'\n')}text=indentation+text.replace(/\n/g,'\n'+indentation)}}if(pre){if(!text){text=pre+post}else{text=pre+text+'\n'+post}}printer.print_newline(false);if(text){raw_token.text=text;raw_token.whitespace_before='';raw_token.newlines=0;printer.add_raw_token(raw_token);printer.print_newline(true)}}};Beautifier.prototype._handle_tag_open=function(printer,raw_token,last_tag_token,last_token){var parser_token=this._get_tag_open_token(raw_token);if((last_tag_token.is_unformatted||last_tag_token.is_content_unformatted)&&!last_tag_token.is_empty_element&&raw_token.type===TOKEN.TAG_OPEN&&raw_token.text.indexOf('</')===0){printer.add_raw_token(raw_token);parser_token.start_tag_token=this._tag_stack.try_pop(parser_token.tag_name)}else{printer.traverse_whitespace(raw_token);this._set_tag_position(printer,raw_token,parser_token,last_tag_token,last_token);if(!parser_token.is_inline_element){printer.set_wrap_point()}printer.print_token(raw_token)}if(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned){parser_token.alignment_size=raw_token.text.length+1}if(!parser_token.tag_complete&&!parser_token.is_unformatted){printer.alignment_size=parser_token.alignment_size}return parser_token};var TagOpenParserToken=function(parent,raw_token){this.parent=parent||null;this.text='';this.type='TK_TAG_OPEN';this.tag_name='';this.is_inline_element=false;this.is_unformatted=false;this.is_content_unformatted=false;this.is_empty_element=false;this.is_start_tag=false;this.is_end_tag=false;this.indent_content=false;this.multiline_content=false;this.custom_beautifier_name=null;this.start_tag_token=null;this.attr_count=0;this.has_wrapped_attrs=false;this.alignment_size=0;this.tag_complete=false;this.tag_start_char='';this.tag_check='';if(!raw_token){this.tag_complete=true}else{var tag_check_match;this.tag_start_char=raw_token.text[0];this.text=raw_token.text;if(this.tag_start_char==='<'){tag_check_match=raw_token.text.match(/^<([^\s>]*)/);this.tag_check=tag_check_match?tag_check_match[1]:''}else{tag_check_match=raw_token.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/);this.tag_check=tag_check_match?tag_check_match[1]:'';if((raw_token.text.startsWith('{{#>')||raw_token.text.startsWith('{{~#>'))&&this.tag_check[0]==='>'){if(this.tag_check==='>'&&raw_token.next!==null){this.tag_check=raw_token.next.text.split(' ')[0]}else{this.tag_check=raw_token.text.split('>')[1]}}}this.tag_check=this.tag_check.toLowerCase();if(raw_token.type===TOKEN.COMMENT){this.tag_complete=true}this.is_start_tag=this.tag_check.charAt(0)!=='/';this.tag_name=!this.is_start_tag?this.tag_check.substr(1):this.tag_check;this.is_end_tag=!this.is_start_tag||raw_token.closed&&raw_token.closed.text==='/>';var handlebar_starts=2;if(this.tag_start_char==='{'&&this.text.length>=3){if(this.text.charAt(2)==='~'){handlebar_starts=3}}this.is_end_tag=this.is_end_tag||this.tag_start_char==='{'&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(handlebar_starts)))}};Beautifier.prototype._get_tag_open_token=function(raw_token){var parser_token=new TagOpenParserToken(this._tag_stack.get_parser_token(),raw_token);parser_token.alignment_size=this._options.wrap_attributes_indent_size;parser_token.is_end_tag=parser_token.is_end_tag||in_array(parser_token.tag_check,this._options.void_elements);parser_token.is_empty_element=parser_token.tag_complete||parser_token.is_start_tag&&parser_token.is_end_tag;parser_token.is_unformatted=!parser_token.tag_complete&&in_array(parser_token.tag_check,this._options.unformatted);parser_token.is_content_unformatted=!parser_token.is_empty_element&&in_array(parser_token.tag_check,this._options.content_unformatted);parser_token.is_inline_element=in_array(parser_token.tag_name,this._options.inline)||parser_token.tag_name.includes("-")||parser_token.tag_start_char==='{';return parser_token};Beautifier.prototype._set_tag_position=function(printer,raw_token,parser_token,last_tag_token,last_token){if(!parser_token.is_empty_element){if(parser_token.is_end_tag){parser_token.start_tag_token=this._tag_stack.try_pop(parser_token.tag_name)}else{if(this._do_optional_end_element(parser_token)){if(!parser_token.is_inline_element){printer.print_newline(false)}}this._tag_stack.record_tag(parser_token);if((parser_token.tag_name==='script'||parser_token.tag_name==='style')&&!(parser_token.is_unformatted||parser_token.is_content_unformatted)){parser_token.custom_beautifier_name=get_custom_beautifier_name(parser_token.tag_check,raw_token)}}}if(in_array(parser_token.tag_check,this._options.extra_liners)){printer.print_newline(false);if(!printer._output.just_added_blankline()){printer.print_newline(true)}}if(parser_token.is_empty_element){if(parser_token.tag_start_char==='{'&&parser_token.tag_check==='else'){this._tag_stack.indent_to_tag(['if','unless','each']);parser_token.indent_content=true;var foundIfOnCurrentLine=printer.current_line_has_match(/{{#if/);if(!foundIfOnCurrentLine){printer.print_newline(false)}}if(parser_token.tag_name==='!--'&&last_token.type===TOKEN.TAG_CLOSE&&last_tag_token.is_end_tag&&parser_token.text.indexOf('\n')===-1);else{if(!(parser_token.is_inline_element||parser_token.is_unformatted)){printer.print_newline(false)}this._calcluate_parent_multiline(printer,parser_token)}}else if(parser_token.is_end_tag){var do_end_expand=false;do_end_expand=parser_token.start_tag_token&&parser_token.start_tag_token.multiline_content;do_end_expand=do_end_expand||!parser_token.is_inline_element&&!(last_tag_token.is_inline_element||last_tag_token.is_unformatted)&&!(last_token.type===TOKEN.TAG_CLOSE&&parser_token.start_tag_token===last_tag_token)&&last_token.type!=='TK_CONTENT';if(parser_token.is_content_unformatted||parser_token.is_unformatted){do_end_expand=false}if(do_end_expand){printer.print_newline(false)}}else{parser_token.indent_content=!parser_token.custom_beautifier_name;if(parser_token.tag_start_char==='<'){if(parser_token.tag_name==='html'){parser_token.indent_content=this._options.indent_inner_html}else if(parser_token.tag_name==='head'){parser_token.indent_content=this._options.indent_head_inner_html}else if(parser_token.tag_name==='body'){parser_token.indent_content=this._options.indent_body_inner_html}}if(!(parser_token.is_inline_element||parser_token.is_unformatted)&&(last_token.type!=='TK_CONTENT'||parser_token.is_content_unformatted)){printer.print_newline(false)}this._calcluate_parent_multiline(printer,parser_token)}};Beautifier.prototype._calcluate_parent_multiline=function(printer,parser_token){if(parser_token.parent&&printer._output.just_added_newline()&&!((parser_token.is_inline_element||parser_token.is_unformatted)&&parser_token.parent.is_inline_element)){parser_token.parent.multiline_content=true}};var p_closers=['address','article','aside','blockquote','details','div','dl','fieldset','figcaption','figure','footer','form','h1','h2','h3','h4','h5','h6','header','hr','main','nav','ol','p','pre','section','table','ul'];var p_parent_excludes=['a','audio','del','ins','map','noscript','video'];Beautifier.prototype._do_optional_end_element=function(parser_token){var result=null;if(parser_token.is_empty_element||!parser_token.is_start_tag||!parser_token.parent){return}if(parser_token.tag_name==='body'){result=result||this._tag_stack.try_pop('head')}else if(parser_token.tag_name==='li'){result=result||this._tag_stack.try_pop('li',['ol','ul'])}else if(parser_token.tag_name==='dd'||parser_token.tag_name==='dt'){result=result||this._tag_stack.try_pop('dt',['dl']);result=result||this._tag_stack.try_pop('dd',['dl'])}else if(parser_token.parent.tag_name==='p'&&p_closers.indexOf(parser_token.tag_name)!==-1){var p_parent=parser_token.parent.parent;if(!p_parent||p_parent_excludes.indexOf(p_parent.tag_name)===-1){result=result||this._tag_stack.try_pop('p')}}else if(parser_token.tag_name==='rp'||parser_token.tag_name==='rt'){result=result||this._tag_stack.try_pop('rt',['ruby','rtc']);result=result||this._tag_stack.try_pop('rp',['ruby','rtc'])}else if(parser_token.tag_name==='optgroup'){result=result||this._tag_stack.try_pop('optgroup',['select'])}else if(parser_token.tag_name==='option'){result=result||this._tag_stack.try_pop('option',['select','datalist','optgroup'])}else if(parser_token.tag_name==='colgroup'){result=result||this._tag_stack.try_pop('caption',['table'])}else if(parser_token.tag_name==='thead'){result=result||this._tag_stack.try_pop('caption',['table']);result=result||this._tag_stack.try_pop('colgroup',['table'])}else if(parser_token.tag_name==='tbody'||parser_token.tag_name==='tfoot'){result=result||this._tag_stack.try_pop('caption',['table']);result=result||this._tag_stack.try_pop('colgroup',['table']);result=result||this._tag_stack.try_pop('thead',['table']);result=result||this._tag_stack.try_pop('tbody',['table'])}else if(parser_token.tag_name==='tr'){result=result||this._tag_stack.try_pop('caption',['table']);result=result||this._tag_stack.try_pop('colgroup',['table']);result=result||this._tag_stack.try_pop('tr',['table','thead','tbody','tfoot'])}else if(parser_token.tag_name==='th'||parser_token.tag_name==='td'){result=result||this._tag_stack.try_pop('td',['table','thead','tbody','tfoot','tr']);result=result||this._tag_stack.try_pop('th',['table','thead','tbody','tfoot','tr'])}parser_token.parent=this._tag_stack.get_parser_token();return result};beautifier.Beautifier=Beautifier;return beautifier}var hasRequiredHtml;function requireHtml(){if(hasRequiredHtml)return htmlExports;hasRequiredHtml=1;var Beautifier=requireBeautifier().Beautifier,Options=requireOptions().Options;function style_html(html_source,options,js_beautify,css_beautify){var beautifier=new Beautifier(html_source,options,js_beautify,css_beautify);return beautifier.beautify()}html.exports=style_html;htmlExports.defaultOptions=function(){return new Options};return htmlExports}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var js_beautify=requireJavascript();var css_beautify=requireCss();var html_beautify=requireHtml();function style_html(html_source,options,js,css){js=js||js_beautify;css=css||css_beautify;return html_beautify(html_source,options,js,css)}style_html.defaultOptions=html_beautify.defaultOptions;src.js=js_beautify;src.css=css_beautify;src.html=style_html;return src}(function(module){function get_beautify(js_beautify,css_beautify,html_beautify){var beautify=function(src,config){return js_beautify.js_beautify(src,config)};beautify.js=js_beautify.js_beautify;beautify.css=css_beautify.css_beautify;beautify.html=html_beautify.html_beautify;beautify.js_beautify=js_beautify.js_beautify;beautify.css_beautify=css_beautify.css_beautify;beautify.html_beautify=html_beautify.html_beautify;return beautify}{(function(mod){var beautifier=requireSrc();beautifier.js_beautify=beautifier.js;beautifier.css_beautify=beautifier.css;beautifier.html_beautify=beautifier.html;mod.exports=get_beautify(beautifier,beautifier,beautifier)})(module)}})(js);const jsBeautify=jsExports;const{html:beautifyHtml}=jsBeautify;const ROOT_DIR=closestPath(path$2.resolve(),"content");const INTERMEDIATE_DIR=path$2.join(ROOT_DIR,"dist","intermediate");const CONTENT_FILE_NAMES_WITH_EXTENSIONS=path$2.readdirSync(path$2.join(ROOT_DIR,"content")).filter((contentFileNameWithExtension=>contentFileNameWithExtension.split(".").at(-1)!=="toml"&&contentFileNameWithExtension.split(".").at(1)));console.log(CONTENT_FILE_NAMES_WITH_EXTENSIONS);const transformStep=(inDirSegment,outDirSegment,transformFunction)=>{CONTENT_FILE_NAMES_WITH_EXTENSIONS.forEach((contentFileNameWithExtension=>{const contentFileNamesWithExtensionSplits=contentFileNameWithExtension.split(".");const contentFileName=contentFileNamesWithExtensionSplits.slice(0,-1).join(".");path$2.writeFileSync(path$2.join(INTERMEDIATE_DIR,outDirSegment,`${contentFileName}.html`),transformFunction(path$2.readFileSync(path$2.join(INTERMEDIATE_DIR,inDirSegment,`${contentFileName}.html`),{encoding:"utf8"}),contentFileName))}))};const transformContent=()=>{CONTENT_FILE_NAMES_WITH_EXTENSIONS.forEach((contentFileNameWithExtension=>{const contentFileNamesWithExtensionSplits=contentFileNameWithExtension.split(".");const contentFileName=contentFileNamesWithExtensionSplits.slice(0,-1).join(".");const contentFileExtension=contentFileNamesWithExtensionSplits.at(-1);path$2.writeFileSync(path$2.join(INTERMEDIATE_DIR,"render",`${contentFileName}.html`),render(path$2.readFileSync(path$2.join(ROOT_DIR,"content",contentFileNameWithExtension),{encoding:"utf8"}),contentFileExtension))}));path$2.readdirSync(path$2.join(INTERMEDIATE_DIR,"layout")).filter((dir=>dir.match(/^\d+\. {2}.+$/))).forEach((dirStartingWithI=>{path$2.rmSync(path$2.join(INTERMEDIATE_DIR,"layout",dirStartingWithI),{recursive:true,force:true})}));transformStep("render","layout",layout);CONTENT_FILE_NAMES_WITH_EXTENSIONS.forEach((contentFileNameWithExtension=>{const contentFileNamesWithExtensionSplits=contentFileNameWithExtension.split(".");const contentFileName=contentFileNamesWithExtensionSplits.slice(0,-1).join(".");path$2.writeFileSync(path$2.join(INTERMEDIATE_DIR,"beautifiedHtml",`${contentFileName}.html`),beautifyHtml(path$2.readFileSync(path$2.join(INTERMEDIATE_DIR,"layout",`${contentFileName}.html`),{encoding:"utf8"}),{indent_size:2,end_with_newline:true,preserve_newlines:false,wrap_attributes:"force-expand-multiline",extra_liners:["head","body","/html","li","p","ol","ul","article","section"],templating:["none"]}));shell.exec(`pnpm exec html-minifier-terser --case-sensitive --collapse-whitespace --conservative-collapse --decode-entities --keep-closing-slash --preserve-line-breaks -o ${path$2.join(INTERMEDIATE_DIR,"minifiedHtml",`${contentFileName}.html`)} ${path$2.join(INTERMEDIATE_DIR,"beautifiedHtml",`${contentFileName}.html`)}`)}))};return transformContent}));
